(this.webpackJsonpRepDict=this.webpackJsonpRepDict||[]).push([[0],{116:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",(function(){return Y})),n.d(a,"logout",(function(){return q})),n.d(a,"addScores",(function(){return z})),n.d(a,"changeLang",(function(){return Q}));var s={};n.r(s),n.d(s,"show",(function(){return X})),n.d(s,"hide",(function(){return Z}));var c={};n.r(c),n.d(c,"show",(function(){return $})),n.d(c,"hide",(function(){return ee})),n.d(c,"success",(function(){return te}));var i,o,r,l=n(24),d=n.n(l),u=n(14),h=n(5),j=n(9),b=n(10),p=n(12),g=n(11),m=n(1),v=n.n(m),O=n(13),f=n(16),_=n(15),k=n(58),x=n.n(k),N=n(8),C={REGISTRATION:N.a+N.b.REGISTRATION,LOGIN:N.a+N.b.LOGIN,AUTH:N.a+N.b.AUTH,GET_DECKS:N.a+N.b.GET_DECKS,GET_DECK:N.a+N.b.GET_DECK,GET_ALL_DECKS:N.a+N.b.GET_ALL_DECKS,SET_LIKE:N.a+N.b.SET_LIKE,ADD_DECK:N.a+N.b.ADD_DECK,CHANGE_DECK:N.a+N.b.CHANGE_DECK,SUBSCRIBE_DECK:N.a+N.b.SUBSCRIBE_DECK,DELETE_DECK:N.a+N.b.DELETE_DECK,GET_SCORES:N.a+N.b.GET_SCORES,CLONE_DECK:N.a+N.b.CLONE_DECK,GET_RATING:N.a+N.b.GET_RATING,GET_USER:N.a+N.b.GET_USER},y=function(e){return e===C.GET_DECK?JSON.parse('\n\t\t\t\t{\n\t\t\t\t\t"deck": {\n\t\t\t\t\t\t"is_private": 0,\n\t\t\t\t\t\t"author_login": "admin",\n\t\t\t\t\t\t"cards": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0440\u0435\u043f",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 1,\n\t\t\t\t\t\t\t\t"main_word": "rap",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0442\u0435\u0445\u043d\u0438\u043a\u0430",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 3,\n\t\t\t\t\t\t\t\t"main_word": "flow",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0431\u043e\u0433\u0430\u0442\u0441\u0442\u0432\u043e",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 22,\n\t\t\t\t\t\t\t\t"main_word": "guap",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0431\u043e\u0433\u0430\u0442\u0441\u0442\u0432\u043e",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 32,\n\t\t\t\t\t\t\t\t"main_word": "guap",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\t"is_owner": false,\n\t\t\t\t\t\t"owner_login": "admin",\n\t\t\t\t\t\t"description": "\u0442\u0443\u0442 \u0447\u0438\u0441\u0442\u043e \u043f\u0440\u043e \u0440\u0435\u043f",\n\t\t\t\t\t\t"count_repetitions": 0,\n\t\t\t\t\t\t"liked": true,\n\t\t\t\t\t\t"subscribed": true,\n\t\t\t\t\t\t"main_language": "eng",\n\t\t\t\t\t\t"second_language": "rus",\n\t\t\t\t\t\t"price": 0,\n\t\t\t\t\t\t"count_words": 4,\n\t\t\t\t\t\t"name": "rap",\n\t\t\t\t\t\t"id": 1,\n\t\t\t\t\t\t"likes": 2\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t'):{error:!0}},w=function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,null,[{key:"GET",value:function(e,t,n){return x.a.get(e,{params:(null===n||void 0===n?void 0:n.token)?Object(h.a)(Object(h.a)({},t),{},{token:localStorage.getItem("token")||""}):Object(h.a)({},t),responseType:(null===n||void 0===n?void 0:n.downloadFile)?"blob":"json"})}},{key:"POST",value:function(e,t,n){var a=(null===n||void 0===n?void 0:n.token)?Object(h.a)(Object(h.a)({},t),{},{token:localStorage.getItem("token")||""}):Object(h.a)({},t);return x.a.post(e,a,{responseType:(null===n||void 0===n?void 0:n.downloadFile)?"blob":"json"})}},{key:"GETFake",value:function(e,t,n){return new Promise((function(t,n){setTimeout((function(){t({data:y(e)})}),100)}))}},{key:"registration",value:function(e){return this.POST(C.REGISTRATION,e)}},{key:"login",value:function(e){return this.POST(C.LOGIN,e)}},{key:"auth",value:function(){return this.GET(C.AUTH,{},{token:!0})}},{key:"getUser",value:function(e,t){var n=this;return this.GET(C.GET_USER,{login:e,page:t},{token:Boolean(localStorage.getItem("token"))}).then((function(e){var t=e.data,a=t.decks.map((function(e){return n.transormArrayOfDeck(e)}));return Object(h.a)(Object(h.a)({},t),{},{decks:Object(_.a)(a)})}))}},{key:"transormArrayOfDeck",value:function(e){return{id:e.id,name:e.name,isPrivate:e.is_private,countWords:e.count_words,countRepetitions:e.count_repetitions,mainLang:e.main_language,secondLang:e.second_language,author:e.author_login,owner:e.owner_login,description:e.description,countLikes:e.likes,activeLike:e.liked,cards:e.cards,subscribed:e.subscribed}}},{key:"getDecks",value:function(e,t){var n=this;return new Promise((function(a,s){n.GET(C.GET_DECKS,{owned_page:e,subscribed_page:t},{token:!0}).then((function(e){var t={subscriptions:e.data.subscriptions.map((function(e){return n.transormArrayOfDeck(e)})),owned:e.data.owned.map((function(e){return n.transormArrayOfDeck(e)}))};console.log(Object(h.a)(Object(h.a)({},e.data),t)),a({data:Object(h.a)(Object(h.a)({},e.data),t)})})).catch((function(){return s({error:!0})}))}))}},{key:"getDeck",value:function(e){var t=this;return new Promise((function(n,a){var s;t.GET(C.GET_DECK,void 0!==(null===(s=localStorage.getItem("token"))||void 0===s?void 0:s.length)?{token:localStorage.getItem("token"),id:e}:{id:e}).then((function(e){if(console.log(e),e.data.error)a({error:!0});else{var s=t.transormArrayOfDeck(e.data.deck);n({deck:s})}}))}))}},{key:"getAllDecks",value:function(e){var t=this;return new Promise((function(n,a){var s;t.GET(C.GET_ALL_DECKS,void 0!==(null===(s=localStorage.getItem("token"))||void 0===s?void 0:s.length)?{token:localStorage.getItem("token"),page:e}:{page:e}).then((function(e){var a=e.data.decks.map((function(e){return t.transormArrayOfDeck(e)}));n(Object(h.a)(Object(h.a)({},e),{},{data:Object(h.a)(Object(h.a)({},e.data),{},{decks:a})}))}))}))}},{key:"addDeck",value:function(e){return this.POST(C.ADD_DECK,e,{token:!0})}},{key:"deleteDeck",value:function(e){return this.POST(C.DELETE_DECK,{deckId:e},{token:!0})}},{key:"getScoresAfterEndPlay",value:function(e,t){return this.POST(C.GET_SCORES,Object(h.a)(Object(h.a)({},e),{},{deckId:t}),{token:!0})}},{key:"cloneDeck",value:function(e){return this.POST(C.CLONE_DECK,{deckId:e},{token:!0})}},{key:"applyChanges",value:function(e,t){return this.POST(C.CHANGE_DECK,{idDeck:e,changes:t},{token:!0})}},{key:"setLike",value:function(e){return this.POST(C.SET_LIKE,{deckId:e},{token:!0})}},{key:"subscribe",value:function(e){return this.POST(C.SUBSCRIBE_DECK,{deckId:e},{token:!0})}},{key:"getRating",value:function(e){return this.GET(C.GET_RATING,{},{token:!1})}}]),e}(),S=n(59),E=n(89),L=n(7),D=n(88),P=n(3),R=n(6);(o=i||(i={})).RUS="RUS",o.ENG="ENG",o.JPN="JPN",o.CHI="CHI",o.ITA="ITA",o.SPA="SPA",o.FRA="FRA",o.GER="GER",function(e){e.EN="en",e.RU="ru"}(r||(r={}));var T,I=[{alias:"en",displayName:"English",internationalName:"ENG"},{alias:"ru",displayName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",internationalName:"RUS"}];!function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.WARNING="WARNING"}(T||(T={}));var A,G="APP/LOGIN",M="APP/LOGOUT",U="APP/ADD_SCORES",K="APP/CHANGE_LANG",H="NOTIFY/SHOW",W="NOTIFY/HIDE";!function(e){e[e.ALERT=0]="ALERT",e[e.CONFIRM=1]="CONFIRM",e[e.PROMPT=2]="PROMPT"}(A||(A={}));var F,B="POPUP/SHOW",V="POPUP/HIDE",J="POPUP/SUCCESS";!function(e){e[e.en=0]="en",e[e.ru=1]="ru"}(F||(F={}));var Y=function(e){return{type:G,payload:e}},q=function(){return{type:M}},z=function(e){return{type:U,payload:e}},Q=function(e){return{type:K,payload:e}},X=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;return{type:H,payload:{type:e,head:t,content:n,timeout:a}}},Z=function(){return{type:W}},$=function(e,t,n,a){return{type:B,payload:{type:e,head:t,content:n,actions:a}}},ee=function(){return{type:V}},te=function(e){return{type:J,payload:e}},ne={app:a,notification:s,popup:c},ae=function(e,t){var n=function(n){e.current&&!e.current.contains(n.target)&&t()};Object(m.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}))},se=(n(70),n(116),n(78)),ce=n(153),ie=n(0),oe=["children"],re=Object(u.b)((function(e){return{auth:e.app.auth,user:e.app.user,lang:e.app.lang}}),(function(e){return{login:function(t){return e(ne.app.login(t))},logout:function(){return e(ne.app.logout())},changeLangInterface:function(t){return e(ne.app.changeLang(t))}}}))(Object(ce.a)()((function(e){var t=Object(m.useState)(!1),n=Object(L.a)(t,2),a=n[0],s=n[1],c=Object(m.useState)(!1),i=Object(L.a)(c,2),o=i[0],r=i[1],l=Object(m.useRef)(null),d=Object(O.h)().pathname,u=Object(se.a)().t;ae(l,(function(){a&&s(!1)})),Object(m.useEffect)((function(){document.body.style.overflow=o?"hidden":"unset"}),[o]);return Object(ie.jsxs)("header",{className:"main_header",children:[Object(ie.jsx)("div",{className:"logo",children:Object(ie.jsx)("span",{className:"logo_text",children:Object(ie.jsx)(f.b,{to:"/",onClick:function(){return r(!1)},children:"RepDict"})})}),Object(ie.jsxs)("div",{className:"menu",children:[Object(ie.jsx)("div",{className:"icon_bars",onClick:function(){return r(!o)},children:Object(ie.jsx)(R.c,{})}),Object(ie.jsxs)("ul",{className:"menu_list responsive_".concat(o?"active":"noactive"),children:[e.routes.filter((function(t){return t.isLogin===e.auth||void 0===t.isLogin})).map((function(e){return Object(ie.jsx)("li",{className:"menu_list_item ".concat(e.path===d?"active":"noactive"),children:Object(ie.jsxs)(f.b,{className:"menu_list_item_link",to:"".concat(e.path),onClick:function(){return r(!1)},children:[!!e.icon&&Object(ie.jsx)(e.icon,{}),u("Components.Header.".concat(e.name))]})},e.path)})),Object(ie.jsx)("div",{className:"language_interaface_toggler",children:Object(ie.jsx)(D.a,{options:I.map((function(e){return{value:e.alias,label:e.displayName}})),onChange:function(t){return e.changeLangInterface(null===t||void 0===t?void 0:t.value)},value:{value:e.lang,label:I.filter((function(t){return t.alias===e.lang}))[0].displayName},isSearchable:!1,components:{Control:function(e){var t=e.children,n=Object(E.a)(e,oe);return Object(ie.jsxs)(P.p.Control,Object(h.a)(Object(h.a)({},n),{},{children:[Object(ie.jsx)("div",{className:"img_wrapper pl-2",children:Object(ie.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/OOjs_UI_icon_language-ltr.svg/1024px-OOjs_UI_icon_language-ltr.svg.png",width:20,alt:"lang"})}),t]}))}}})}),e.auth&&Object(ie.jsxs)("li",{style:{color:"white"},className:"user_panel",onClick:function(){return s(!a)},children:[Object(ie.jsxs)("div",{className:"user_panel_head",children:[Object(ie.jsx)(R.x,{}),e.user.name," ",Object(ie.jsx)("span",{className:"user__balance",children:e.user.balance})]}),Object(ie.jsxs)("ul",{className:"dropdown ".concat(a?"showedDB__fadeIn":"closed"),ref:l,children:[Object(ie.jsx)("li",{className:"dropdown_item",children:Object(ie.jsx)(f.b,{to:"/user/".concat(e.user.login),onClick:function(){return r(!1)},children:u("Components.Header.Profile")})}),Object(ie.jsx)("li",{className:"dropdown_item",children:Object(ie.jsx)(f.b,{to:"/settings",onClick:function(){return r(!1)},children:u("Components.Header.Settings")})}),Object(ie.jsx)("li",{className:"dropdown_item",children:Object(ie.jsx)(f.b,{to:"/",onClick:function(){return e.logout(),void r(!1)},children:u("Components.Header.Logout")})})]})]})]})]})]})}))),le=n(81),de=n.n(le),ue=n(37),he=n(82),je=n(83),be=n(61),pe=n(45),ge={en:{translation:n(84)},ru:{translation:n(85)}};be.a.use(pe.e).init({resources:ge,fallbackLng:localStorage.getItem("i18nextLng")||"en",interpolation:{escapeValue:!1}});var me,ve=be.a,Oe={auth:!1,user:{name:"",login:"",balance:0},lang:localStorage.getItem("i18nextLng")||r.EN},fe={visible:!1,type:"",head:"",content:"",timeout:2e3},_e={visible:!1,type:0,head:"",content:"",close:function(){}},ke=Object(ue.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)({},e),{},{auth:!0,user:{name:t.payload.name,login:t.payload.login,balance:t.payload.balance}});case M:return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{auth:!1,user:{name:"",login:"",balance:0}});case U:return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},{balance:e.user.balance+t.payload})});case K:return ve.changeLanguage(t.payload),localStorage.setItem("i18nextLng",t.payload),Object(h.a)(Object(h.a)({},e),{},{lang:t.payload});default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return{visible:!0,type:t.payload.type,head:t.payload.head,content:t.payload.content,timeout:t.payload.timeout};case W:return Object(h.a)({},fe);default:return e}},popup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{type:t.payload.type,visible:!0,head:t.payload.head,content:t.payload.content,close:t.payload.actions.close,success:t.payload.actions.success};case V:return Object(h.a)({},_e);default:return e}}}),xe=ke,Ne=Object(je.composeWithDevTools)({trace:!0,traceLimit:25}),Ce=Object(ue.createStore)(xe,Ne(Object(ue.applyMiddleware)(he.a)));n(141);!function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.WARNING="WARNING"}(me||(me={}));var ye,we,Se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;Ce.dispatch(ne.notification.show("success",e,t,n))},Ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;Ce.dispatch(ne.notification.show("error",e,t,n))},Le=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;Ce.dispatch(ne.notification.show("warning",e,t,n))},De=function(e){e.visible&&setTimeout((function(){Ce.dispatch(ne.notification.hide())}),e.timeout||2e3);return Object(ie.jsx)("div",{className:"notification notification_".concat(e.type||"default"," notification_").concat(e.visible?"visible":"non-visible"),children:Object(ie.jsxs)("div",{className:"notification_content",children:[Object(ie.jsx)("div",{className:"notification_content__close",onClick:function(){return Ce.dispatch(ne.notification.hide())},children:Object(ie.jsx)(R.v,{})}),Object(ie.jsx)("span",{className:"notification_content__icon",children:function(e){switch(e){case"success":return Object(ie.jsx)(R.f,{});case"error":return Object(ie.jsx)(R.k,{});case"warning":return Object(ie.jsx)(R.j,{})}}(e.type)}),Object(ie.jsx)("h2",{className:"notification_content__head",children:e.head}),Object(ie.jsx)("p",{className:"notification_content__text",children:e.content})]})})},Pe=(n(142),function(e){var t=Object(O.g)(),n=Object(m.useRef)(null);return ae(n,(function(){e.close()})),e.visible?Object(ie.jsx)("div",{className:"watch_container",children:Object(ie.jsxs)("div",{className:"watcher",ref:n,children:[Object(ie.jsx)("div",{className:"name_card",children:e.nameCard}),Object(ie.jsxs)("div",{className:"author",children:["by ",Object(ie.jsx)(f.b,{to:"/user/".concat(e.author),children:e.author})]}),Object(ie.jsx)("div",{className:"close",onClick:function(){return e.close()},children:Object(ie.jsx)(R.v,{})}),Object(ie.jsx)("div",{className:"card_item_panel_item_words",children:Object(ie.jsx)("ul",{className:"card_item_panel_item_words_ul",children:e.cards.map((function(e,t){return Object(ie.jsxs)("li",{className:"item",children:[Object(ie.jsxs)("span",{className:"index",children:["#",t+1,". "]}),Object(ie.jsx)("span",{className:"main_word",children:e.main_word}),"-",Object(ie.jsx)("span",{className:"second_word",children:e.answer})]},t)}))})}),Object(ie.jsx)("div",{className:"btn_wrapper",children:Object(ie.jsx)("button",{className:"__btn btn_play",onClick:function(){return t.push("/play/".concat(e.id))},children:"play"})})]})}):null}),Re=function(e){var t,n,a,s,c=Object(O.g)(),i=Object(m.useState)(!1),o=Object(L.a)(i,2),r=o[0],l=o[1],u=Object(m.useState)(e.activeLike||!1),h=Object(L.a)(u,2),j=h[0],b=h[1],p=Object(m.useState)(e.subscribed||!1),g=Object(L.a)(p,2),v=g[0],_=g[1],k=Object(m.useState)(!1),x=Object(L.a)(k,2),N=x[0],C=x[1],y=Object(m.useState)(e.countLikes||0),S=Object(L.a)(y,2),E=S[0],D=S[1],P=Object(m.useState)(e.isPrivate||!1),T=Object(L.a)(P,2),I=T[0],A=T[1],G=Object(m.useRef)(null);ae(G,(function(){r&&l(!1)}));return Object(ie.jsxs)("div",{className:"card_item card_item_noactive",children:[N&&d.a.createPortal(Object(ie.jsx)(Pe,{id:e.id,author:e.author||"",nameCard:e.name,close:function(){return C(!1)},visible:N,cards:e.cards}),document.getElementById("root-modals")||document.body),Object(ie.jsxs)("div",{className:"control",children:[Object(ie.jsx)("span",{className:"icon",onClick:function(){return l(!r)},children:Object(ie.jsx)(R.i,{})}),Object(ie.jsxs)("ul",{className:"dropdown ".concat(r?"active":"noactive"),ref:G,children:[Object(ie.jsx)("li",{className:"dropdown_item",onClick:function(){return C(!0)},children:"Watch"}),Object(ie.jsx)("li",{className:"dropdown_item",onClick:function(){return c.push("/play/".concat(e.id))},children:"Play"}),(null===(t=e.enableMethods)||void 0===t?void 0:t.enableEdit)&&Object(ie.jsx)("li",{className:"dropdown_item",onClick:function(t){return function(t){var n;l(!1),null===(n=e.edit)||void 0===n||n.call(e,t,e.index)}(t)},children:"Edit"}),(null===(n=e.enableMethods)||void 0===n?void 0:n.enableDelete)&&Object(ie.jsx)("li",{className:"dropdown_item",onClick:function(t){var n;return null===(n=e.delete)||void 0===n?void 0:n.call(e,t,e.id)},children:"Delete"}),(null===(a=e.enableMethods)||void 0===a?void 0:a.enableClone)&&Object(ie.jsx)("li",{className:"dropdown_item",onClick:function(t){var n;return null===(n=e.clone)||void 0===n?void 0:n.call(e,t,e.id)},children:"Clone"})]})]}),Object(ie.jsxs)("p",{className:"card_item_head",children:[void 0!==e.enableMethods&&e.enableMethods.enableChangePrivate&&Object(ie.jsx)("span",{style:{cursor:e.author===e.owner?"pointer":"default"},className:"private_lock",onClick:function(t){return function(t){var n;e.author===e.owner&&(null===(n=e.changePrivate)||void 0===n||n.call(e,t,e.id,!I),A(!I))}(t)},children:I?Object(ie.jsx)(R.o,{}):Object(ie.jsx)(R.p,{})}),Object(ie.jsx)("span",{className:"card_item_head_name",onClick:function(){return c.push("/play/".concat(e.id))},children:e.name}),Object(ie.jsxs)(f.b,{to:"/user/".concat(e.author),className:"author",children:["(by ",e.author,")"]})]}),Object(ie.jsxs)("div",{className:"middle_layer",children:[Object(ie.jsxs)("div",{className:"card_item_head_langs",children:[Object(ie.jsx)("div",{className:"lang main_lang",children:e.mainLang}),"/",Object(ie.jsx)("div",{className:"lang sec_lang",children:e.secondLang})]}),Object(ie.jsxs)("div",{className:"info",children:[Object(ie.jsxs)("p",{className:"info_count_words",children:[e.countWords," words"]}),Object(ie.jsxs)("p",{className:"info_count_repetitions",children:[e.countRepetitions," repetitions"]})]})]}),Object(ie.jsx)("p",{className:"card_item_description",children:Object(ie.jsx)(de.a,{children:e.description})}),Object(ie.jsxs)("div",{className:"footer",children:[(null===(s=e.enableMethods)||void 0===s?void 0:s.enableSubscribe)?Object(ie.jsx)("button",{className:"btn btn-".concat(v?"danger":"primary"),onClick:function(t){return function(t){void 0!==e.subscribe&&e.subscribe(t,e.id),w.subscribe(e.id).then((function(e){console.log(e),Se("\u0413\u043e\u0442\u043e\u0432\u043e!","\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u044b \u043d\u0430 \u044d\u0442\u0443 \u043a\u043e\u043b\u043e\u0434\u0443")})).catch((function(e){return console.log(e)})),_(!v)}(t)},children:v?"Unsubscribe":"Subscribe"}):Object(ie.jsx)("div",{}),Object(ie.jsxs)("span",{className:"likes",onClick:function(t){return function(t){var n,a;console.log(e.enableMethods),(null===(n=e.enableMethods)||void 0===n?void 0:n.enableLike)?(b(!j),D(j?E-1:E+1),null===(a=e.like)||void 0===a||a.call(e,t,e.id)):Le("Warning","Please, sign in",3e3)}(t)},children:[Object(ie.jsx)("span",{className:"heart ".concat(j?"active":"noactive"),children:Object(ie.jsx)(R.l,{})}),E]})]})]})},Te=function(e){var t=Object(m.useState)(e.text),n=Object(L.a)(t,2),a=n[0],s=n[1],c=Object(m.useState)(e.focus||!1),i=Object(L.a)(c,2),o=i[0],r=i[1],l=Object(m.useRef)(null),d=Object(m.useRef)(null),u=function(t,n){t?r(!0):(r(!1),e.text!==n&&e.onChanged(e.text,n||""))};return ae(l,(function(){var e;o&&(u(!1,null===(e=d.current)||void 0===e?void 0:e.value),r(!1))})),Object(ie.jsx)("div",{className:"edit_text",ref:l,children:o?Object(ie.jsx)("input",{ref:d,type:e.typeInput,value:a,onChange:function(e){s(e.currentTarget.value)},onKeyPress:function(e){var t;"Enter"===e.key&&(u(!1,null===(t=d.current)||void 0===t?void 0:t.value),r(!1))},autoFocus:!0}):Object(ie.jsx)("span",{className:"edit_text_content",onClick:function(){return u(!0)},children:a})})},Ie=function(e){var t=Object(m.useState)(!1),n=Object(L.a)(t,2),a=n[0],s=n[1],c=Object(m.useState)(!1),i=Object(L.a)(c,2),o=i[0],r=i[1],l=Object(m.useState)(!1),u=Object(L.a)(l,2),h=u[0],j=u[1],b=Object(m.useState)(e.main_word),p=Object(L.a)(b,2),g=p[0],v=p[1],O=Object(m.useState)(e.answer),f=Object(L.a)(O,2),k=f[0],x=f[1],N=Object(m.useState)(e.description),C=Object(L.a)(N,2),y=C[0],w=C[1],S=Object(m.useRef)(null);return ae(S,(function(){e.visible&&e.close(null)})),d.a.createPortal(Object(ie.jsx)("div",{ref:S,className:"editedCardWatch",style:{display:e.visible?"block":"none",top:e.positionElement.y+240,left:e.positionElement.x-20},children:Object(ie.jsxs)("div",{className:"wrapper",children:[Object(ie.jsx)("div",{className:"beforeTringle",children:Object(ie.jsx)(R.d,{})}),Object(ie.jsx)("div",{className:"closeEditedCard",onClick:function(t){return e.close(t)},children:Object(ie.jsx)(R.v,{})}),Object(ie.jsxs)("div",{className:"control-top",children:[Object(ie.jsx)("input",{type:"text",className:"__input __input_default",value:g,onChange:function(t){return function(t){var n;null===(n=e.eventOnChangeMainWord)||void 0===n||n.call(e,t.currentTarget.value),v(t.currentTarget.value),s(!0)}(t)}}),Object(ie.jsx)(R.q,{}),Object(ie.jsx)("input",{type:"text",className:"__input __input_default",value:k,onChange:function(t){return function(t){var n;null===(n=e.eventOnChangeSecondWord)||void 0===n||n.call(e,t),x(t.currentTarget.value),r(!0)}(t)}})]}),Object(ie.jsx)("textarea",{name:"description",className:"__input __input_default",id:"",cols:10,rows:2,value:y,onChange:function(t){return function(t){var n;null===(n=e.eventOnChangeDescriptionCard)||void 0===n||n.call(e,t),w(t.currentTarget.value),j(!0)}(t)}}),Object(ie.jsx)("button",{className:"__btn",onClick:function(){var t=[];a&&(t=[].concat(Object(_.a)(t),[{type:"CHANGE_CARD",payload:{name:"main_word",id:e.id,value:g}}])),o&&(t=[].concat(Object(_.a)(t),[{type:"CHANGE_CARD",payload:{name:"answer",id:e.id,value:k}}])),h&&(t=[].concat(Object(_.a)(t),[{type:"CHANGE_CARD",payload:{name:"description",id:e.id,value:y}}])),console.log(t),e.save(t,e.id),e.close(null)},children:"save"})]})}),document.getElementById("root")||document.body)},Ae=function(e){var t,n,a,s=Object(m.useState)(e.cards),c=Object(L.a)(s,2),i=c[0],o=c[1],r=Object(m.useState)(e.countWords),l=Object(L.a)(r,2),d=l[0],u=l[1],h=Object(m.useState)([]),j=Object(L.a)(h,2),b=j[0],p=j[1],g=Object(m.useState)(e.name),v=Object(L.a)(g,2),O=v[0],f=v[1],k=Object(m.useState)(""),x=Object(L.a)(k,2),N=x[0],C=x[1],y=Object(m.useState)(""),w=Object(L.a)(y,2),S=w[0],E=w[1],D=Object(m.useState)(""),P=Object(L.a)(D,2),T=P[0],I=P[1],A=Object(m.useState)(1),G=Object(L.a)(A,2),M=G[0],U=G[1];console.log(b);var K=Object(m.useState)(i[0]),H=Object(L.a)(K,2),W=H[0],F=H[1],B=Object(m.useState)(!1),V=Object(L.a)(B,2),J=V[0],Y=V[1],q=Object(m.useState)({x:0,y:0}),z=Object(L.a)(q,2),Q=z[0],X=z[1],Z=Object(m.useState)("ENG"),$=Object(L.a)(Z,2),ee=$[0],te=$[1],ne=Object(m.useState)("RU"),ae=Object(L.a)(ne,2),se=ae[0],ce=ae[1],oe=Object(m.useRef)(null),re=Object(m.useRef)(null),le=Object(m.useRef)(null),de=Object(m.useRef)(null),ue=["RUS","ENG","JPN","CHI","ITA","SPA","FRA","GER"],he=function(){var e={id:(i[i.length-1]||{id:-1}).id+1,main_word:N,answer:S,type:"default",description:T};o((function(t){return[].concat(Object(_.a)(t),[e])})),u((function(e){return e+1})),p((function(t){return[].concat(Object(_.a)(t),[{type:"NEW_CARD",payload:e}])})),C(""),E(""),I(""),U(M+1)},je=function(){var e=ee;te(se),ce(e)};return Object(ie.jsxs)("div",{className:"card_item card_item_active",children:[Object(ie.jsx)("div",{className:"close",onClick:e.close,children:Object(ie.jsx)(R.v,{})}),Object(ie.jsx)("p",{className:"card_item_name",children:Object(ie.jsx)(Te,{text:O,typeInput:"text",focus:!0,onChanged:function(e,t){return function(e){f(e);var t={name:"name",value:e};p((function(e){return[].concat(Object(_.a)(e),[{type:"CHANGE_DECK",payload:t}])}))}(t)}})}),Object(ie.jsxs)("div",{className:"top-panel",children:[Object(ie.jsxs)("div",{className:"select_languages",children:[Object(ie.jsx)("select",{onChange:function(e){te(e.currentTarget.value)},className:"form-select","aria-label":"Default select example",children:ue.map((function(e,t){return Object(ie.jsx)("option",{selected:e===ee,children:e},t)}))}),Object(ie.jsx)("span",{className:"card_item_panel_toggler",onClick:je,children:Object(ie.jsx)(R.b,{})}),Object(ie.jsx)("select",{onChange:function(e){ce(e.currentTarget.value)},className:"form-select","aria-label":"Default select example",children:ue.map((function(e,t){return Object(ie.jsx)("option",{selected:e===se,children:e},t)}))})]}),Object(ie.jsx)("div",{})]}),Object(ie.jsxs)("div",{className:"info",children:[Object(ie.jsxs)("span",{className:"card_item_count_words",children:[d," words"]}),Object(ie.jsxs)("p",{className:"card_item_count_repetitions",children:[e.countRepetitions," repetitions"]})]}),Object(ie.jsx)("div",{className:"description_deck__wrapper",children:Object(ie.jsx)("textarea",{defaultValue:e.description||"",ref:le,placeholder:"Type description deck",name:"",id:"",cols:60,rows:10})}),Object(ie.jsx)("div",{className:"card_item_panel_adding__wrapper",children:Object(ie.jsxs)("div",{className:"card_item_panel_adding",children:[Object(ie.jsxs)("span",{className:"index_card",children:["#",M]}),Object(ie.jsxs)("div",{className:"main-answer-words",children:[Object(ie.jsxs)("div",{className:"input-wrapper form-floating",children:[Object(ie.jsx)("input",{onKeyPress:function(e){"Enter"===e.key&&he()},onChange:function(e){C(e.currentTarget.value)},value:N,type:"text",className:"form-control",id:"floatingInput",placeholder:"type word...",ref:oe}),Object(ie.jsxs)("label",{htmlFor:"floatingInput",children:["Main word on ",ee]})]}),Object(ie.jsx)("span",{className:"card_item_panel_toggler",onClick:je,children:Object(ie.jsx)(R.q,{})}),Object(ie.jsxs)("div",{className:"input-wrapper form-floating",children:[Object(ie.jsx)("input",{onKeyPress:function(e){"Enter"===e.key&&he()},onChange:function(e){E(e.currentTarget.value)},value:S,type:"text",className:"form-control",id:"floatingInput",placeholder:"type word...",ref:re}),Object(ie.jsxs)("label",{htmlFor:"floatingInput",children:["Second word ",se]})]})]}),Object(ie.jsxs)("div",{className:"control_bottom__wrapper",children:[Object(ie.jsx)("textarea",{ref:de,value:T,onKeyPress:function(e){"Enter"===e.key&&he()},onChange:function(e){I(e.currentTarget.value)},placeholder:"Type description",name:"",id:"",cols:60,rows:10}),Object(ie.jsx)("button",{className:"card_item_panel_button_add",onClick:he,children:"add"})]})]})}),J&&Object(ie.jsx)(Ie,{visible:J,id:null===W||void 0===W?void 0:W.id,main_word:null===W||void 0===W?void 0:W.main_word,answer:null===W||void 0===W?void 0:W.answer,description:null===W||void 0===W?void 0:W.description,type:"default",positionElement:Q,eventOnChangeMainWord:function(e){return t=e,n=null===W||void 0===W?void 0:W.id,void o((function(e){var a=e.map((function(e){return e.id===n&&(e.main_word=t),e}));return console.log(e,t,n),a}));var t,n},close:function(){return Y(!1)},save:function(e){console.log(e),p((function(t){return[].concat(Object(_.a)(t),Object(_.a)(e))}))}}),Object(ie.jsx)("div",{className:"card_item_panel_item_words",children:Object(ie.jsx)("ul",{className:"card_item_panel_item_words_ul",children:i.map((function(e,t){return Object(ie.jsxs)("li",{className:"item",onClick:function(e){return function(e,t){X({x:e.currentTarget.offsetLeft,y:e.currentTarget.offsetTop}),F(i[t]),Y(!0)}(e,t)},children:[Object(ie.jsxs)("span",{className:"index",children:["#",t+1,". "]}),Object(ie.jsx)("span",{className:"main_word",children:e.main_word}),"-",Object(ie.jsx)("span",{className:"second_word",children:e.answer}),Object(ie.jsx)("div",{className:"close_deck",onClick:function(e){return function(e,t){e.stopPropagation(),Y(!1),o((function(e){return e.filter((function(e,n){return n!==t}))})),p((function(e){return[].concat(Object(_.a)(e),[{type:"DELETE_CARD",payload:{id:i[t].id}}])}))}(e,t)},children:Object(ie.jsx)(R.v,{})})]},t)}))})}),Object(ie.jsxs)("div",{className:"buttons_group",children:[(null===(t=e.enableMethods)||void 0===t?void 0:t.enableCreate)&&Object(ie.jsx)("button",{className:"__btn __button-default button-create",onClick:function(t){var n,a,s={name:O,isPrivate:!1,description:null===(n=le.current)||void 0===n?void 0:n.value,mainLang:ee,secondLang:se,price:0,cards:i};0!==i.length?null===(a=e.create)||void 0===a||a.call(e,t,s):Le("\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435!","\u0412\u044b \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438!",2500)},children:"create"}),(null===(n=e.enableMethods)||void 0===n?void 0:n.enableSave)&&Object(ie.jsx)("button",{className:"__btn __button-default button-save mr-5",onClick:function(t){var n;return null===(n=e.save)||void 0===n?void 0:n.call(e,t,e.id,b)},children:"save"}),(null===(a=e.enableMethods)||void 0===a?void 0:a.enableDelete)&&Object(ie.jsx)("button",{className:"__btn __button-default button-delete",onClick:function(t){var n;return null===(n=e.delete)||void 0===n?void 0:n.call(e,t,e.id)},children:"delete"})]})]})},Ge=function(e){return Object(ie.jsx)("div",{className:"card_item card_item_noactive new_card",children:Object(ie.jsx)("div",{className:"svg_wrapper",onClick:function(t){return e.add(t)},children:Object(ie.jsx)(R.s,{})})})},Me=function(e){var t=e.info,n=e.className;return Object(ie.jsx)("section",{className:"currsection ".concat(n||""),children:Object.keys(t).map((function(e,n){return Object(ie.jsxs)("p",{className:"currsection__item",children:[Object(ie.jsxs)("span",{className:"currsection__item_key",children:[e,":"]}),Object(ie.jsx)("span",{className:"currsection__item_value",children:Object.values(t)[n]})]},n)}))})},Ue={Header:re,Deck:Re,Currsection:Me,Notification:De},Ke=document.querySelector(".loader__wrapper")||document.body,He=function(){Ke.classList.remove("loader__wrapper--hide")},We=function(){Ke.classList.add("loader__wrapper--hide")},Fe=Ue,Be=function(e){return Object(ie.jsxs)("div",{className:"Popup_confirm",children:[Object(ie.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.success(!1)},children:"Cancel"}),Object(ie.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.success(!0)},children:"Accept"})]})},Ve=Object(u.b)(null,(function(e){return{hide:function(){return e(ne.popup.hide())}}})),Je=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={visible:a.props.visible||!1},a}return Object(b.a)(n,[{key:"close",value:function(){this.props.hide(),this.props.close()}},{key:"success",value:function(e){var t,n;null===(t=(n=this.props).success)||void 0===t||t.call(n,e),this.props.hide(),this.props.close()}},{key:"switchModals",value:function(e){return e===A.CONFIRM?Object(ie.jsx)(Be,{success:this.success.bind(this)}):Object(ie.jsx)(ie.Fragment,{})}},{key:"render",value:function(){return d.a.createPortal(Object(ie.jsx)("div",{className:"Popup__wrapper ".concat(this.props.visible?"active":"noactive"),children:Object(ie.jsxs)("div",{className:"Popup",children:[Object(ie.jsx)("div",{className:"control_top",children:Object(ie.jsx)("span",{className:"close_button",onClick:this.close.bind(this),children:Object(ie.jsx)(R.v,{})})}),Object(ie.jsx)("div",{className:"head",children:Object(ie.jsx)("span",{children:this.props.head})}),Object(ie.jsx)("div",{className:"content",children:Object(ie.jsx)("span",{children:this.props.content})}),Object(ie.jsx)("div",{className:"control_botton",children:this.switchModals(this.props.type)})]})}),document.getElementById("root-modals")||document.body)}}]),n}(v.a.PureComponent),Ye=function(e,t,n,a){return Ce.dispatch(ne.popup.show(A.CONFIRM,e,t,{close:n,success:a}))},qe=Ve(Je),ze=(n(143),n(86)),Qe=n.n(ze),Xe=(n(144),function(e){return Object(ie.jsx)("div",{className:"pagination",children:Object(ie.jsx)(Qe.a,{previousLabel:Object(ie.jsx)(R.g,{}),nextLabel:Object(ie.jsx)(R.h,{}),breakLabel:"...",breakClassName:"break-me",pageCount:e.countPages,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e.changeCurrentPage,containerClassName:"pagination_pages_buttons",activeClassName:"active"})})}),Ze=Object(u.b)((function(e){return{user:e.app.user}})),$e=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={decksSubscriptions:[],decksOwned:[],isNewDeck:!1,isEdit:!1,deckEdit:null,countOwnedPages:1,countSubsPages:1,currentOwnedPage:1,currentSubsPage:1},He(),a}return Object(b.a)(n,[{key:"addDeck",value:function(){this.setState({isNewDeck:!0})}},{key:"saveDeck",value:function(e,t,n){var a=this;w.applyChanges(t,n).then((function(e){console.log(e),a.setState({isEdit:!1})})).catch((function(e){return console.log(e)}))}},{key:"editDeck",value:function(e,t){console.log("edit",t),this.setState({isEdit:!0,deckEdit:this.state.decksOwned[t]})}},{key:"deleteDeck",value:function(e,t){var n=this;Ye("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043a?","\u0415\u0441\u043b\u0438 \u0432\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0434\u0435\u043a, \u0432\u0441\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0442\u043e\u0436\u0435 \u0443\u0434\u0430\u043b\u044f\u0442\u0441\u044f, \u0432\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c?",(function(){return console.log()}),(function(e){e&&w.deleteDeck(t).then((function(e){console.log(e),e.data.error||(n.setState({decksOwned:n.state.decksOwned.filter((function(e){return e.id!==t}))}),Se("OK","\u0414\u0435\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",3e3))})).catch((function(){Ee("\u041e\u0448\u0431\u0438\u043a\u0430","\u0414\u0435\u043a \u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",3e3)}))}))}},{key:"like",value:function(e,t){w.setLike(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),console.log("like",t)}},{key:"changePrivate",value:function(e,t,n){w.applyChanges(t,[{type:"CHANGE_DECK",payload:{name:"isPrivate",value:Number(n)}}]).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"createNewDeck",value:function(e,t){var n=this;w.addDeck(t).then((function(e){console.log(e),n.setState({isNewDeck:!1,decksOwned:[].concat(Object(_.a)(n.state.decksOwned),[Object(h.a)({},t)])})})).catch((function(e){return console.log(e)}))}},{key:"handleUnsibscribe",value:function(e,t){this.setState({decksSubscriptions:this.state.decksSubscriptions.filter((function(e){return e.id!==t}))})}},{key:"handleCloseActiveAddingDeck",value:function(){this.setState({isNewDeck:!1})}},{key:"handleCloseActiveEditingDeck",value:function(){this.setState({isEdit:!1})}},{key:"handleChangeCurrentOwnedPage",value:function(e){this.setState({currentOwnedPage:e.selected+1}),this.updateDecks(e.selected+1,this.state.currentSubsPage)}},{key:"handleChangeCurrentSubsPage",value:function(e){this.setState({currentSubsPage:e.selected+1}),this.updateDecks(this.state.currentOwnedPage,e.selected+1)}},{key:"updateDecks",value:function(e,t){var n=this;w.getDecks(e,t).then((function(e){console.log(e),e.error?(Ee("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041a\u043e\u043b\u043e\u0434\u044b \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0438\u0441\u044c, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),n.props.history.push("/")):n.setState({decksSubscriptions:e.data.subscriptions,decksOwned:e.data.owned,countOwnedPages:e.data.owned_pages,countSubsPages:e.data.subscription_pages}),We()})).catch((function(e){console.log(e),Ee("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041a\u043e\u043b\u043e\u0434\u044b \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0438\u0441\u044c, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),n.props.history.push("/")}))}},{key:"componentDidMount",value:function(){console.log(this.state.decksOwned),this.updateDecks(this.state.currentOwnedPage,this.state.currentSubsPage)}},{key:"render",value:function(){var e,t,n,a,s,c,i,o,r,l,d,u,h,j=this;return Object(ie.jsxs)(v.a.Fragment,{children:[Object(ie.jsxs)("section",{className:"lesson_section",children:[Object(ie.jsx)("h2",{className:"cards_main_name",children:this.props.t(ye||(ye=Object(S.a)(["Pages.Decks.MyDecks"])))}),Object(ie.jsxs)("div",{className:"cards",children:[this.state.isEdit&&Object(ie.jsx)(Ae,{index:-1,id:(null===(e=this.state.deckEdit)||void 0===e?void 0:e.id)||-1,name:(null===(t=this.state.deckEdit)||void 0===t?void 0:t.name)||"NONAME",countWords:(null===(n=this.state.deckEdit)||void 0===n?void 0:n.countWords)||0,countRepetitions:(null===(a=this.state.deckEdit)||void 0===a?void 0:a.countRepetitions)||0,isPrivate:null===(s=this.state.deckEdit)||void 0===s?void 0:s.isPrivate,mainLang:(null===(c=this.state.deckEdit)||void 0===c?void 0:c.mainLang)||"NL",secondLang:(null===(i=this.state.deckEdit)||void 0===i?void 0:i.secondLang)||"NL",cards:(null===(o=this.state.deckEdit)||void 0===o?void 0:o.cards)||[],author:null===(r=this.state.deckEdit)||void 0===r?void 0:r.author,owner:null===(l=this.state.deckEdit)||void 0===l?void 0:l.owner,description:(null===(d=this.state.deckEdit)||void 0===d?void 0:d.description)||"no description",countLikes:(null===(u=this.state.deckEdit)||void 0===u?void 0:u.countLikes)||0,activeLike:(null===(h=this.state.deckEdit)||void 0===h?void 0:h.activeLike)||!1,enableMethods:{enableSave:!0,enableDelete:!0},close:this.handleCloseActiveEditingDeck.bind(this),save:this.saveDeck.bind(this),delete:this.deleteDeck.bind(this)}),this.state.isNewDeck&&Object(ie.jsx)(Ae,{index:-1,id:-1,name:"New Deck",countWords:0,countRepetitions:0,isPrivate:!1,mainLang:"RU",secondLang:"ENG",cards:[],author:this.props.user.login,owner:this.props.user.login,description:"",countLikes:0,activeLike:!1,enableMethods:{enableCreate:!0},close:this.handleCloseActiveAddingDeck.bind(this),create:this.createNewDeck.bind(this)}),Object(ie.jsx)(Ge,{add:this.addDeck.bind(this)}),0!==this.state.decksOwned.length&&this.state.decksOwned.map((function(e,t){return Object(ie.jsx)(Re,{index:t,id:e.id,name:e.name,countWords:e.countWords||0,author:e.author,owner:e.owner,description:e.description,countRepetitions:e.countRepetitions||0,isPrivate:e.isPrivate,mainLang:e.mainLang.toUpperCase(),secondLang:e.secondLang.toUpperCase(),countLikes:e.countLikes||0,activeLike:e.activeLike||!1,cards:e.cards,enableMethods:{enableChangePrivate:!0,enableDelete:!0,enableEdit:!0,enableLike:!0},edit:j.editDeck.bind(j),delete:j.deleteDeck.bind(j),like:j.like,changePrivate:j.changePrivate.bind(j)},"deck_".concat(t))}))]}),Object(ie.jsx)(Xe,{countPages:this.state.countOwnedPages,changeCountPages:function(){return console.log()},changeCurrentPage:function(e){return j.handleChangeCurrentOwnedPage(e)}})]}),Object(ie.jsxs)("section",{className:"lesson_section ".concat(0===this.state.decksSubscriptions.length?"noactive":"active"),children:[Object(ie.jsx)("h2",{className:"cards_main_name",children:this.props.t(we||(we=Object(S.a)(["Pages.Decks.MySubsDecks"])))}),Object(ie.jsx)("div",{className:"cards",children:0!==this.state.decksSubscriptions.length&&this.state.decksSubscriptions.map((function(e,t){return Object(ie.jsx)(Re,{index:t,id:e.id,name:e.name,countWords:e.countWords||0,author:e.author,owner:e.owner,description:e.description,countRepetitions:e.countRepetitions||0,isPrivate:e.isPrivate,mainLang:e.mainLang.toUpperCase(),secondLang:e.secondLang.toUpperCase(),countLikes:e.countLikes||0,activeLike:e.activeLike||!1,cards:e.cards,subscribed:e.subscribed,subscribe:j.handleUnsibscribe.bind(j),enableMethods:{enableLike:!0,enableSubscribe:!0},like:j.like},"deck_".concat(t))}))}),Object(ie.jsx)(Xe,{countPages:this.state.countSubsPages,changeCountPages:function(){return console.log()},changeCurrentPage:function(e){return j.handleChangeCurrentSubsPage(e)}})]})]})}}]),n}(v.a.Component),et=Object(ce.a)()(Ze($e)),tt=(n(74),n(75),function(e){return Object(ie.jsx)("div",{className:"home",children:Object(ie.jsx)("p",{style:{color:"white"},children:"Home, sweet home"})})}),nt=(n(76),Object(u.b)((function(e){return{auth:e.app.auth}}),(function(e){return{login:function(t){return e(ne.app.login(t))}}}))(function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={loginValidate:null,passwordValidate:null},a.login=Object(m.createRef)(),a.password=Object(m.createRef)(),a}return Object(b.a)(n,[{key:"clickLogin",value:function(e){var t,n,a=this;e.preventDefault(),!1!==this.state.loginValidate&&!1!==this.state.passwordValidate?w.login({login:null===(t=this.login.current)||void 0===t?void 0:t.value,password:null===(n=this.password.current)||void 0===n?void 0:n.value}).then((function(e){e.data.error?Ee("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",4e3):(a.props.login(e.data),a.props.history.push("/"),Se("OK","\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!",3e3))})).catch((function(){return Ee("Error","Error on server")})):Ee("Error","Login or password too long")}},{key:"validateForm",value:function(e){switch(console.log(e),e.target.name){case"login":e.target.value.length>3&&this.setState({loginValidate:e.target.value.length<30});break;case"password":e.target.value.length>7&&this.setState({passwordValidate:e.target.value.length<40})}}},{key:"render",value:function(){var e=this;return Object(ie.jsx)("div",{className:"login",children:Object(ie.jsxs)("form",{children:[Object(ie.jsx)("h2",{children:"Login"}),Object(ie.jsxs)("div",{className:"form-floating mb-3",children:[Object(ie.jsx)("input",{type:"text",name:"login",onBlur:function(t){return e.validateForm(t)},ref:this.login,className:"input-login form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.loginValidate?this.state.loginValidate?"is-valid":"is-invalid":""),id:"floatingInput",placeholder:"your login"}),Object(ie.jsx)("label",{htmlFor:"floatingInput",children:"Login"})]}),Object(ie.jsxs)("div",{className:"form-floating mb-3",children:[Object(ie.jsx)("input",{type:"password",onBlur:function(t){return e.validateForm(t)},ref:this.password,className:"input-password form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.passwordValidate?this.state.passwordValidate?"is-valid":"is-invalid":""),id:"floatingInput",name:"password",placeholder:"your password"}),Object(ie.jsx)("label",{htmlFor:"floatingInput",children:"Password"})]}),Object(ie.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.clickLogin(t)},children:"login"})]})})}}]),n}(v.a.Component))),at=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(ie.jsx)("div",{className:"page_statistics",children:"Statistics"})}}]),n}(v.a.Component),st=at,ct=Object(u.b)((function(e){return{auth:e.app.auth}}),(function(e){return{login:function(t){return e(ne.app.login(t))}}}))(function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={nameValidate:null,loginValidate:null,passwordValidate:null},a.name=Object(m.createRef)(),a.login=Object(m.createRef)(),a.password=Object(m.createRef)(),a.rpassword=Object(m.createRef)(),a}return Object(b.a)(n,[{key:"clickRegistration",value:function(e){var t,n,a,s,c,i=this;(e.preventDefault(),this.state.loginValidate&&this.state.nameValidate&&this.state.passwordValidate)?(null===(t=this.password.current)||void 0===t?void 0:t.value)===(null===(n=this.rpassword.current)||void 0===n?void 0:n.value)?w.registration({name:null===(a=this.name.current)||void 0===a?void 0:a.value,login:null===(s=this.login.current)||void 0===s?void 0:s.value,password:null===(c=this.password.current)||void 0===c?void 0:c.value,refer:null}).then((function(e){console.log(e),e.data.error?Ee("\u041e\u0448\u0438\u0431\u043a\u0430","\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0442\u0430\u043a\u043e\u0439 \u043b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442",4e3):(i.props.login(e.data),i.props.history.push("/"))})).catch((function(e){return console.log(e)})):Le("\u041e\u0448\u0438\u0431\u043a\u0430","\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442",4e3):Le("\u041e\u0448\u0438\u0431\u043a\u0430","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",4e3)}},{key:"onValidate",value:function(e){switch(console.log(e),e.currentTarget.name){case"name":this.setState({nameValidate:e.currentTarget.value.length>4});break;case"login":this.setState({loginValidate:e.currentTarget.value.length>3});break;case"password":this.setState({passwordValidate:e.currentTarget.value.length>7})}}},{key:"render",value:function(){var e=this;return Object(ie.jsx)("div",{className:"registration",children:Object(ie.jsxs)("form",{children:[Object(ie.jsx)("h2",{children:"Registration"}),Object(ie.jsxs)("div",{className:"form-floating mb-3",children:[Object(ie.jsx)("input",{name:"name",className:"form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.nameValidate?this.state.nameValidate?"is-valid":"is-invalid":"","\n\t\t\t\t\t\t\t"),onBlur:function(t){return e.onValidate(t)},type:"text",ref:this.name,id:"floatingInput",placeholder:"your name"}),Object(ie.jsx)("label",{htmlFor:"floatingInput",children:"Name"})]}),Object(ie.jsxs)("div",{className:"form-floating mb-3",children:[Object(ie.jsx)("input",{name:"login",className:"form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.loginValidate?this.state.loginValidate?"is-valid":"is-invalid":"","\n\t\t\t\t\t\t\t\t"),onBlur:function(t){return e.onValidate(t)},type:"text",ref:this.login,id:"floatingInput",placeholder:"your login"}),Object(ie.jsx)("label",{htmlFor:"floatingInput",children:"Login"})]}),Object(ie.jsxs)("div",{className:"form-floating mb-3",children:[Object(ie.jsx)("input",{name:"password",className:"form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.passwordValidate?this.state.passwordValidate?"is-valid":"is-invalid":"","\n\t\t\t\t\t\t\t\t"),onBlur:function(t){return e.onValidate(t)},type:"password",ref:this.password,id:"floatingInput",placeholder:"your password"}),Object(ie.jsx)("label",{htmlFor:"floatingInput",children:"Password"})]}),Object(ie.jsxs)("div",{className:"form-floating mb-3",children:[Object(ie.jsx)("input",{type:"password",ref:this.rpassword,className:"form-control",id:"floatingInput",placeholder:"your password"}),Object(ie.jsx)("label",{htmlFor:"floatingInput",children:"Repeat password"})]}),Object(ie.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.clickRegistration(t)},children:"registration"})]})})}}]),n}(v.a.Component)),it=n(30),ot=(n(145),Object(u.b)(null,(function(e){return{addScores:function(t){return e(ne.app.addScores(t))}}}))),rt=function(e){var t=Object(m.useState)(!0),n=Object(L.a)(t,2),a=n[0],s=n[1],c=function(t,n){e.changeLang(t),s(n)};return Object(ie.jsxs)("div",{className:"lang_toggler ".concat(e.className||""),children:[Object(ie.jsx)("span",{className:"main_lang_button main_lang_button-".concat(a?"actived":"non-actived"),onClick:function(){return e.changeable&&c(e.mainLang,!0)},children:e.mainLang}),Object(ie.jsx)("span",{className:"lang_toggler__seporator",onClick:function(){return e.changeable&&c(a?e.secondLang:e.mainLang,!a)},children:Object(ie.jsx)(R.b,{})}),Object(ie.jsx)("span",{className:"second_lang_button second_lang_button-".concat(a?"non-actived":"actived"),onClick:function(){return e.changeable&&c(e.secondLang,!1)},children:e.secondLang})]})},lt=function(e){return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("h2",{className:"section_results__header",children:"Results"}),Object(ie.jsxs)("ul",{className:"section_results_header_list",children:[Object(ie.jsx)("li",{children:"Main word"}),Object(ie.jsx)("li",{children:"Answer word"}),Object(ie.jsx)("li",{children:"Correct"}),Object(ie.jsx)("li",{children:"Time answer"})]}),Object(ie.jsx)("ul",{className:"section_results_list",children:e.results.map((function(e,t){return Object(ie.jsxs)("li",{className:"section_results_list__item",children:[Object(ie.jsx)("span",{className:"section_results_list__item__main_word",children:e.main_word}),Object(ie.jsx)("span",{className:"section_results_list__item__answer",children:e.answer}),Object(ie.jsx)("div",{className:"section_results_list__item__successed section_results_list__item__successed-".concat(e.successed?"correct":"non-correct"),children:Object(ie.jsx)("span",{children:e.successed?"Correct":"Wrong"})}),Object(ie.jsxs)("span",{className:"section_results_list__item__time",children:[e.time,"s"]})]},t)}))})]})},dt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).TIME_CARD=0,a.state={deck:null,cards:[],currentLang:"ENG",lastLang:"ENG",endedWithLastLang:!0,currentCard:0,successed:[],valueInputAnswer:"",ended:!1,showResults:!1,scores:0,visibleHint:!1},a}return Object(b.a)(n,[{key:"shuffleCards",value:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}},{key:"nextCard",value:function(e){var t=this;this.state.currentCard+1<this.state.cards.length?this.setState({currentCard:this.state.currentCard+1,endedWithLastLang:!0,lastLang:this.state.currentLang,successed:[].concat(Object(_.a)(this.state.successed),[{idCard:this.state.cards[this.state.currentCard].id,time:this.getTimeDeck("end"),answer:e}])},(function(){return t.getTimeDeck("start")})):this.setState({ended:!0,successed:[].concat(Object(_.a)(this.state.successed),[{idCard:this.state.cards[this.state.currentCard].id,time:this.getTimeDeck("end"),answer:e}])},(function(){var e;t.getTimeDeck("start"),w.getScoresAfterEndPlay({results:t.state.successed},(null===(e=t.state.deck)||void 0===e?void 0:e.id)||-1).then((function(e){t.setState({scores:e.data.score||0}),t.props.addScores(e.data.score||0)})).catch((function(e){return console.log(e)}))}))}},{key:"getTimeDeck",value:function(e){if("start"===e)this.TIME_CARD=(new Date).getTime();else if("end"===e){var t=this.TIME_CARD;return this.TIME_CARD=0,Math.ceil(((new Date).getTime()-t)/1e3)}return 0}},{key:"checkCard",value:function(e,t){var n,a;return(this.state.endedWithLastLang?this.state.currentLang===(null===(n=this.state.deck)||void 0===n?void 0:n.mainLang)?e.answer.split("|").map((function(e){return e.trim().toLowerCase()})):e.main_word.split("|").map((function(e){return e.trim().toLowerCase()})):this.state.lastLang===(null===(a=this.state.deck)||void 0===a?void 0:a.mainLang)?e.answer.split("|").map((function(e){return e.trim().toLowerCase()})):e.main_word.split("|").map((function(e){return e.trim().toLowerCase()}))).includes(t.toLowerCase())}},{key:"handleNextCard",value:function(){var e=this.state.valueInputAnswer;this.checkCard(this.state.cards[this.state.currentCard],e)?this.nextCard(!0):(this.nextCard(!1),this.setState({valueInputAnswer:""}))}},{key:"handleSkipCard",value:function(){this.nextCard(!1)}},{key:"handleChangeInputAnswer",value:function(e){this.checkCard(this.state.cards[this.state.currentCard],e.currentTarget.value)?(this.setState({valueInputAnswer:""}),this.nextCard(!0)):"-"===e.currentTarget.value?(this.nextCard(!1),this.setState({valueInputAnswer:""})):this.setState({valueInputAnswer:e.currentTarget.value})}},{key:"handleHint",value:function(){this.setState({visibleHint:!this.state.visibleHint})}},{key:"getResults",value:function(){var e=this;return this.state.successed.map((function(t){var n=e.state.cards.filter((function(e){return e.id===t.idCard}))[0];return{main_word:n.main_word,answer:n.answer,successed:t.answer,time:t.time}}))}},{key:"handleForceFinishGame",value:function(){var e,t=this;this.setState({ended:!0}),w.getScoresAfterEndPlay({results:this.state.successed},(null===(e=this.state.deck)||void 0===e?void 0:e.id)||-1).then((function(e){t.setState({scores:e.data.score||0}),t.props.addScores(e.data.score||0)})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,n=Number(t.id);n?w.getDeck(n).then((function(t){e.getTimeDeck("start"),e.setState({deck:t.deck,cards:e.shuffleCards(t.deck.cards),currentLang:t.deck.mainLang})})).catch((function(t){e.props.history.push("/"),Ee("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041b\u0438\u0431\u043e \u0442\u0430\u043a\u043e\u0439 \u043a\u043e\u043b\u043e\u0434\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u043b\u0438\u0431\u043e \u043e\u043d\u0430 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f",3e3)})):(this.props.history.push("/decks"),Le("You have not choise Deck","Please, choose playing Deck",4e3))}},{key:"render",value:function(){var e,t,n,a,s,c,i,o,r,l,d,u,h,j,b,p,g,m,v,O=this;return console.log(this.state.currentLang,this.state.endedWithLastLang,this.state.endedWithLastLang&&this.state.currentLang===(null===(e=this.state.deck)||void 0===e?void 0:e.mainLang)),Object(ie.jsxs)("div",{className:"Play page",style:{color:"white"},children:[Object(ie.jsxs)("div",{className:"Play__card ".concat(this.state.ended?"ended":""),children:[Object(ie.jsxs)("div",{className:"top_panel",children:[Object(ie.jsx)("div",{className:"top_left_panel",children:Object(ie.jsx)(Me,{className:"top_panel__currsection",info:(s={},Object(it.a)(s,this.props.t("Pages.Play.name"),null===(t=this.state.deck)||void 0===t?void 0:t.name),Object(it.a)(s,this.props.t("Pages.Play.description"),(null===(n=this.state.deck)||void 0===n?void 0:n.description)||"no description"),Object(it.a)(s,this.props.t("Pages.Play.currentCard"),"".concat(this.state.currentCard+1," / ").concat(null===(a=this.state.deck)||void 0===a?void 0:a.cards.length)),s)})}),Object(ie.jsxs)("div",{className:"top_right_panel",children:[Object(ie.jsx)(rt,{className:"top_right_panel__lang_toggler",changeable:this.state.endedWithLastLang,mainLang:(null===(c=this.state.deck)||void 0===c?void 0:c.mainLang)||"",secondLang:(null===(i=this.state.deck)||void 0===i?void 0:i.secondLang)||"",changeLang:function(e){return O.state.endedWithLastLang&&O.setState({currentLang:e,lastLang:O.state.currentLang,endedWithLastLang:!1})}}),Object(ie.jsx)("button",{onClick:function(){return O.handleForceFinishGame()},className:"top_right_panel__button_finish",children:"Force Finish"})]})]}),Object(ie.jsx)("section",{className:"lesson_section Play__card_section",children:Object(ie.jsxs)("div",{className:"lesson_card",children:[Object(ie.jsx)("span",{className:"lesson_card_lang",children:this.state.currentLang===this.state.lastLang?this.state.currentLang.toUpperCase():"".concat(this.state.lastLang.toUpperCase()," -> ").concat(this.state.currentLang.toUpperCase())}),Object(ie.jsx)("button",{className:"lesson_card_hint",onClick:this.handleHint.bind(this),children:"?"}),Object(ie.jsx)("div",{className:"hint ".concat(this.state.visibleHint?"active":"noactive"),children:null===(o=this.state.cards[this.state.currentCard])||void 0===o?void 0:o.description}),Object(ie.jsx)("span",{className:"lesson_card_word",children:this.state.endedWithLastLang?this.state.currentLang===(null===(r=this.state.deck)||void 0===r?void 0:r.mainLang)?null===(l=this.state.cards[this.state.currentCard])||void 0===l?void 0:l.main_word:null===(d=this.state.cards[this.state.currentCard])||void 0===d?void 0:d.answer:this.state.lastLang===(null===(u=this.state.deck)||void 0===u?void 0:u.mainLang)?null===(h=this.state.cards[this.state.currentCard])||void 0===h?void 0:h.main_word:null===(j=this.state.cards[this.state.currentCard])||void 0===j?void 0:j.answer})]})}),Object(ie.jsxs)("section",{className:"lesson_section answer",children:[Object(ie.jsx)("div",{onClick:this.handleSkipCard.bind(this),className:"answer_button_skip_word",children:Object(ie.jsx)(R.w,{})}),Object(ie.jsx)("input",{autoFocus:!0,value:this.state.valueInputAnswer,onChange:this.handleChangeInputAnswer.bind(this),type:"text",className:"answer_input",placeholder:"".concat(this.props.t("Pages.Play.translateOn")," ").concat(this.state.endedWithLastLang?this.state.currentLang===(null===(g=this.state.deck)||void 0===g?void 0:g.mainLang)?this.state.deck.secondLang:null===(m=this.state.deck)||void 0===m?void 0:m.mainLang:this.state.lastLang===(null===(b=this.state.deck)||void 0===b?void 0:b.mainLang)?this.state.deck.secondLang:null===(p=this.state.deck)||void 0===p?void 0:p.mainLang,"...")}),Object(ie.jsx)("div",{onClick:function(){return O.handleNextCard()},className:"answer_button_next_word",children:Object(ie.jsx)(R.a,{})})]})]}),Object(ie.jsx)("div",{className:"section_congratulations ".concat(this.state.ended&&!this.state.showResults?"ended":""),children:Object(ie.jsxs)("div",{className:"congratulations",children:[Object(ie.jsxs)("div",{className:"welc",children:[Object(ie.jsx)("h2",{children:this.props.t("Pages.Play.congr")}),Object(ie.jsxs)("h3",{children:[this.props.t("Pages.Play.congrDesc1"),' "',null===(v=this.state.deck)||void 0===v?void 0:v.name,'" ',this.props.t("Pages.Play.congrDesc2")]})]}),Object(ie.jsxs)("h1",{children:[this.props.t("Pages.Play.scores"),": ",this.state.scores]}),Object(ie.jsxs)("div",{className:"control_buttons",children:[Object(ie.jsx)("button",{className:"btn btn-primary",onClick:function(){return O.setState({ended:!1,currentCard:0,cards:O.shuffleCards(O.state.cards),successed:[]})},children:this.props.t("Pages.Play.onceAgain")}),Object(ie.jsx)("button",{className:"btn btn-success",onClick:function(){return O.setState({showResults:!0})},children:this.props.t("Pages.Play.results")}),Object(ie.jsx)(f.b,{to:"/decks",className:"btn btn-danger",children:this.props.t("Pages.Play.toDecks")})]})]})}),Object(ie.jsxs)("div",{className:"section_results ".concat(this.state.showResults?"showed":"hided"),children:[Object(ie.jsx)(lt,{results:this.getResults()}),Object(ie.jsx)("button",{className:"btn btn-primary",onClick:function(){return O.setState({showResults:!1})},children:"back"})]})]})}}]),n}(v.a.Component),ut=Object(ce.a)()(ot(dt)),ht=(n(146),Object(u.b)((function(e){return{auth:e.app.auth,notify:e.notification,user:e.app.user}}))),jt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={decks:[],currentPage:1,countPages:1},He(),a}return Object(b.a)(n,[{key:"handleLike",value:function(e,t){console.log("like",t),w.setLike(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"handleClone",value:function(e,t){w.cloneDeck(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"updateDecks",value:function(e){var t=this;He(),this.setState({decks:[],countPages:0}),w.getAllDecks(e).then((function(e){console.log(e),t.setState({decks:e.data.decks,countPages:e.data.pages}),We()})).catch((function(e){return console.log(e)}))}},{key:"handleChangeCurrentPage",value:function(e){this.setState({currentPage:e.selected+1}),this.updateDecks(e.selected+1)}},{key:"componentDidMount",value:function(){this.updateDecks(this.state.currentPage)}},{key:"render",value:function(){var e=this;return console.log(this.state.decks),Object(ie.jsx)("div",{className:"Store",style:{color:"white"},children:Object(ie.jsxs)("section",{className:"lesson_section",children:[Object(ie.jsx)("h2",{className:"cards_main_name",children:this.props.t("Pages.Store.Store")}),Object(ie.jsx)("div",{className:"cards",children:0!==this.state.decks.length&&this.state.decks.map((function(t,n){return Object(ie.jsx)(Re,{index:n,id:t.id,name:t.name,countWords:t.countWords||0,author:t.author,owner:t.owner,description:t.description,countRepetitions:t.countRepetitions||0,isPrivate:t.isPrivate,mainLang:t.mainLang.toUpperCase(),secondLang:t.secondLang.toUpperCase(),countLikes:t.countLikes||0,activeLike:t.activeLike||!1,cards:t.cards,subscribed:t.subscribed,clone:e.handleClone,like:e.handleLike,enableMethods:{enableLike:e.props.auth,enableSubscribe:t.author!==e.props.user.login&&e.props.auth,enableClone:e.props.auth}},"deck_".concat(n))}))}),Object(ie.jsx)(Xe,{countPages:this.state.countPages,changeCountPages:function(){return console.log()},changeCurrentPage:function(t){return e.handleChangeCurrentPage(t)}})]})})}}]),n}(v.a.Component),bt=Object(ce.a)()(ht(jt)),pt=(n(147),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={rating:[]},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=["login","rating"];He(),w.getRating().then((function(n){console.log(n),e.setState({rating:n.data.users.map((function(e){return Object.keys(e).reduce((function(n,a){return t.includes(a)?Object(h.a)(Object(h.a)({},n),{},Object(it.a)({},a,e[a])):Object(h.a)({},n)}),{})}))},(function(){return We()}))})).catch((function(e){return console.log("err")}))}},{key:"render",value:function(){return Object(ie.jsxs)("div",{className:"Rating",style:{color:"white"},children:[Object(ie.jsx)("h1",{children:this.props.t("Pages.Rating.Rating")}),Object(ie.jsxs)("ul",{className:"header",children:[Object(ie.jsx)("li",{children:Object(ie.jsx)("span",{className:"header_login",children:this.props.t("Pages.Rating.login")})}),Object(ie.jsx)("li",{children:Object(ie.jsx)("span",{className:"header_scores",children:this.props.t("Pages.Rating.scores")})})]}),Object(ie.jsx)("ul",{className:"main_list",children:this.state.rating.map((function(e,t){return Object(ie.jsxs)("li",{className:"main_list_item",children:[Object(ie.jsxs)("span",{className:"login",children:[Object(ie.jsxs)("span",{className:"index",children:[t+1,". "]}),Object(ie.jsxs)(f.b,{to:"/user/".concat(e.login),children:[0===t&&Object(ie.jsx)("span",{children:"\ud83e\udd47"}),1===t&&Object(ie.jsx)("span",{children:"\ud83e\udd48"}),2===t&&Object(ie.jsx)("span",{children:"\ud83e\udd49"}),e.login]})]}),Object(ie.jsx)("span",{className:"rating",children:e.rating})]},t)}))})]})}}]),n}(v.a.Component)),gt=Object(ce.a)()(pt),mt=(n(148),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),a=t.call(this,e),He(),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){We()}},{key:"render",value:function(){return Object(ie.jsx)("div",{className:"Main",style:{color:"white"},children:Object(ie.jsxs)("div",{className:"slider",children:[Object(ie.jsx)("div",{className:"image_wrapper",children:Object(ie.jsx)("img",{className:"image_slider",src:"images/slider.png",alt:"slider image"})}),Object(ie.jsxs)("div",{className:"text_block",children:[Object(ie.jsx)("h1",{children:this.props.t("Pages.Main.welcome")}),Object(ie.jsx)("p",{children:this.props.t("Pages.Main.description")})]})]})})}}]),n}(v.a.Component)),vt=Object(ce.a)()(mt),Ot=n(87),ft=(n(149),Object(u.b)((function(e){return{auth:e.app.auth}}))),_t={Main:vt,Decks:et,Home:tt,Statistics:st,Play:ut,Store:bt,Rating:gt,Registration:ct,Login:nt,User:Object(ce.a)()(ft((function(e){var t,n,a=Object(O.i)().login,s=Object(O.g)(),c=Object(m.useState)({}),i=Object(L.a)(c,2),o=i[0],r=i[1],l=Object(m.useState)(!1),d=Object(L.a)(l,2),u=d[0],h=d[1];return!u&&He(),Object(m.useEffect)((function(){w.getUser(a,1).then((function(e){console.log(e),r(e),u||(We(),h(!0))})).then((function(e){return console.log(o)})).catch((function(e){console.log("[ERROR]: ",e),Ee("\u041e\u0448\u0438\u0431\u043a\u0430","\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0441\u044f...",4e3),setTimeout((function(){s.push("/")}),500)}))}),[a,u]),Object(ie.jsxs)("div",{className:"UserPage",children:[Object(ie.jsxs)("div",{className:"top_panel",children:[Object(ie.jsxs)("div",{className:"top_panel_left",children:[Object(ie.jsx)("div",{className:"avatar",children:Object(ie.jsx)("img",{src:"https://avatars.githubusercontent.com/u/73424545?v=4",alt:"avatar"})}),Object(ie.jsxs)("div",{className:"info",children:[Object(ie.jsx)("h2",{className:"info_name",children:o.name||"USERNAME"}),Object(ie.jsxs)("span",{className:"info_login",children:["@",o.login||"NOLOGIN"]})]})]}),Object(ie.jsxs)("div",{className:"top_panel_right",children:[Object(ie.jsxs)("div",{className:"info_rating",children:[Object(ie.jsx)("span",{className:"info_rating_icon",children:Object(ie.jsx)(R.t,{})}),Object(ie.jsx)("span",{className:"info_rating_count",children:o.rating||1e4})]}),Object(ie.jsx)("div",{className:"info_position",children:Object(ie.jsxs)("span",{className:"info_position_cnt",children:[Object(ie.jsxs)(f.b,{to:"/rating",className:"position_mark",children:["#",1]})," ",e.t("Pages.User.inRating"),"!"]})})]})]}),Object(ie.jsxs)("section",{className:"owners_deck",children:[Object(ie.jsx)("h2",{className:"head_section_owners_deck",children:e.t("Pages.User.LastOwnedDecks")}),Object(ie.jsx)(Ot.a,{hideScrollbars:!1,className:"cards",children:0!==(null===(t=o.decks)||void 0===t?void 0:t.length)&&(null===(n=o.decks)||void 0===n?void 0:n.map((function(t,n){return Object(ie.jsx)(Re,{index:n,id:t.id,name:t.name,countWords:t.countWords||0,author:t.author,owner:t.owner,description:t.description,countRepetitions:t.countRepetitions||0,isPrivate:t.isPrivate,mainLang:t.mainLang.toUpperCase(),secondLang:t.secondLang.toUpperCase(),countLikes:t.countLikes||0,activeLike:t.activeLike||!1,cards:t.cards,enableMethods:{enableChangePrivate:!1,enableDelete:!1,enableEdit:!1,enableLike:e.auth},like:function(){return w.setLike(t.id)}},"deck_".concat(n))})))})]})]})})))},kt=[{isNavBar:!1,isLogin:!1,isExact:!0,path:"/",name:"Main",component:_t.Main},{isNavBar:!1,isLogin:!0,isExact:!0,isPrivate:!0,path:"/home",name:"Home",component:_t.Home,icon:R.m},{isNavBar:!1,isLogin:!0,isExact:!0,isPrivate:!1,path:"/play/:id",name:"Play",component:_t.Play,icon:R.r},{isNavBar:!0,isLogin:!0,isExact:!0,isPrivate:!0,path:"/decks",name:"Decks",component:_t.Decks,icon:R.n},{isNavBar:!0,isExact:!0,path:"/store",name:"Store",component:_t.Store,icon:R.u},{isNavBar:!1,isLogin:!0,isExact:!0,isPrivate:!0,path:"/statistics",name:"Statistics",component:_t.Statistics,icon:R.e},{isNavBar:!0,isExact:!0,path:"/rating",name:"Rating",component:_t.Rating,icon:R.t},{isNavBar:!0,isExact:!0,isLogin:!1,path:"/registration",name:"Registration",component:_t.Registration},{isNavBar:!0,isLogin:!1,isExact:!0,path:"/login",name:"Login",component:_t.Login},{isNavBar:!1,isLogin:!1,isExact:!0,path:"/user/:login",name:"User",component:_t.User}],xt=function(e,t){var n=function(n){Object(p.a)(s,n);var a=Object(g.a)(s);function s(){return Object(j.a)(this,s),a.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){return t?Object(ie.jsx)(e,Object(h.a)({},this.props)):Object(ie.jsx)(O.a,{to:"/login"})}}]),s}(v.a.Component);return n},Nt=(n(150),n(151),function(){return Object(ie.jsx)("footer",{children:Object(ie.jsxs)("div",{className:"wrap_content",children:[Object(ie.jsxs)("div",{className:"front",children:["Front: ",Object(ie.jsx)("a",{href:"https://t.me/daniil00q",children:"Shenyagin Daniil"}),Object(ie.jsx)("a",{href:"https://github.com/daniil00t",children:"@danii00t"})]}),Object(ie.jsxs)("div",{className:"center",children:["RepDict\xa9",(new Date).getFullYear()]}),Object(ie.jsxs)("div",{className:"back",children:["Back: ",Object(ie.jsx)("a",{href:"https://t.me/nafanyechka",children:"Bausov Vadim"}),Object(ie.jsx)("a",{href:"https://github.com/nafanyushka",children:"@nafanyechka"})]})]})})}),Ct=Object(u.b)((function(e){return{auth:e.app.auth,notify:e.notification,popupProps:e.popup}}),(function(e){return{login:function(t){return e(ne.app.login(t))},logout:function(){return e(ne.app.logout())},confirm:function(t,n,a,s){return e(ne.popup.show(A.CONFIRM,t,n,{close:a,success:s}))}}})),yt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(ie.jsx)(O.d,{children:kt.map((function(t){var n=t.isPrivate?xt(t.component,e.props.auth):t.component;return Object(ie.jsx)(O.b,{exact:!0,path:t.path,component:n},t.path)}))})}}]),n}(v.a.PureComponent),wt=Ct(function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={auth:!0},console.log("\n    ____  __________  ____  ________________   _________            __\n   / __ \\/ ____/ __ \\/ __ \\/  _/ ____/_  __/  / ____/ (_)__  ____  / /_\n  / /_/ / __/ / /_/ / / / // // /     / /    / /   / / / _ \\/ __ \\/ __/\n / _, _/ /___/ ____/ /_/ // // /___  / /    / /___/ / /  __/ / / / /_\n/_/ |_/_____/_/   /_____/___/\\____/ /_/     \\____/_/_/\\___/_/ /_/\\__/\n\t\t"),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;void 0!==(null===(e=localStorage.getItem("token"))||void 0===e?void 0:e.length)&&"undefined"!==localStorage.getItem("token")?w.auth().then((function(e){e.data.error?(t.props.logout(),We()):(t.setState({auth:!0}),t.props.login(e.data.data),console.log(e.data.data),We())})).catch((function(e){return console.log(e)})):(this.setState({auth:!1}),localStorage.removeItem("token"),We())}},{key:"render",value:function(){return Object(ie.jsx)(f.a,{children:Object(ie.jsxs)(v.a.Fragment,{children:[Object(ie.jsx)(Fe.Header,{routes:kt.filter((function(e){return e.isNavBar}))}),Object(ie.jsx)(yt,{auth:this.state.auth||this.props.auth}),Object(ie.jsx)(Fe.Notification,Object(h.a)({},this.props.notify)),Object(ie.jsx)(qe,Object(h.a)({},this.props.popupProps)),Object(ie.jsx)(Nt,{})]})})}}]),n}(v.a.Component));d.a.render(Object(ie.jsx)(u.a,{store:Ce,children:Object(ie.jsx)(wt,{})}),document.getElementById("root"))},70:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},8:function(e){e.exports=JSON.parse('{"a":"","b":{"MAIN":"/","USERS":"/users","REGISTRATION":"/registration","LOGIN":"/login","AUTH":"/auth","GET_USER":"/user","GET_DECKS":"/get_decks","GET_DECK":"/get_deck","GET_ALL_DECKS":"/get_all_decks","SET_LIKE":"/like","ADD_DECK":"/new_deck","CHANGE_DECK":"/change_deck","SUBSCRIBE_DECK":"/subscribe","DELETE_DECK":"/delete_deck","GET_SCORES":"/statistic","CLONE_DECK":"/copy_deck","GET_STATISTIC":"/statistic","GET_RATING":"/rating"}}')},84:function(e){e.exports=JSON.parse('{"Pages":{"Main":{"welcome":"Learn, Repeate and Develop","description":"Welcome to the service for memorizing words in foreign languages using flashcards"},"Decks":{"MyDecks":"My Decks","MySubsDecks":"My Subscribed Decks"},"User":{"LastOwnedDecks":"Last Owned Decks","inRating":"in Rating"},"Rating":{"Rating":"Rating","login":"Login","scores":"Scores"},"Store":{"Store":"Store"},"Play":{"name":"name","description":"description","currentCard":"current card","skip":"skip","translateOn":"translate on","congr":"Congratulations!","congrDesc1":"You have passed the","congrDesc2":"deck once again.","scores":"Your scores","onceAgain":"Once again","results":"Results","toDecks":"To Decks"}},"Components":{"Header":{"Home":"Home","Decks":"Decks","Store":"Store","Rating":"Rating","Statistics":"Statistics","Registration":"Registration","Login":"Login","Profile":"Profile","Settings":"Settings","Logout":"Logout"},"Notification":{"authSuccess":"You are logged in!"}}}')},85:function(e){e.exports=JSON.parse('{"Pages":{"Main":{"welcome":"\u0423\u0447\u0438\u0441\u044c, \u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0439 \u0438 \u0420\u0430\u0437\u0432\u0438\u0432\u0430\u0439\u0441\u044f","description":"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0441\u0435\u0440\u0432\u0438\u0441 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0441\u043b\u043e\u0432 \u043d\u0430 \u0438\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0445 \u044f\u0437\u044b\u043a\u0430\u0445 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a"},"Decks":{"MyDecks":"\u041c\u043e\u0438 \u043a\u043e\u043b\u043e\u0434\u044b","MySubsDecks":"\u041c\u043e\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"},"User":{"LastOwnedDecks":"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u0434\u044b","inRating":"\u0432 \u0420\u0435\u0439\u0442\u0438\u043d\u0433\u0435"},"Rating":{"Rating":"\u0420\u0435\u0439\u0442\u0438\u043d\u0433","login":"\u041b\u043e\u0433\u0438\u043d","scores":"\u041e\u0447\u043a\u0438"},"Store":{"Store":"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043e\u043b\u043e\u0434"},"Play":{"name":"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","description":"\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","currentCard":"\u0442\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430","skip":"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c","translateOn":"\u041f\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430","congr":"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f!","congrDesc1":"\u0412\u044b \u043f\u0440\u043e\u0448\u043b\u0438","congrDesc2":"\u0435\u0449\u0435 \u0440\u0430\u0437","scores":"\u0412\u0430\u0448 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442","onceAgain":"\u041f\u0440\u043e\u0439\u0442\u0438 \u0435\u0449\u0435 \u0440\u0430\u0437","results":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b","toDecks":"\u041a \u041a\u043e\u043b\u043e\u0434\u0430\u043c"}},"Components":{"Header":{"Home":"\u0413\u043b\u0430\u0432\u043d\u0430\u044f","Decks":"\u041a\u043e\u043b\u043e\u0434\u044b","Store":"\u041c\u0430\u0433\u0430\u0437\u0438\u043d","Rating":"\u0420\u0435\u0439\u0442\u0438\u043d\u0433","Statistics":"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430","Registration":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","Login":"\u0412\u043e\u0439\u0442\u0438","Profile":"\u041f\u0440\u043e\u0444\u0438\u043b\u044c","Settings":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","Logout":"\u0412\u044b\u0439\u0442\u0438"}}}')}},[[152,1,2]]]);
//# sourceMappingURL=main.259a934a.chunk.js.map