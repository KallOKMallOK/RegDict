{"version":3,"sources":["redux/types.ts","api.ts","redux/actions/app.action.ts","redux/actions/notification.action.ts","redux/actions/popup.action.ts","redux/actions/index.ts","hoc/OutsideClicker.tsx","components/Header.tsx","i18n.ts","components/Notification.tsx","redux/reducers/app.reducer.tsx","redux/reducers/notification.reducer.ts","redux/reducers/popup.reducer.ts","redux/reducers/index.ts","redux/store.ts","components/Deck/Default.deck.tsx","components/EditText.tsx","components/Deck/Active.deck.tsx","components/Deck/Adder.deck.tsx","components/Currsection.tsx","components/index.ts","components/modals/Confirm.tsx","components/modals/index.tsx","components/Pagination.tsx","pages/Decks.tsx","pages/Home.tsx","pages/Login.tsx","pages/Statistics.tsx","pages/Registration.tsx","pages/Play.tsx","pages/Store.tsx","pages/Rating.tsx","pages/Main.tsx","pages/index.ts","pages/User.tsx","routes.tsx","hoc/Authorization.tsx","components/Footer.tsx","App.tsx","index.tsx"],"names":["LANGS","ELangsInterface","API_URLS","REGISTRATION","CONFIG","LOGIN","AUTH","GET_DECKS","GET_DECK","GET_ALL_DECKS","SET_LIKE","ADD_DECK","CHANGE_DECK","SUBSCRIBE_DECK","DELETE_DECK","GET_SCORES","CLONE_DECK","GET_RATING","GET_USER","FAKE_DATA","url","JSON","parse","error","API","data","options","axios","get","params","token","localStorage","getItem","responseType","downloadFile","bodyRequest","post","Promise","resolve","reject","setTimeout","this","POST","GET","login","page","Boolean","then","res","__data","decks","map","deck","transormArrayOfDeck","id","name","isPrivate","is_private","countWords","count_words","countRepetitions","count_repetitions","mainLang","main_language","secondLang","second_language","author","author_login","owner","owner_login","description","countLikes","likes","activeLike","liked","cards","subscribed","ownedPage","subsPage","owned_page","subscribed_page","response","subscriptions","owned","console","log","undefined","length","deckId","idDeck","changes","EStatusNotification","LangsInterface","alias","displayName","internationalName","POPUP_TYPES","APP","NOTIFY","ELangs","POPUP","person","type","payload","logout","addScores","scores","changeLang","lang","show","head","content","timeout","hide","actions","success","acepted","Actions","app","notification","popup","useOutsideClick","ref","callback","handleClick","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","connector","connect","state","auth","user","f","Action","changeLangInterface","withTranslation","props","useState","dropdownVisible","openDropdownUser","menuVisible","openMenuUser","dropdownRef","useRef","match","useLocation","pathname","t","useTranslation","body","style","overflow","className","to","onClick","routes","filter","route","isLogin","path","icon","__lang","value","label","onChange","l","isSearchable","components","Control","children","rest","src","width","alt","color","balance","resources","en","translation","ru","i18n","use","initReactI18next","init","fallbackLng","interpolation","escapeValue","EStatus","initialState","EN","visible","close","rootReducer","combineReducers","action","setItem","removeItem","changeLanguage","composeEnhancers","composeWithDevTools","trace","traceLimit","store","createStore","applyMiddleware","thunkMiddleware","Notification","dispatch","WatchContainer","history","useHistory","thisRef","nameCard","card","index","main_word","answer","push","Deck","openDropdown","activedLike","changeSubscribed","watched","changeWatched","changeCountLikes","changePrivate","ReactDOM","createPortal","getElementById","enableMethods","enableEdit","edit","handleEdit","enableDelete","delete","enableClone","clone","enableChangePrivate","cursor","handleChangePrivate","enableSubscribe","subscribe","resp","catch","err","handleChangeSubscribed","enableLike","like","likeUser","EditText","text","changeText","focus","editing","changeEditing","editTextRef","editTextInputRef","handleChangeEditing","open","newValue","onChanged","typeInput","currentTarget","onKeyPress","key","autoFocus","EditedCard","mainWordChanged","setMainWordChanged","answerChanged","setAnswerChanged","descriptionChanged","setDescriptionChanged","mainWord","changeMainWord","changeAnswer","changeDescription","display","top","positionElement","y","left","x","eventOnChangeMainWord","handleChangeMainWord","eventOnChangeSecondWord","handleChangeAnswer","cols","rows","eventOnChangeDescriptionCard","handleChangeDescription","__changes","save","DeckActive","changeCards","countCards","incCountCards","addChange","changeName","mainWordValue","changeMainWordValue","secondWordValue","changeSecondWordValue","descriptionCard","changeDescriptionCard","indexCard","changeIndexCard","currentCardOpened","changeCurrentCardOpened","visibleCardWatch","changeVisibleCardWatch","positionCard","changePositionCard","changeMainLang","changeSecondLang","mainWordRef","secondWordRef","descriptionDeckRef","descriptionCardRef","handleAddCard","newCard","oldCards","countCardsOld","oldChanges","handleSwapLangs","__mainLang","old","_new","payloadChangeName","handleChangeName","selected","defaultValue","placeholder","htmlFor","__cards","item","changesCard","offsetLeft","offsetTop","handleOpenCardForWatch","stopPropagation","_","_index","handleDeleteCard","enableCreate","dataNewDeck","price","create","enableSave","DeckAdd","add","Currsection","info","Object","keys","values","Components","Header","changeVisible","loader","querySelector","showLoader","classList","remove","hideLoader","Confirm","ModalContainer","successed","CONFIRM","bind","switchModals","React","PureComponent","Modal","Pagination","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","countPages","marginPagesDisplayed","pageRangeDisplayed","onPageChange","changeCurrentPage","containerClassName","activeClassName","Decks","decksSubscriptions","decksOwned","isNewDeck","isEdit","deckEdit","countOwnedPages","countSubsPages","currentOwnedPage","currentSubsPage","setState","_e","applyChanges","accept","deleteDeck","setLike","valuePrivate","Number","addDeck","choosen","updateDecks","getDecks","owned_pages","subscription_pages","Fragment","handleCloseActiveEditingDeck","saveDeck","handleCloseActiveAddingDeck","createNewDeck","toUpperCase","editDeck","changeCountPages","handleChangeCurrentOwnedPage","handleUnsibscribe","handleChangeCurrentSubsPage","Component","Home","loginValidate","passwordValidate","createRef","password","preventDefault","onBlur","validateForm","clickLogin","Statistics","nameValidate","rpassword","registration","refer","onValidate","clickRegistration","Play","TIME_CARD","currentLang","currentCard","valueInputAnswer","ended","showResults","visibleHint","array","i","j","Math","floor","random","idCard","time","getTimeDeck","getScoresAfterEndPlay","results","score","Date","getTime","time_card","ceil","split","ans","trim","toLowerCase","includes","valueAnswer","checkCard","nextCard","suc","__card","getDeck","shuffleCards","handleHint","handleSkipCard","handleChangeInputAnswer","handleNextCard","getResults","result","notify","Store","currentPage","cloneDeck","getAllDecks","pages","handleClone","handleLike","handleChangeCurrentPage","Rating","rating","enableProps","getRating","users","reduce","prev","curr","Main","Pages","Registration","Login","User","useParams","setUser","setLoader","getUser","hideScrollbars","isNavBar","isExact","component","FaHome","FaPlay","FaList","FaStore","FaChartBar","FaStar","Athorization","WrappedComponent","WithAuthorization","Footer","href","getFullYear","popupProps","confirm","Switcher","Authorization","exact","render"],"mappings":"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","file":"static/js/main.e0e4bd5d.chunk.js","sourcesContent":["export enum LANGS{\r\n\tRUS = \"RUS\", \r\n\tENG = \"ENG\", \r\n\tJPN = \"JPN\", \r\n\tCHI = \"CHI\", \r\n\tITA = \"ITA\", \r\n\tSPA = \"SPA\",\r\n\tFRA = \"FRA\", \r\n\tGER = \"GER\"\r\n}\r\n\r\nexport enum ELangsInterface{\r\n\tEN = \"en\",\r\n\tRU = \"ru\"\r\n}\r\n\r\nexport const LangsInterface = [\r\n\t{\r\n\t\talias: \"en\",\r\n\t\tdisplayName: \"English\",\r\n\t\tinternationalName: \"ENG\"\r\n\t},\r\n\t{\r\n\t\talias: \"ru\",\r\n\t\tdisplayName: \"Русский\",\r\n\t\tinternationalName: \"RUS\"\r\n\t},\r\n\r\n]\r\n\r\nexport enum EStatusNotification{\r\n\tSUCCESS = \"SUCCESS\", \r\n\tERROR = \"ERROR\", \r\n\tWARNING = \"WARNING\"\r\n}\r\n\r\n\r\nexport const APP = {\r\n\tLOGIN: \"APP/LOGIN\",\r\n\tLOGOUT: \"APP/LOGOUT\",\r\n\tADD_SCORES: \"APP/ADD_SCORES\",\r\n\tCHANGE_LANG: \"APP/CHANGE_LANG\"\r\n}\r\n\r\nexport const NOTIFY = {\r\n\tSHOW: \"NOTIFY/SHOW\",\r\n\tHIDE: \"NOTIFY/HIDE\",\r\n}\r\n\r\nexport enum POPUP_TYPES{\r\n\t\"ALERT\", \"CONFIRM\", \"PROMPT\"\r\n}\r\nexport const POPUP = {\r\n\tSHOW: \"POPUP/SHOW\",\r\n\tHIDE: \"POPUP/HIDE\",\r\n\tSUCCESS: \"POPUP/SUCCESS\",\r\n}","import axios from 'axios';\r\nimport * as CONFIG from './config.json';\r\nimport { ActionChange } from './domains/entities/actions.entity';\r\nimport { IDeck } from './domains/entities/deсk.entity';\r\nimport { User } from './domains/entities/user.entity';\r\n\r\ninterface OptionsRequest{\r\n\ttoken?: boolean\r\n\tdownloadFile?: boolean\r\n}\r\n\r\nconst API_URLS = {\r\n\tREGISTRATION: CONFIG.HOST + CONFIG.URLS.REGISTRATION,\r\n\tLOGIN: CONFIG.HOST + CONFIG.URLS.LOGIN,\r\n\tAUTH: CONFIG.HOST + CONFIG.URLS.AUTH,\r\n\tGET_DECKS: CONFIG.HOST + CONFIG.URLS.GET_DECKS,\r\n\tGET_DECK: CONFIG.HOST + CONFIG.URLS.GET_DECK,\r\n\tGET_ALL_DECKS: CONFIG.HOST + CONFIG.URLS.GET_ALL_DECKS,\r\n\tSET_LIKE: CONFIG.HOST + CONFIG.URLS.SET_LIKE,\r\n\tADD_DECK: CONFIG.HOST + CONFIG.URLS.ADD_DECK,\r\n\tCHANGE_DECK: CONFIG.HOST + CONFIG.URLS.CHANGE_DECK,\r\n\tSUBSCRIBE_DECK: CONFIG.HOST + CONFIG.URLS.SUBSCRIBE_DECK,\r\n\tDELETE_DECK: CONFIG.HOST + CONFIG.URLS.DELETE_DECK,\r\n\tGET_SCORES: CONFIG.HOST + CONFIG.URLS.GET_SCORES,\r\n\tCLONE_DECK: CONFIG.HOST + CONFIG.URLS.CLONE_DECK,\r\n\tGET_RATING: CONFIG.HOST + CONFIG.URLS.GET_RATING,\r\n\tGET_USER: CONFIG.HOST + CONFIG.URLS.GET_USER\r\n};\r\n\r\nconst FAKE_DATA = (url: string) => {\r\n\tswitch (url) {\r\n\t\tcase API_URLS.GET_DECK:\r\n\t\t\treturn JSON.parse(`\r\n\t\t\t\t{\r\n\t\t\t\t\t\"deck\": {\r\n\t\t\t\t\t\t\"is_private\": 0,\r\n\t\t\t\t\t\t\"author_login\": \"admin\",\r\n\t\t\t\t\t\t\"cards\": [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"реп\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 1,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"rap\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"техника\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 3,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"flow\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"богатство\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 22,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"guap\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"богатство\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 32,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"guap\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"is_owner\": false,\r\n\t\t\t\t\t\t\"owner_login\": \"admin\",\r\n\t\t\t\t\t\t\"description\": \"тут чисто про реп\",\r\n\t\t\t\t\t\t\"count_repetitions\": 0,\r\n\t\t\t\t\t\t\"liked\": true,\r\n\t\t\t\t\t\t\"subscribed\": true,\r\n\t\t\t\t\t\t\"main_language\": \"eng\",\r\n\t\t\t\t\t\t\"second_language\": \"rus\",\r\n\t\t\t\t\t\t\"price\": 0,\r\n\t\t\t\t\t\t\"count_words\": 4,\r\n\t\t\t\t\t\t\"name\": \"rap\",\r\n\t\t\t\t\t\t\"id\": 1,\r\n\t\t\t\t\t\t\"likes\": 2\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t`);\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\terror: true,\r\n\t\t\t};\r\n\t}\r\n};\r\n\r\n// Static class for wokring with API\r\nclass API {\r\n\tprivate static GET(url: string, data: any, options?: OptionsRequest): Promise<any> {\r\n\t\treturn axios.get(\r\n\t\t\turl,\r\n\t\t\t{\r\n\t\t\t\tparams: options?.token ? {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\ttoken: localStorage.getItem('token') || '',\r\n\t\t\t\t} : {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t},\r\n\t\t\t\tresponseType: options?.downloadFile ? 'blob' : 'json',\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\tprivate static POST(url: string, data: any, options?: OptionsRequest): Promise<any> {\r\n\t\tconst bodyRequest = options?.token ? {\r\n\t\t\t...data,\r\n\t\t\ttoken: localStorage.getItem('token') || '',\r\n\t\t} : {\r\n\t\t\t...data,\r\n\t\t};\r\n\t\treturn axios.post(\r\n\t\t\turl,\r\n\t\t\tbodyRequest,\r\n\t\t\t{\r\n\t\t\t\tresponseType: options?.downloadFile ? 'blob' : 'json',\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\tprivate static GETFake(url: string, data: any, options?: OptionsRequest): Promise<any> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tresolve({ data: FAKE_DATA(url) });\r\n\t\t\t}, 100);\r\n\t\t});\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t// ---------------- Registration, Login, Auth and User Info -----------------\r\n\t// --------------------------------------------------------------------------\r\n\r\n\tpublic static registration(data: any): Promise<any> {\r\n\t\treturn this.POST(API_URLS.REGISTRATION, data);\r\n\t}\r\n\r\n\tpublic static login(data: any): Promise<any> {\r\n\t\treturn this.POST(API_URLS.LOGIN, data);\r\n\t}\r\n\r\n\tpublic static auth(): Promise<any> {\r\n\t\treturn this.GET(API_URLS.AUTH, { }, { token: true });\r\n\t}\r\n\r\n\tpublic static getUser(login: string, page?: number): Promise<User & {decks: IDeck[]}> {\r\n\t\treturn this.GET(API_URLS.GET_USER, { login, page }, { token: Boolean(localStorage.getItem(\"token\")) }).then((res: any) => {\r\n\t\t\tconst __data = res.data\r\n\t\t\tconst decks = __data.decks.map((deck: any) => this.transormArrayOfDeck(deck))\r\n\t\t\treturn {\r\n\t\t\t\t...__data,\r\n\t\t\t\tdecks: [...decks]\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t// -------------------------- Decks and Cards -------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\r\n\t// ***GET DATA***\r\n\r\n\t// get decks for certain user (with token)\r\n\tprivate static transormArrayOfDeck(deck: any): IDeck {\r\n\t\treturn {\r\n\t\t\tid: deck.id,\r\n\t\t\tname: deck.name,\r\n\t\t\tisPrivate: deck.is_private,\r\n\t\t\tcountWords: deck.count_words,\r\n\t\t\tcountRepetitions: deck.count_repetitions,\r\n\t\t\tmainLang: deck.main_language,\r\n\t\t\tsecondLang: deck.second_language,\r\n\t\t\tauthor: deck.author_login,\r\n\t\t\towner: deck.owner_login,\r\n\t\t\tdescription: deck.description,\r\n\t\t\tcountLikes: deck.likes,\r\n\t\t\tactiveLike: deck.liked,\r\n\t\t\tcards: deck.cards,\r\n\t\t\tsubscribed: deck.subscribed,\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static getDecks(ownedPage: number, subsPage: number): Promise<any> {\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tthis.GET(API_URLS.GET_DECKS, { owned_page: ownedPage, subscribed_page: subsPage }, { token: true })\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tsubscriptions: response.data.subscriptions.map((deck: any) => this.transormArrayOfDeck(deck)),\r\n\t\t\t\t\t\towned: response.data.owned.map((deck: any) => this.transormArrayOfDeck(deck)),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log({\r\n\t\t\t\t\t\t...response.data,\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t...response.data,\r\n\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic static getDeck(id: number): Promise<any> {\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tthis.GET(API_URLS.GET_DECK, (localStorage.getItem('token')?.length !== undefined ? { token: localStorage.getItem('token'), id } : { id }))\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tconst data: IDeck = this.transormArrayOfDeck(response.data.deck);\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tdeck: data,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic static getAllDecks(page?: number): Promise<any> {\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tthis.GET(API_URLS.GET_ALL_DECKS, (localStorage.getItem('token')?.length !== undefined ? { token: localStorage.getItem('token'), page } : { page }))\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconst data: IDeck = response.data.decks.map((deck: any) => this.transormArrayOfDeck(deck));\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t...response,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t...response.data,\r\n\t\t\t\t\t\t\tdecks: data,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// ***POST DATA***\r\n\tpublic static addDeck(data: any): Promise<any> {\r\n\t\treturn this.POST(API_URLS.ADD_DECK, data, { token: true });\r\n\t}\r\n\r\n\tpublic static deleteDeck(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.DELETE_DECK, { deckId }, { token: true });\r\n\t}\r\n\r\n\tpublic static getScoresAfterEndPlay(data: any, deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.GET_SCORES, { ...data, deckId }, { token: true });\r\n\t}\r\n\r\n\tpublic static cloneDeck(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.CLONE_DECK, { deckId }, { token: true });\r\n\t}\r\n\r\n\t// ***CHANGE DATA***\r\n\tpublic static applyChanges(idDeck: number, changes: ActionChange[]) {\r\n\t\treturn this.POST(API_URLS.CHANGE_DECK, { idDeck, changes }, { token: true });\r\n\t}\r\n\r\n\t// specific methods\r\n\tpublic static setLike(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.SET_LIKE, { deckId }, { token: true });\r\n\t}\r\n\r\n\tpublic static subscribe(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.SUBSCRIBE_DECK, { deckId }, { token: true });\r\n\t}\r\n\r\n\t// -----------------------------------------------------------------------------\r\n\t// ------------------------------- Rating --------------------------------------\r\n\t// -----------------------------------------------------------------------------\r\n\r\n\tpublic static getRating(page?: number): Promise<any> {\r\n\t\treturn this.GET(API_URLS.GET_RATING, { }, { token: false });\r\n\t}\r\n\t\r\n}\r\n\r\nexport default API;\r\n","import { APP, ELangsInterface } from \"../types\"\r\n\r\n// enum ERefer {NOT, GOOGLE, VK, FACEBOOK}\r\nenum ELangs {\r\n\t\"en\", \"ru\"\r\n}\r\n\r\nexport interface IPerson{\r\n\tlogin: string,\r\n\tname: string\r\n\tbalance: number\r\n}\r\n\r\nexport const login = (person: IPerson) => {\r\n\treturn {\r\n\t\ttype: APP.LOGIN,\r\n\t\tpayload: person\r\n\t}\r\n}\r\nexport const logout = () => {\r\n\treturn {\r\n\t\ttype: APP.LOGOUT,\r\n\t}\r\n}\r\n\r\nexport const addScores = (scores: number) => {\r\n\treturn {\r\n\t\ttype: APP.ADD_SCORES,\r\n\t\tpayload: scores\r\n\t}\r\n}\r\n\r\nexport const changeLang = (lang: ELangsInterface) => ({\r\n\ttype: APP.CHANGE_LANG,\r\n\tpayload: lang\r\n})","import { NOTIFY } from \"../types\" \r\n\r\nexport const show = (type: string, head: string, content: string, timeout = 300) => ({\r\n\ttype: NOTIFY.SHOW,\r\n\tpayload: {\r\n\t\ttype,\r\n\t\thead,\r\n\t\tcontent,\r\n\t\ttimeout\r\n\t}\r\n})\r\n\r\nexport const hide = () => ({\r\n\ttype: NOTIFY.HIDE\r\n})","import { POPUP, POPUP_TYPES } from \"../types\" \r\n\r\ninterface ActionsMethodPopup{\r\n\tclose: () => void\r\n\tsuccess?: (suc: boolean) => void\r\n}\r\n\r\nexport const show = (type: POPUP_TYPES, head: string, content: string, actions: ActionsMethodPopup) => ({\r\n\ttype: POPUP.SHOW,\r\n\tpayload: {\r\n\t\ttype,\r\n\t\thead,\r\n\t\tcontent,\r\n\t\tactions\r\n\t}\r\n})\r\n\r\nexport const hide = () => ({\r\n\ttype: POPUP.HIDE\r\n})\r\n\r\nexport const success = (acepted: boolean) => ({\r\n\ttype: POPUP.SUCCESS,\r\n\tpayload: acepted\r\n})","import * as app from \"./app.action\"\r\nimport * as notification from \"./notification.action\"\r\nimport * as popup from \"./popup.action\"\r\n\r\nconst Actions = {\r\n\tapp,\r\n\tnotification,\r\n\tpopup\r\n}\r\n\r\nexport default Actions","import { useEffect } from \"react\";\r\n\r\nconst useOutsideClick = (ref: any, callback: () => void) => {\r\n  const handleClick = (e: any) => {\r\n    if (ref.current && !ref.current.contains(e.target)) {\r\n      callback();\r\n    } \r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClick);\r\n    };\r\n  });\r\n};\r\n\r\nexport default useOutsideClick;\r\n","import React, {  useEffect, useRef, useState } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport Select, { components } from 'react-select'\r\nimport { FaUser, FaBars } from \"react-icons/fa\"\r\n\r\n// Controllers data\r\nimport { IRoute } from \"../routes\"\r\nimport Action from \"../redux/actions\"\r\nimport useOutsideClick from \"../hoc/OutsideClicker\"\r\n\r\n// Styles\r\nimport \"../styles/components.scss\"\r\nimport \"../styles/vars.scss\"\r\nimport { Dispatch } from 'redux'\r\nimport { RootState } from '../redux/store'\r\nimport { User } from '../domains/entities/user.entity'\r\nimport { ELangsInterface, LangsInterface } from '../redux/types'\r\nimport { useTranslation, withTranslation } from 'react-i18next'\r\n\r\n// -----------------------------------------------------------------------------\r\n// ---------------------- Connect to redux emmiter -----------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth,\r\n\tuser: state.app.user,\r\n\tlang: state.app.lang\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: User) => f(Action.app.login(user)),\r\n\tlogout: () => f(Action.app.logout()),\r\n\tchangeLangInterface: (lang: ELangsInterface) => f(Action.app.changeLang(lang))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\n\r\n\r\ninterface AppProps extends PropsFromRedux{\r\n\troutes: IRoute[]\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------- Header hook including interfaces -----------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst Header: React.FC<AppProps> = props => {\r\n\r\n\tconst [dropdownVisible, openDropdownUser] = useState(false)\r\n\tconst [menuVisible, openMenuUser] = useState(false)\r\n\r\n\tconst dropdownRef = useRef<HTMLUListElement>(null)\r\n\tconst match = useLocation().pathname\r\n\r\n\tconst { t } = useTranslation()\r\n\r\n\tuseOutsideClick(dropdownRef, () => {\r\n\t\tif(dropdownVisible) openDropdownUser(false)\r\n\t})\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(menuVisible)\r\n\t\t\tdocument.body.style.overflow = 'hidden'\r\n\t\telse\r\n\t\t\tdocument.body.style.overflow = 'unset'\r\n\t}, [menuVisible ])\r\n\r\n\tconst logout = () => {\r\n\t\tprops.logout()\r\n\t\topenMenuUser(false)\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<header className=\"main_header\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<span className=\"logo_text\"><Link to=\"/\" onClick={() => openMenuUser(false)}>RepDict</Link></span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"menu\">\r\n\t\t\t\t<div className=\"icon_bars\" onClick={() => openMenuUser(!menuVisible)}>\r\n\t\t\t\t\t<FaBars />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<ul className={`menu_list responsive_${menuVisible ? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.routes.filter(route => route.isLogin === props.auth || route.isLogin === undefined)\r\n\t\t\t\t\t\t\t.map((route: IRoute) => {\r\n\t\t\t\t\t\t\treturn <li \r\n\t\t\t\t\t\t\t\tkey={route.path} \r\n\t\t\t\t\t\t\t\tclassName={`menu_list_item ${route.path === match ? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\t\t\t\tclassName=\"menu_list_item_link\" \r\n\t\t\t\t\t\t\t\t\t\tto={`${route.path}`} onClick={() => openMenuUser(false)}>\r\n\t\t\t\t\t\t\t\t\t\t{!!route.icon && <route.icon/>}\r\n\t\t\t\t\t\t\t\t\t\t{t(`Components.Header.${route.name}`)}\r\n\t\t\t\t\t\t\t\t\t\t{/* {route.name} */}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{/* <div className=\"theme_interface_toggler\">\r\n\t\t\t\t\t\tDark/Light\r\n\t\t\t\t\t</div>*/}\r\n\t\t\t\t\t<div className=\"language_interaface_toggler\">\r\n\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\toptions={LangsInterface.map(__lang => {return { value: __lang.alias, label: __lang.displayName }})}\r\n\t\t\t\t\t\t\tonChange={e => props.changeLangInterface(e?.value as ELangsInterface)}\r\n\t\t\t\t\t\t\tvalue={{ value: props.lang, label: (LangsInterface.filter(l => l.alias === props.lang))[0].displayName}}\r\n\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t// theme={(theme: any) => ({\r\n\t\t\t\t\t\t\t// \t...theme,\r\n\t\t\t\t\t\t\t// \tborderRadius: 5,\r\n\t\t\t\t\t\t\t// \tcolors: {\r\n\t\t\t\t\t\t\t// \t\t...theme.colors,\r\n\t\t\t\t\t\t\t// \t\tprimary25: 'red',\r\n\t\t\t\t\t\t\t// \t\tprimary: 'black',\r\n\t\t\t\t\t\t\t// \t\tneutral0: \"#202022\"\r\n\t\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// })}\r\n\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\tControl: ({ children, ...rest }) => (\r\n\t\t\t\t\t\t\t\t\t<components.Control {...rest}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"img_wrapper pl-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/OOjs_UI_icon_language-ltr.svg/1024px-OOjs_UI_icon_language-ltr.svg.png\" width={20} alt=\"lang\"/>\r\n\t\t\t\t\t\t\t\t\t\t</div>{children}\r\n\t\t\t\t\t\t\t\t\t</components.Control>\r\n\t\t\t\t\t\t\t\t)}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/* <select \r\n\t\t\t\t\t\t\tclassName=\"select_lang form-select\" \r\n\t\t\t\t\t\t\taria-label=\"Default select example\"\r\n\t\t\t\t\t\t\tonChange={e => props.changeLangInterface(e.currentTarget.value as ELangsInterface)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tLangsInterface.map(langItem => {\r\n\t\t\t\t\t\t\t\t\treturn <option \r\n\t\t\t\t\t\t\t\t\t\tselected={langItem.alias === props.lang}\r\n\t\t\t\t\t\t\t\t\t\tkey={langItem.internationalName} \r\n\t\t\t\t\t\t\t\t\t\tvalue={langItem.alias}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{langItem.displayName}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</select> */}\r\n\t\t\t\t\t</div> \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// User panel\r\n\t\t\t\t\t\tprops.auth && <li style={{ color: \"white\" }} className=\"user_panel\" onClick={() => openDropdownUser(!dropdownVisible)}>\r\n\t\t\t\t\t\t\t<div className=\"user_panel_head\"><FaUser />{props.user.name} <span className=\"user__balance\">{props.user.balance}</span></div>\r\n\t\t\t\t\t\t\t<ul className={`dropdown ${dropdownVisible? \"showedDB__fadeIn\": \"closed\"}`} ref={dropdownRef}>\r\n\t\t\t\t\t\t\t\t<li className=\"dropdown_item\">\r\n\t\t\t\t\t\t\t\t\t<Link to={`/user/${props.user.login}`} onClick={() => openMenuUser(false)}>{t(`Components.Header.Profile`)}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"dropdown_item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/settings\" onClick={() => openMenuUser(false)}>{t(`Components.Header.Settings`)}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"dropdown_item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\" onClick={() => logout()}>{t(`Components.Header.Logout`)}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default connector(withTranslation()(Header))\r\n\r\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport translationEN from './locales/en/translation.json';\r\nimport translationRU from './locales/ru/translation.json';\r\n\r\n// the translations\r\nconst resources = {\r\n  en: {\r\n    translation: translationEN\r\n  },\r\n  ru: {\r\n    translation: translationRU\r\n  },\r\n};\r\ni18n\r\n  .use(initReactI18next)\r\n  // .use(reactI18nextModule as Module) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    fallbackLng: localStorage.getItem(\"i18nextLng\") as string || \"en\",\r\n    // keySeparator: false, // we do not use keys in form messages.welcome\r\n    interpolation: {\r\n      escapeValue: false // react already safes from xss\r\n    }\r\n  });\r\nexport default i18n;","import React, { useState } from \"react\"\r\nimport Action from \"../redux/actions\"\r\nimport store from \"../redux/store\"\r\n\r\nimport { FaTimes } from \"react-icons/fa\"\r\n\r\nenum EStatus{\r\n\tSUCCESS = \"SUCCESS\", \r\n\tERROR = \"ERROR\", \r\n\tWARNING = \"WARNING\"\r\n}\r\n\r\n\r\n\r\ninterface NotifyProps{\r\n\tvisible: boolean\r\n\thead: string\r\n\tcontent: string\r\n\ttype: EStatus\r\n\ttimeout?: number\r\n}\r\n\r\nexport const Notification = {\r\n\tsuccess: (head: string, content: NotifyProps['content'], timeout = 2000) => {\r\n\t\tstore.dispatch(Action.notification.show(\"success\", head, content, timeout))\r\n\t},\r\n\terror: (head: string, content: NotifyProps['content'], timeout = 2000) => {\r\n\t\tstore.dispatch(Action.notification.show(\"error\", head, content, timeout))\r\n\t},\r\n\twarning: (head: string, content: NotifyProps['content'], timeout = 2000) => {\r\n\t\tstore.dispatch(Action.notification.show(\"warning\", head, content, timeout))\r\n\t}\r\n}\r\n\r\nconst NotificationContainer: React.FC<NotifyProps> = props => {\r\n\tconst [, changeVisible] = useState(props.visible)\r\n\r\n\r\n\tprops.visible && setTimeout(() => {\r\n\t\tchangeVisible(false)\r\n\t\tstore.dispatch(Action.notification.hide())\r\n\t}, props.timeout || 2000)\r\n\r\n\treturn (\r\n\t\t<div className={`Notification notify_${props.type || \"default\"}`} style={{display: props.visible? \"block\": \"none\"}}>\r\n\t\t\t<div className=\"Notification_wrapper_content\">\r\n\t\t\t\t<div className=\"close\" onClick={() => store.dispatch(Action.notification.hide())}><FaTimes/></div>\r\n\t\t\t\t<h2 className=\"head\">{props.head}</h2>\r\n\t\t\t\t<p className=\"content\">{props.content}</p>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n\r\nexport default NotificationContainer","import { PayloadAction } from '@reduxjs/toolkit'\r\nimport i18n from '../../i18n';\r\nimport { APP, ELangsInterface } from \"../types\"\r\n\r\ninterface State{\r\n   auth: boolean\r\n   user: {\r\n      name: string,\r\n      login: string,\r\n      balance: number\r\n   }\r\n   lang: ELangsInterface\r\n}\r\n\r\n\r\nconst initialState: State = {\r\n   auth: false,\r\n   user: {\r\n      name: \"\",\r\n      login: \"\",\r\n      balance: 0\r\n   },\r\n   lang: localStorage.getItem(\"i18nextLng\") as ELangsInterface || ELangsInterface.EN\r\n}\r\n\r\nexport const app = (state: State = initialState, action: PayloadAction<any>) => {\r\n   switch(action.type){\r\n      case APP.LOGIN:\r\n         localStorage.setItem(\"token\", action.payload.token)\r\n         return {\r\n            ...state,\r\n            auth: true,\r\n            user: {\r\n               name: action.payload.name,\r\n               login: action.payload.login,\r\n               balance: action.payload.balance\r\n            }\r\n         }\r\n      case APP.LOGOUT:\r\n         localStorage.removeItem(\"token\")\r\n         return {\r\n            ...state,\r\n            auth: false,\r\n            user: {\r\n               name: \"\",\r\n               login: \"\",\r\n               balance: 0\r\n            }\r\n         }\r\n      case APP.ADD_SCORES:\r\n         return {\r\n            ...state,\r\n            user: {\r\n               ...state.user,\r\n               balance: state.user.balance + action.payload\r\n            }\r\n         }\r\n      case APP.CHANGE_LANG:\r\n         i18n.changeLanguage(action.payload)\r\n         localStorage.setItem(\"i18nextLng\", action.payload)\r\n         return {\r\n            ...state,\r\n            lang: action.payload\r\n         }\r\n      default:\r\n         return state\r\n   }\r\n}","import { PayloadAction } from \"@reduxjs/toolkit\"\r\nimport { NOTIFY } from \"../types\"\r\n\r\nconst initialState = {\r\n\tvisible: false,\r\n\ttype: null,\r\n\thead: \"\",\r\n\tcontent: \"\",\r\n\ttimeout: 2000\r\n}\r\n\r\nexport const notification = (state = initialState, action: PayloadAction<{type: string, head: string, content: string, timeout?: number} & number>) => {\r\n\tswitch(action.type){\r\n\t\tcase NOTIFY.SHOW:\r\n\t\t\treturn{\r\n\t\t\t\tvisible: true,\r\n\t\t\t\ttype: action.payload.type,\r\n\t\t\t\thead: action.payload.head,\r\n\t\t\t\tcontent: action.payload.content,\r\n\t\t\t\ttimeout: action.payload.timeout,\r\n\t\t\t}\r\n\t\tcase NOTIFY.HIDE:{\r\n\t\t\treturn{\r\n\t\t\t\t...initialState\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { POPUP } from \"../types\"\r\n\r\nconst initialState = {\r\n\tvisible: false,\r\n\ttype: 0,\r\n\thead: \"\",\r\n\tcontent: \"\",\r\n\r\n\t// Actions\r\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\r\n\tclose: () => {}\r\n}\r\n\r\nexport const popup = (\r\n\tstate = initialState, \r\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n\taction: any) => {\r\n\tswitch(action.type){\r\n\t\tcase POPUP.SHOW:\r\n\t\t\treturn{\r\n\t\t\t\ttype: action.payload.type,\r\n\t\t\t\tvisible: true,\r\n\t\t\t\thead: action.payload.head,\r\n\t\t\t\tcontent: action.payload.content,\r\n\t\t\t\tclose: action.payload.actions.close,\r\n\t\t\t\tsuccess: action.payload.actions.success\r\n\t\t\t}\r\n\t\tcase POPUP.HIDE:{\r\n\t\t\treturn{\r\n\t\t\t\t...initialState\r\n\t\t\t}\r\n\t\t}\r\n\t\t// case POPUP.SUCCESS: {\r\n\t\t// \treturn {\r\n\r\n\t\t// \t}\r\n\t\t// }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { combineReducers } from 'redux'\r\nimport { app } from \"./app.reducer\"\r\nimport { notification } from \"./notification.reducer\"\r\nimport { popup } from \"./popup.reducer\"\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n\tapp,\r\n\tnotification,\r\n\tpopup\r\n})\r\n \r\nexport default rootReducer","import { createStore, applyMiddleware } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport rootReducer from './reducers'\r\n// import { PayloadAction } from '@reduxjs/toolkit';\r\n\r\n// This middleware will just add the property \"async dispatch\" to all actions\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n// type MiddlewareFunction = (store: Store) => (next: (a: any) => any) => (action: PayloadAction) => any;\r\n\r\n// const asyncDispatchMiddleware: MiddlewareFunction = store => next => action => {\r\n// \tlet syncActivityFinished = false;\r\n// \tlet actionQueue: PayloadAction[] = [];\r\n\r\n// \tfunction flushQueue() {\r\n// \t\tactionQueue.forEach(a => store.dispatch(a)); // flush queue\r\n// \t\tactionQueue = [];\r\n// \t}\r\n\r\n// \tfunction asyncDispatch(asyncAction: PayloadAction) {\r\n// \t\tactionQueue = actionQueue.concat([asyncAction]);\r\n\r\n// \t\tif (syncActivityFinished)\r\n// \t\t\tflushQueue();\r\n// \t}\r\n\r\n// \tconst actionWithAsyncDispatch = Object.assign({}, action, { asyncDispatch });\r\n\r\n// \tconst res = next(actionWithAsyncDispatch);\r\n\r\n// \tsyncActivityFinished = true;\r\n// \tflushQueue();\r\n\r\n// \treturn res;\r\n// };\r\n\r\nconst composeEnhancers = composeWithDevTools({ \r\n\ttrace: true, \r\n\ttraceLimit: 25 \r\n});\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(\r\n\tapplyMiddleware(thunkMiddleware)\r\n))\r\n\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch\r\n\r\nexport default store","import React, { MouseEvent, useRef, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { \r\n\tFaLock,\r\n\tFaLockOpen,\r\n\tFaEllipsisV,\r\n\tFaHeart,\r\n\tFaTimes\r\n} from \"react-icons/fa\"\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport Linkify from 'react-linkify'\r\nimport API from '../../api'\r\nimport { ICard } from '../../domains/entities/card.entity'\r\nimport { IDeck } from '../../domains/entities/deсk.entity'\r\nimport useOutsideClick from '../../hoc/OutsideClicker'\r\n\r\nimport { Notification } from '../Notification'\r\n\r\ntype actionClick = (e: React.FormEvent<HTMLElement>, ...more: any[]) => void\r\n\r\ninterface enableMethodsOptions{\r\n\tenableDelete?: boolean\r\n\tenableEdit?: boolean\r\n\tenableLike?: boolean\r\n\tenableChangePrivate?: boolean\r\n\tenableSubscribe?: boolean\r\n\tenableSave?: boolean\r\n\tenableCreate?: boolean\r\n\tenableClone?: boolean\r\n}\r\n\r\nexport interface IDeckDefault extends IDeck{\r\n\tindex: number\r\n\tenableMethods?: enableMethodsOptions\r\n\t// Actions\r\n\tedit?: actionClick\r\n\tdelete?: actionClick\r\n\tlike?: actionClick\r\n\tchangePrivate?: actionClick\r\n\tsubscribe?: actionClick\r\n\tclone?: actionClick\r\n\twatch?: actionClick\r\n}\r\n\r\n\r\ninterface WatchContainerProps {\r\n\tnameCard: string\r\n\tid: number\r\n\tauthor: string\r\n\tcards: ICard[]\r\n\tvisible: boolean\r\n\tclose: () => void\r\n}\r\n\r\nconst WatchContainer: React.FC<WatchContainerProps> = props => {\r\n\tconst history = useHistory()\r\n\tconst thisRef = useRef<HTMLDivElement>(null)\r\n\tuseOutsideClick(thisRef, () => {\r\n\t\tprops.close()\r\n\t})\r\n\r\n\tif(props.visible) return(\r\n\t\t<div className={`watch_container`}>\r\n\t\t\t<div className=\"watcher\" ref={thisRef}>\r\n\t\t\t\t<div className=\"name_card\">{props.nameCard}</div>\r\n\t\t\t\t<div className=\"author\">by <Link to={`/user/${props.author}`}>{props.author}</Link></div>\r\n\t\t\t\t<div className=\"close\" onClick={() => props.close()}>\r\n\t\t\t\t\t<FaTimes />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"card_item_panel_item_words\">\r\n\t\t\t\t\t<ul className=\"card_item_panel_item_words_ul\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.cards.map((card: ICard, index: number) => {\r\n\t\t\t\t\t\t\t\treturn <li className=\"item\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<span className=\"index\">#{index + 1}. </span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"main_word\">{card.main_word}</span>\r\n\t\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t\t<span className=\"second_word\">{card.answer}</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btn_wrapper\">\r\n\t\t\t\t\t<button className=\"__btn btn_play\" onClick={() => history.push(`/play/${props.id}`)}>play</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t)\r\n\telse return null\r\n}\r\n\r\n\r\nexport const Deck: React.FC<IDeckDefault> = props => {\r\n\r\n\tconst history = useHistory()\r\n\t// Component states\r\n\tconst [dropdownVisible, openDropdown] = useState(false)\r\n\tconst [activedLike, activeLike] = useState(props.activeLike || false)\r\n\tconst [subscribed, changeSubscribed] = useState(props.subscribed || false)\r\n\tconst [watched, changeWatched] = useState(false)\r\n\r\n\t// Data states\r\n\tconst [countLikes, changeCountLikes] = useState(props.countLikes || 0)\r\n\tconst [isPrivate, changePrivate] = useState(props.isPrivate || false)\r\n\r\n\tconst dropdownRef = useRef<HTMLUListElement>(null)\r\n\r\n\tuseOutsideClick(dropdownRef, () => {\r\n\t\tif(dropdownVisible) openDropdown(false)\r\n\t})\r\n\r\n\tconst likeUser = (e: MouseEvent<HTMLSpanElement>) => {\r\n\t\tconsole.log(props.enableMethods)\r\n\t\tif(props.enableMethods?.enableLike){\r\n\t\t\tactiveLike(!activedLike)\r\n\t\t\tactivedLike?\r\n\t\t\t\tchangeCountLikes(countLikes - 1):\r\n\t\t\t\tchangeCountLikes(countLikes + 1)\r\n\t\t\tprops.like?.(e, props.id)\r\n\t\t}\r\n\t\telse{\r\n\t\t\tNotification.warning(\"Warning\", \"Please, sign in\", 3000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChangePrivate = (e: MouseEvent<HTMLSpanElement>) => {\r\n\t\tif(props.author === props.owner){\r\n\t\t\tprops.changePrivate?.(e, props.id, !isPrivate)\r\n\t\t\tchangePrivate(!isPrivate)\r\n\t\t}\r\n\t}\r\n\tconst handleEdit = (e: MouseEvent<HTMLLIElement>) => {\r\n\t\topenDropdown(false)\r\n\t\tprops.edit?.(e, props.index)\r\n\t}\r\n\tconst handleChangeSubscribed = (e: MouseEvent<HTMLButtonElement>) => {\r\n\t\tprops.subscribe !== undefined && props.subscribe(e, props.id)\r\n\t\tAPI.subscribe(props.id)\r\n\t\t\t.then(resp => {\r\n\t\t\t\tconsole.log(resp);\r\n\t\t\t\tNotification.success(\"Готово!\", \"Теперь вы подписаны на эту колоду\")\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t\tchangeSubscribed(!subscribed)\r\n\t}\r\n\r\n\treturn (\r\n\t<div className=\"card_item card_item_noactive\">\r\n\t\t{\r\n\t\t\twatched && ReactDOM.createPortal(\r\n\t\t\t\t<WatchContainer\r\n\t\t\t\t\tid={props.id}\r\n\t\t\t\t\tauthor={props.author || \"\"}\r\n\t\t\t\t\tnameCard={props.name}\r\n\t\t\t\t\tclose={() => changeWatched(false)} \r\n\t\t\t\t\tvisible={watched} \r\n\t\t\t\t\tcards={props.cards}\r\n\t\t\t\t/>,\r\n\t\t\t\tdocument.getElementById(\"root-modals\") || document.body\r\n\t\t\t)\r\n\t\t}\r\n\t\t{/* control items */}\r\n\t\t\t<div className=\"control\">\r\n\t\t\t\t<span className=\"icon\" onClick={() => openDropdown(!dropdownVisible)}><FaEllipsisV/></span>\r\n\t\t\t\t<ul className={`dropdown ${dropdownVisible ? \"active\": \"noactive\"}`} ref={dropdownRef}>\r\n\t\t\t\t\t<li className=\"dropdown_item\" onClick={() => changeWatched(true)}>Watch</li>\r\n\t\t\t\t\t<li className=\"dropdown_item\" onClick={() => history.push(`/play/${props.id}`)}>Play</li>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.enableMethods?.enableEdit && \r\n\t\t\t\t\t\t\t<li className=\"dropdown_item\" onClick={e => handleEdit(e)}>Edit</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.enableMethods?.enableDelete && \r\n\t\t\t\t\t\t<li className=\"dropdown_item\" onClick={e => props.delete?.(e, props.id)}>Delete</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.enableMethods?.enableClone && \r\n\t\t\t\t\t\t\t<li className=\"dropdown_item\" onClick={e => props.clone?.(e, props.id)}>Clone</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t{/* HEAD OF DECK */}\r\n\t\t<p className=\"card_item_head\">\r\n\t\t\t{\r\n\t\t\t\t(props.enableMethods !== undefined && props.enableMethods.enableChangePrivate) &&\r\n\t\t\t\t\t<span \r\n\t\t\t\t\t\tstyle={{cursor: props.author === props.owner ? \"pointer\": \"default\"}}\r\n\t\t\t\t\t\tclassName=\"private_lock\" \r\n\t\t\t\t\t\tonClick={e => handleChangePrivate(e)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isPrivate? <FaLock/>: <FaLockOpen/>}\r\n\t\t\t\t\t</span>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t<span className=\"card_item_head_name\">{props.name}</span>\r\n\t\t\t{\r\n\t\t\t\t// props.author !== props.owner && \r\n\t\t\t\t<Link to={`/user/${props.author}`} className=\"author\">(by {props.author})</Link> \r\n\t\t\t}\r\n\t\t</p>\r\n\r\n\t\t\r\n\t\t<div className=\"middle_layer\">\r\n\t\t\t<div className=\"card_item_head_langs\">\r\n\t\t\t\t<div className=\"lang main_lang\">{props.mainLang}</div>/\r\n\t\t\t\t<div className=\"lang sec_lang\">{props.secondLang}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"info\">\r\n\t\t\t\t<p className=\"info_count_words\">{props.countWords} words</p>\r\n\t\t\t\t<p className=\"info_count_repetitions\">{props.countRepetitions} repetitions</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<p className=\"card_item_description\"><Linkify>{props.description}</Linkify></p>\r\n\r\n\t\t<div className=\"footer\">\r\n\t\t\t{\r\n\t\t\t\tprops.enableMethods?.enableSubscribe ?\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName={`btn btn-${!subscribed? \"primary\": \"danger\"}`} \r\n\t\t\t\t\t\tonClick={e => handleChangeSubscribed(e)}>\r\n\t\t\t\t\t\t\t{subscribed? \"Unsubscribe\": \"Subscribe\"}\r\n\t\t\t\t\t</button>:\r\n\t\t\t\t\t<div></div>\r\n\t\t\t}\r\n\t\t\t<span className=\"likes\" onClick={e => likeUser(e)}>\r\n\t\t\t\t<span className={`heart ${activedLike? \"active\": \"noactive\"}`}><FaHeart/></span>\r\n\t\t\t\t{countLikes}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n  );\r\n}","import React, { useRef, useState } from \"react\"\r\nimport useOutsideClick from \"../hoc/OutsideClicker\"\r\n\r\n\r\ninterface EditTextProps{\r\n\ttext: string\r\n\ttypeInput: \"text\" | \"number\"\r\n\tfocus?: boolean\r\n\r\n\tonChanged: (oldValue: string | number, newValue: string | number) => void\r\n}\r\n\r\nexport const EditText: React.FC<EditTextProps> = props => {\r\n\tconst [text, changeText] = useState(props.text)\r\n\tconst [editing, changeEditing] = useState(props.focus || false)\r\n\tconst editTextRef = useRef<HTMLInputElement>(null)\r\n\tconst editTextInputRef = useRef<HTMLInputElement>(null)\r\n\r\n\r\n\r\n\r\n\tconst handleChangeEditing = (open: boolean, newValue?: string | number) => {\r\n\t\tif(open)\r\n\t\t\tchangeEditing(true)\r\n\t\telse{\r\n\t\t\tchangeEditing(false)\r\n\t\t\tprops.text !== newValue && props.onChanged(props.text, newValue || \"\")\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChangeInput = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tchangeText(e.currentTarget.value)\r\n\t}\r\n\r\n\tconst handlePressKeyInput = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n\t\tif(e.key === \"Enter\"){\r\n\t\t\thandleChangeEditing(false, editTextInputRef.current?.value)\r\n\t\t\tchangeEditing(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseOutsideClick(editTextRef, () => {\r\n\t\tif(editing) {\r\n\t\t\thandleChangeEditing(false, editTextInputRef.current?.value)\r\n\t\t\tchangeEditing(false)\r\n\t\t}\r\n\t})\r\n\r\n\treturn(\r\n\t\t<div className=\"edit_text\" ref={editTextRef}>\r\n\t\t\t{\r\n\t\t\t\tediting ?\r\n\t\t\t\t<input ref={editTextInputRef} type={props.typeInput} value={text} onChange={handleChangeInput} onKeyPress={handlePressKeyInput} autoFocus/>:\r\n\t\t\t\t<span className=\"edit_text_content\" onClick={() => handleChangeEditing(true)}>{text}</span>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}","import React, { MouseEvent, useRef, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { \r\n\tFaTimes,\r\n\tFaLongArrowAltRight,\r\n\tFaArrowsAltH,\r\n\tFaCaretUp\r\n} from \"react-icons/fa\"\r\n\r\nimport { EditText } from '../EditText'\r\nimport { ActionChange } from '../../domains/entities/actions.entity'\r\nimport { ICard } from '../../domains/entities/card.entity'\r\nimport { IDeck } from '../../domains/entities/deсk.entity'\r\nimport useOutsideClick from '../../hoc/OutsideClicker'\r\n\r\nimport { Notification } from '../Notification'\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------------------- Deck ---------------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\ntype actionClick = (e: React.FormEvent<HTMLElement>, ...more: any[]) => void\r\n\r\ninterface enableMethodsOptions{\r\n\tenableDelete?: boolean\r\n\tenableEdit?: boolean\r\n\tenableLike?: boolean\r\n\tenableChangePrivate?: boolean\r\n\tenableSubscribe?: boolean\r\n\tenableSave?: boolean\r\n\tenableCreate?: boolean\r\n\tenableClone?: boolean\r\n}\r\n\r\nexport interface IDeckDefault extends IDeck{\r\n\tindex: number\r\n\tenableMethods?: enableMethodsOptions\r\n\t// Actions\r\n\tedit?: actionClick\r\n\tdelete?: actionClick\r\n\tlike?: actionClick\r\n\tchangePrivate?: actionClick\r\n\tsubscribe?: actionClick\r\n\tclone?: actionClick\r\n\twatch?: actionClick\r\n}\r\n\r\ninterface EditedCardProps extends ICard{\r\n\tvisible: boolean\r\n\tpositionElement: {x: number, y: number}\r\n\r\n\teventOnChangeMainWord?: (value: string) => void\r\n\teventOnChangeSecondWord?: (e: React.FormEvent<HTMLInputElement>) => void\r\n\teventOnChangeDescriptionCard?: (e: React.FormEvent<HTMLTextAreaElement>) => void\r\n\r\n\tclose: (e: React.FormEvent<HTMLElement> | null) => void\r\n\tsave: (changes: ActionChange[], idCard: number) => void\r\n}\r\n\r\n\r\nconst EditedCard: React.FC<EditedCardProps> = props => {\r\n\tconst [mainWordChanged, setMainWordChanged] = useState(false)\r\n\tconst [answerChanged, setAnswerChanged] = useState(false)\r\n\tconst [descriptionChanged, setDescriptionChanged] = useState(false)\r\n\tconst [mainWord, changeMainWord] = useState(props.main_word)\r\n\tconst [answer, changeAnswer] = useState(props.answer)\r\n\tconst [description, changeDescription] = useState(props.description)\r\n\r\n\tconst thisRef = useRef<HTMLDivElement>(null)\r\n\r\n\tconst handleChangeMainWord = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tprops.eventOnChangeMainWord?.(e.currentTarget.value)\r\n\t\tchangeMainWord(e.currentTarget.value)\r\n\t\tsetMainWordChanged(true)\r\n\t}\r\n\r\n\tconst handleChangeAnswer = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tprops.eventOnChangeSecondWord?.(e)\r\n\t\tchangeAnswer(e.currentTarget.value)\r\n\t\tsetAnswerChanged(true)\r\n\t}\r\n\r\n\tconst handleChangeDescription = (e: React.FormEvent<HTMLTextAreaElement>) => {\r\n\t\tprops.eventOnChangeDescriptionCard?.(e)\r\n\t\tchangeDescription(e.currentTarget.value)\r\n\t\tsetDescriptionChanged(true)\r\n\t}\r\n\r\n\tconst handleSaveChanges = () => {\r\n\t\tlet __changes: ActionChange[] = []\r\n\t\tif(mainWordChanged)\r\n\t\t\t__changes  = [...__changes, {\r\n\t\t\t\ttype: \"CHANGE_CARD\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"main_word\",\r\n\t\t\t\t\tid: props.id,\r\n\t\t\t\t\tvalue: mainWord\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\tif(answerChanged)\r\n\t\t\t__changes  = [...__changes, {\r\n\t\t\t\ttype: \"CHANGE_CARD\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"answer\",\r\n\t\t\t\t\tid: props.id,\r\n\t\t\t\t\tvalue: answer\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\tif(descriptionChanged)\r\n\t\t\t__changes  = [...__changes, {\r\n\t\t\t\ttype: \"CHANGE_CARD\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"description\",\r\n\t\t\t\t\tid: props.id,\r\n\t\t\t\t\tvalue: description\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\tconsole.log(__changes);\r\n\t\tprops.save(__changes, props.id)\r\n\t\tprops.close(null)\r\n\t}\r\n\r\n\tuseOutsideClick(thisRef, () => {\r\n\t\tif(props.visible) props.close(null)\r\n\t})\r\n\r\n\treturn (\r\n\t\tReactDOM.createPortal(\r\n\t\t\t<div ref={thisRef} className=\"editedCardWatch\" style={{display: props.visible? \"block\": \"none\", top: props.positionElement.y + 240, left: props.positionElement.x - 20}}>\r\n\t\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t\t<div className=\"beforeTringle\">\r\n\t\t\t\t\t\t<FaCaretUp />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"closeEditedCard\" onClick={e => props.close(e)}>\r\n\t\t\t\t\t\t<FaTimes />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"control-top\">\r\n\t\t\t\t\t\t<input type=\"text\" className=\"__input __input_default\" value={mainWord} onChange={e => handleChangeMainWord(e)}/>\r\n\t\t\t\t\t\t<FaLongArrowAltRight />\r\n\t\t\t\t\t\t<input type=\"text\" className=\"__input __input_default\" value={answer} onChange={e => handleChangeAnswer(e)}/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<textarea name=\"description\" className=\"__input __input_default\" id=\"\" cols={10} rows={2} value={description} onChange={e => handleChangeDescription(e)}></textarea>\r\n\t\t\t\t\t<button className=\"__btn\" onClick={handleSaveChanges}>save</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>,\r\n\t\t\tdocument.getElementById(\"root\") || document.body\r\n\t\t)\r\n\t)\r\n}\r\n\r\n\r\n\r\nexport interface IDeckActive extends IDeckDefault{\r\n\tclose: actionClick\r\n\tsave?: actionClick\r\n\tcreate?: actionClick\r\n}\r\n\r\n\r\nexport const DeckActive: React.FC<IDeckActive> = props => {\r\n\tconst [cards, changeCards] = useState(props.cards)\r\n\tconst [countCards, incCountCards] = useState(props.countWords)\r\n\tconst [changes, addChange] = useState([] as ActionChange[])\r\n\tconst [name, changeName] = useState(props.name)\r\n\tconst [mainWordValue, changeMainWordValue] = useState(\"\")\r\n\tconst [secondWordValue, changeSecondWordValue] = useState(\"\")\r\n\tconst [descriptionCard, changeDescriptionCard] = useState(\"\")\r\n\tconst [indexCard, changeIndexCard] = useState(1)\r\n\r\n\tconsole.log(changes);\r\n\t// Edited card menu\r\n\tconst [currentCardOpened, changeCurrentCardOpened] = useState(cards[0])\r\n\tconst [visibleCardWatch, changeVisibleCardWatch] = useState(false)\r\n\tconst [positionCard, changePositionCard] = useState({x: 0, y: 0})\r\n\r\n\tconst [mainLang, changeMainLang] = useState(\"ENG\")\r\n\tconst [secondLang, changeSecondLang] = useState(\"RU\")\r\n\t// const [isPrivate, changeName] = useState(props.name || \"Deck name\")\r\n\r\n\tconst mainWordRef = useRef<HTMLInputElement>(null)\r\n\tconst secondWordRef = useRef<HTMLInputElement>(null)\r\n\tconst descriptionDeckRef = useRef<HTMLTextAreaElement>(null)\r\n\tconst descriptionCardRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst LANGS = [\r\n\t\t\"RUS\",\r\n\t\t\"ENG\",\r\n\t\t\"JPN\",\r\n\t\t\"CHI\",\r\n\t\t\"ITA\",\r\n\t\t\"SPA\",\r\n\t\t\"FRA\",\r\n\t\t\"GER\"\r\n\t]\r\n\r\n\r\n\tconst handleChangeName = (newValue: string) => {\r\n\t\tchangeName(newValue)\r\n\t\tconst payloadChangeName = {\r\n\t\t\tname: \"name\",\r\n\t\t\tvalue: newValue\r\n\t\t}\r\n\t\taddChange(oldChanges => {\r\n\t\t\treturn [...oldChanges, {\r\n\t\t\t\ttype: \"CHANGE_DECK\",\r\n\t\t\t\tpayload: payloadChangeName\r\n\t\t\t}]\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleAddCard = () => {\r\n\t\tconst newCard: ICard = {\r\n\t\t\tid: (cards[cards.length - 1] || {id: -1}).id + 1,\r\n\t\t\tmain_word: mainWordValue,\r\n\t\t\tanswer: secondWordValue,\r\n\t\t\ttype: \"default\",\r\n\t\t\tdescription: descriptionCard\r\n\t\t}\r\n\t\tchangeCards(oldCards => [...oldCards, newCard])\r\n\t\tincCountCards(countCardsOld => countCardsOld + 1)\r\n\t\taddChange(oldChanges => {\r\n\t\t\treturn [...oldChanges, {\r\n\t\t\t\ttype: \"NEW_CARD\",\r\n\t\t\t\tpayload: newCard\r\n\t\t\t}]\r\n\t\t})\r\n\r\n\t\tchangeMainWordValue(\"\")\r\n\t\tchangeSecondWordValue(\"\")\r\n\t\tchangeDescriptionCard(\"\")\r\n\t\tchangeIndexCard(indexCard + 1)\r\n\t\t// mainWordRef.current?.value = \"\"\r\n\t}\r\n\r\n\tconst handleChangeMainWord__press = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n\t\tif(e.key === \"Enter\")\r\n\t\t\thandleAddCard()\r\n\t}\r\n\t\r\n\tconst handleChangeSecondWord__press = (e: React.KeyboardEvent<HTMLInputElement>) => { if(e.key === \"Enter\")handleAddCard() }\r\n\r\n\tconst handleChangeDescriptionCard__press = (e: React.KeyboardEvent<HTMLTextAreaElement>) => { if(e.key === \"Enter\") handleAddCard() }\r\n\r\n\tconst handleChangeMainWord = (e: React.FormEvent<HTMLInputElement>) => { changeMainWordValue(e.currentTarget.value) }\r\n\t\r\n\tconst handleChangeSecondWord = (e: React.FormEvent<HTMLInputElement>) => { changeSecondWordValue(e.currentTarget.value) }\r\n\r\n\tconst handleChangeDescriptionCard = (e: React.FormEvent<HTMLTextAreaElement>) => { changeDescriptionCard(e.currentTarget.value) }\r\n\r\n\tconst handleChangeMainLang = (e: React.FormEvent<HTMLSelectElement>) => { changeMainLang(e.currentTarget.value) }\r\n\r\n\tconst handleChangeSecondLang = (e: React.FormEvent<HTMLSelectElement>) => { changeSecondLang(e.currentTarget.value) }\r\n\r\n\tconst handleChangeMainWordInConsistCard = (value: string, id: number) => {\r\n\t\tchangeCards((oldCards) => {\r\n\t\t\tconst __cards = oldCards.map(item => {\r\n\t\t\t\tif(item.id === id)\r\n\t\t\t\t\titem.main_word = value\r\n\t\t\t\treturn item\r\n\t\t\t})\r\n\t\t\tconsole.log(oldCards, value, id);\r\n\t\t\treturn __cards\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleSwapLangs = () => {\r\n\t\tconst __mainLang = mainLang\r\n\t\tchangeMainLang(secondLang)\r\n\t\tchangeSecondLang(__mainLang)\r\n\t}\r\n\r\n\t// For creating\r\n\tconst handleCreateDeck = (e: MouseEvent<HTMLButtonElement>) => {\r\n\t\tconst dataNewDeck: Partial<IDeck & {description: string, price: number}> = {\r\n\t\t\tname,\r\n\t\t\tisPrivate: false,\r\n\t\t\tdescription: descriptionDeckRef.current?.value,\r\n\t\t\tmainLang: mainLang,\r\n\t\t\tsecondLang: secondLang,\r\n\t\t\tprice: 0,\r\n\t\t\tcards: cards\r\n\t\t}\r\n\t\tcards.length !== 0 ? \r\n\t\t\tprops.create?.(e, dataNewDeck):\r\n\t\t\tNotification.warning(\"Предупреждение!\", \"Вы не добавили ни одной карточки!\", 2500)\r\n\t}\r\n\r\n\tconst handleDeleteCard = (e: MouseEvent<HTMLDivElement>, index: number) => {\r\n\t\te.stopPropagation()\r\n\t\tchangeVisibleCardWatch(false)\r\n\t\tchangeCards(oldCards => oldCards.filter((_, _index: number) => _index !== index))\r\n\t\taddChange(changes => [...changes, {\r\n\t\t\ttype: \"DELETE_CARD\",\r\n\t\t\tpayload: {\r\n\t\t\t\tid: cards[index].id\r\n\t\t\t}\r\n\t\t}])\r\n\t}\r\n\t\r\n\tconst handleOpenCardForWatch = (e: MouseEvent<HTMLLIElement>, index: number) => {\r\n\t\tchangePositionCard({x: e.currentTarget.offsetLeft, y: e.currentTarget.offsetTop})\r\n\t\tchangeCurrentCardOpened(cards[index])\r\n\t\tchangeVisibleCardWatch(true)\r\n\t}\r\n\r\n\tconst handleChangeCard = (changesCard: ActionChange[]) => {\r\n\t\tconsole.log(changesCard);\r\n\t\taddChange((old) => [...old, ...changesCard])\r\n\t} \r\n\t// -----------------------------------------------------------------------------\r\n\t// ---------------------------- Export JSON -----------------------------------\r\n\t// -----------------------------------------------------------------------------\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst handleExportFileAsJSON = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tconst files = e.currentTarget.files || []\r\n\t\tconst file = files[0]\r\n\t\tconst reader = new FileReader()\r\n\r\n\t\treader.onload = function() {\r\n\t\t\tconst data = JSON.parse(reader.result as string)\r\n\t\t\tuploadJSONToCards(data.decks)\r\n\t\t}\r\n\r\n\t\treader.readAsText(file);\r\n\t}\r\n\r\n\tconst uploadJSONToCards = (cards: ICard[]) => {\r\n\t\tcards.map((card, index) => {\r\n\t\t\tif(index >= 20 && index < 40){\r\n\t\t\t\tconst newCard: ICard = {\r\n\t\t\t\t\tid: card.id,\r\n\t\t\t\t\tmain_word: card.main_word,\r\n\t\t\t\t\tanswer: card.answer,\r\n\t\t\t\t\ttype: \"default\",\r\n\t\t\t\t\tdescription: \"\"\r\n\t\t\t\t}\r\n\t\t\t\tchangeCards(oldCards => [...oldCards, newCard])\r\n\t\t\t\tincCountCards(countCardsOld => countCardsOld + 1)\r\n\t\t\t\taddChange(oldChanges => {\r\n\t\t\t\t\treturn [...oldChanges, {\r\n\t\t\t\t\t\ttype: \"NEW_CARD\",\r\n\t\t\t\t\t\tpayload: newCard\r\n\t\t\t\t\t}]\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n\t\r\n\r\n\treturn (\r\n\t\t<div className=\"card_item card_item_active\">\r\n\t\t\t<div className=\"close\" onClick={props.close}>\r\n\t\t\t\t<FaTimes />\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t<p className=\"card_item_name\">\r\n\t\t\t\t<EditText text={name} typeInput=\"text\" focus onChanged={(old, _new) => handleChangeName(_new as string)}/>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"top-panel\">\r\n\t\t\t\t<div className=\"select_languages\">\r\n\t\t\t\t\t<select onChange={handleChangeMainLang} className=\"form-select\" aria-label=\"Default select example\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tLANGS.map((lang, index) => {\r\n\t\t\t\t\t\t\t\treturn <option key={index} selected={lang === mainLang}>{lang}</option>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</select>\r\n\r\n\r\n\t\t\t\t\t<span className=\"card_item_panel_toggler\" onClick={handleSwapLangs}><FaArrowsAltH /></span>\r\n\r\n\t\t\t\t\t<select onChange={handleChangeSecondLang} className=\"form-select\" aria-label=\"Default select example\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tLANGS.map((lang, index) => {\r\n\t\t\t\t\t\t\t\treturn <option key={index} selected={lang === secondLang}>{lang}</option>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t{/* <input type=\"file\" onChange={handleExportFileAsJSON}/> */}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* PLUG for jcsb */}\r\n\t\t\t\t<div></div>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t<div className=\"info\">\r\n\t\t\t\t<span className=\"card_item_count_words\">{countCards} words</span>\r\n\t\t\t\t<p className=\"card_item_count_repetitions\">{props.countRepetitions} repetitions</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"description_deck__wrapper\">\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tdefaultValue={props.description || \"\"} \r\n\t\t\t\t\tref={descriptionDeckRef} \r\n\t\t\t\t\tplaceholder=\"Type description deck\" \r\n\t\t\t\t\tname=\"\" \r\n\t\t\t\t\tid=\"\" \r\n\t\t\t\t\tcols={60} \r\n\t\t\t\t\trows={10}>\r\n\t\t\t\t</textarea>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t<div className=\"card_item_panel_adding__wrapper\">\r\n\t\t\t\t<div className=\"card_item_panel_adding\">\r\n\t\t\t\t\t<span className=\"index_card\">\r\n\t\t\t\t\t\t#{indexCard}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div className=\"main-answer-words\">\r\n\t\t\t\t\t\t<div className=\"input-wrapper form-floating\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tonKeyPress={handleChangeMainWord__press} \r\n\t\t\t\t\t\t\t\tonChange={handleChangeMainWord}\r\n\t\t\t\t\t\t\t\tvalue={mainWordValue} \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"type word...\" \r\n\t\t\t\t\t\t\t\tref={mainWordRef}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Main word on {mainLang}</label>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<span className=\"card_item_panel_toggler\" onClick={handleSwapLangs}><FaLongArrowAltRight /></span>\r\n\r\n\t\t\t\t\t\t<div className=\"input-wrapper form-floating\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tonKeyPress={handleChangeSecondWord__press} \r\n\t\t\t\t\t\t\t\tonChange={handleChangeSecondWord} \r\n\t\t\t\t\t\t\t\tvalue={secondWordValue} \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"type word...\" \r\n\t\t\t\t\t\t\t\tref={secondWordRef}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Second word {secondLang}</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"control_bottom__wrapper\">\r\n\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\tref={descriptionCardRef} \r\n\t\t\t\t\t\t\tvalue={descriptionCard} \r\n\t\t\t\t\t\t\tonKeyPress={handleChangeDescriptionCard__press} \r\n\t\t\t\t\t\t\tonChange={handleChangeDescriptionCard} \r\n\t\t\t\t\t\t\tplaceholder=\"Type description\" \r\n\t\t\t\t\t\t\tname=\"\" \r\n\t\t\t\t\t\t\tid=\"\" \r\n\t\t\t\t\t\t\tcols={60} \r\n\t\t\t\t\t\t\trows={10}>\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t\t<button  className=\"card_item_panel_button_add\" onClick={handleAddCard}>add</button>\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\tvisibleCardWatch && <EditedCard \r\n\t\t\t\t\tvisible={visibleCardWatch}\r\n\t\t\t\t\tid={currentCardOpened?.id}\r\n\t\t\t\t\tmain_word={currentCardOpened?.main_word}\r\n\t\t\t\t\tanswer={currentCardOpened?.answer}\r\n\t\t\t\t\tdescription={currentCardOpened?.description}\r\n\t\t\t\t\ttype=\"default\"\r\n\t\t\t\t\tpositionElement={positionCard}\r\n\r\n\t\t\t\t\teventOnChangeMainWord={e => handleChangeMainWordInConsistCard(e, currentCardOpened?.id)}\r\n\r\n\t\t\t\t\tclose={() => changeVisibleCardWatch(false)}\r\n\t\t\t\t\tsave={handleChangeCard}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"card_item_panel_item_words\">\r\n\t\t\t\t<ul className=\"card_item_panel_item_words_ul\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcards.map((card: ICard, index: number) => {\r\n\t\t\t\t\t\t\treturn <li key={index} className=\"item\" onClick={e => handleOpenCardForWatch(e, index)}>\r\n\t\t\t\t\t\t\t\t<span className=\"index\">#{index + 1}. </span>\r\n\t\t\t\t\t\t\t\t<span className=\"main_word\">{card.main_word}</span>\r\n\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t<span className=\"second_word\">{card.answer}</span>\r\n\t\t\t\t\t\t\t\t<div className=\"close_deck\" onClick={e => handleDeleteCard(e, index)}><FaTimes/></div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t\r\n\r\n\r\n\t\t\t<div className=\"buttons_group\">\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.enableMethods?.enableCreate && \r\n\t\t\t\t\t<button className=\"__btn __button-default button-create\" onClick={handleCreateDeck}>create</button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.enableMethods?.enableSave && \r\n\t\t\t\t\t\t<button className=\"__btn __button-default button-save mr-5\" onClick={e => props.save?.(e, props.id, changes)}>save</button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.enableMethods?.enableDelete &&\r\n\t\t\t\t\t\t<button className=\"__btn __button-default button-delete\" onClick={e => props.delete?.(e, props.id)}>delete</button>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\nimport { \r\n\tFaPlus\r\n} from \"react-icons/fa\"\r\n\r\ntype actionClick = (e: React.FormEvent<HTMLElement>, ...more: any[]) => void\r\n\r\n\r\ninterface IDeckAdd{\r\n\tadd: actionClick\r\n}\r\n\r\nexport const DeckAdd: React.FC<IDeckAdd> = props => {\r\n\treturn(\r\n\t\t<div className=\"card_item card_item_noactive new_card\">\r\n\t\t\t<div className=\"svg_wrapper\" onClick={e => props.add(e)}>\r\n\t\t\t\t<FaPlus />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react';\r\n\r\nimport \"../styles/components.scss\"\r\n\r\n\r\ninterface IProps{\r\n\tinfo: Record<string, string | number>\r\n}\r\n\r\n\r\nconst Currsection: React.FC<IProps> = ({info}) => {\r\n  return (\r\n\t<section className=\"lesson_section lesson_info\">\r\n\t\t\t{\r\n\t\t\t\tObject.keys(info).map((key: string, index: number) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<p className=\"lesson_info_item\" key={index}>\r\n\t\t\t\t\t\t\t<span className=\"lesson_info_item_key\">\r\n\t\t\t\t\t\t\t\t{key}:\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className=\"lesson_info_item_value\">\r\n\t\t\t\t\t\t\t\t{Object.values(info)[index]}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t</section>\r\n  );\r\n}\r\n\r\nexport default Currsection;\r\n","import Header from \"./Header\"\r\nimport { Deck } from \"./Deck\"\r\nimport Currsection from \"./Currsection\"\r\nimport Notification from \"./Notification\"\r\n\r\nconst Components = {\r\n\tHeader,\r\n\tDeck,\r\n\tCurrsection,\r\n\tNotification\r\n}\r\n\r\nconst loader = document.querySelector('.loader__wrapper') || document.body;\r\n\r\n// if you want to show the loader when React loads data again\r\nexport const showLoader = () => {\r\n\tloader.classList.remove('loader__wrapper--hide')\r\n\t// document.body.style.overflowY = \"hidden\"\r\n};\r\n\r\nexport const hideLoader = () => {\r\n\tloader.classList.add('loader__wrapper--hide')\r\n\t// document.body.style.overflowY = \"scroll\"\r\n}\r\n\r\n\r\nexport default Components","interface PropsConfirm{\r\n\tsuccess: (successed: boolean) => void\r\n}\r\n\r\nconst Confirm = (props: PropsConfirm) => {\r\n\treturn(\r\n\t\t<div className=\"Popup_confirm\">\r\n\t\t\t{/* ...omit from parent container */}\r\n\t\t\t<button className=\"btn btn-danger\" onClick={() => props.success(false)}>Cancel</button>\r\n\t\t\t<button className=\"btn btn-primary\" onClick={() => props.success(true)}>Accept</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Confirm","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { FaTimes } from \"react-icons/fa\"\r\nimport { connect, ConnectedProps } from \"react-redux\"\r\nimport { Dispatch } from \"redux\"\r\nimport Actions from \"../../redux/actions\"\r\nimport store from \"../../redux/store\"\r\nimport { POPUP_TYPES } from \"../../redux/types\"\r\n\r\n// MODALS\r\nimport Confirm from \"./Confirm\"\r\n\r\n\r\ninterface StatePopup{\r\n\tvisible: boolean\r\n}\r\n// const mapStateToProps = (state: any) => ({\r\n// \tpopupProps: state.popup\r\n// })\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\thide: () => f(Actions.popup.hide())\r\n})\r\n\r\nconst connector = connect(null, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ninterface PropsPopup extends PropsFromRedux{\r\n\tvisible: boolean\r\n\ttype: POPUP_TYPES\r\n\thead: string\r\n\tcontent: string\r\n\r\n\t// actions\r\n\tclose: () => void\r\n\tsuccess?: (successed: boolean) => void\r\n}\r\n\r\nclass ModalContainer extends React.PureComponent<PropsPopup, StatePopup>{\r\n\tconstructor(props: PropsPopup){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tvisible: this.props.visible || false\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t// Methods callback\r\n\tclose(){\r\n\t\tthis.props.hide()\r\n\t\tthis.props.close()\r\n\t}\r\n\r\n\tsuccess(successed: boolean){\r\n\t\tthis.props.success?.(successed)\r\n\t\tthis.props.hide()\r\n\t\tthis.props.close()\r\n\t}\r\n\r\n\tswitchModals(type: POPUP_TYPES){\r\n\t\tswitch(type){\r\n\t\t\tcase POPUP_TYPES.CONFIRM:\r\n\t\t\t\treturn <Confirm success={this.success.bind(this)}/>\r\n\t\t\tdefault:\r\n\t\t\t\treturn <></>\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\tReactDOM.createPortal(\r\n\t\t\t\t<div className={`Popup__wrapper ${this.props.visible? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t<div className=\"Popup\">\r\n\t\t\t\t\t\t<div className=\"control_top\">\r\n\t\t\t\t\t\t\t<span className=\"close_button\" onClick={this.close.bind(this)}>\r\n\t\t\t\t\t\t\t\t<FaTimes />\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"head\">\r\n\t\t\t\t\t\t\t<span>{this.props.head}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<span>{this.props.content}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"control_botton\">\r\n\t\t\t\t\t\t\t{this.switchModals(this.props.type)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t,\r\n\t\t\t\tdocument.getElementById(\"root-modals\") || document.body\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const Modal = {\r\n\tconfirm: (head: string, content: string, close: () => void, success: (s: boolean) => void) =>\r\n\t\tstore.dispatch(Actions.popup.show(POPUP_TYPES.CONFIRM, head, content, {close, success}))\r\n}\r\n\r\n\r\nexport default connector(ModalContainer)","import React from \"react\"\r\nimport { FaChevronLeft, FaChevronRight } from \"react-icons/fa\"\r\nimport ReactPaginate from \"react-paginate\"\r\n\r\ninterface PaginationProps{\r\n\t// values props\r\n\tcountPages: number\r\n\r\n\t// action props\r\n\tchangeCountPages: () => void\r\n\tchangeCurrentPage: (selectedItem: { selected: number }) => void\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = props => {\r\n\treturn (\r\n\t\t<div className=\"pagination\">\r\n\t\t\t<ReactPaginate\r\n\t\t\t\tpreviousLabel={<FaChevronLeft />}\r\n\t\t\t\tnextLabel={<FaChevronRight />}\r\n\t\t\t\tbreakLabel={'...'}\r\n\t\t\t\tbreakClassName={'break-me'}\r\n\t\t\t\tpageCount={props.countPages}\r\n\t\t\t\tmarginPagesDisplayed={2}\r\n\t\t\t\tpageRangeDisplayed={5}\r\n\t\t\t\tonPageChange={props.changeCurrentPage}\r\n\t\t\t\tcontainerClassName={'pagination_pages_buttons'}\r\n\t\t\t\tactiveClassName={'active'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Pagination","import React from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\n\r\nimport API from \"../api\"\r\nimport { showLoader, hideLoader } from \"../components\"\r\n\r\n\r\n// Components and redux instances\r\nimport {\r\n\tDeck, \r\n\tDeckActive, \r\n\tDeckAdd,\r\n\tIDeckDefault\r\n} from \"../components/Deck/index\"\r\nimport { Notification } from '../components/Notification';\r\nimport { Modal } from '../components/modals';\r\n\r\nimport { ActionChange } from '../domains/entities/actions.entity';\r\n\r\n// App styles\r\nimport \"../styles/pages/Decks.scss\"\r\nimport { RootState } from '../redux/store';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport Pagination from '../components/Pagination';\r\n\r\ninterface IDecksProps extends WithTranslation{\r\n\tinit?: boolean\r\n\ttextHello?: string\r\n}\r\n\r\ninterface StateDecks{\r\n\tdecksSubscriptions: IDeckDefault[]\r\n\tdecksOwned: IDeckDefault[]\r\n\tisNewDeck: boolean\r\n\tisEdit: boolean\r\n\tdeckEdit: IDeckDefault | null\r\n\r\n\t// for pagination\r\n\tcountOwnedPages: number\r\n\tcountSubsPages: number\r\n\tcurrentOwnedPage: number\r\n\tcurrentSubsPage: number\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tuser: state.app.user\r\n})\r\nconst connector = connect(mapStateToProps)\r\n\r\ntype PropsFromRedux = IDecksProps & ConnectedProps<typeof connector>\r\n\r\n\r\nclass Decks extends React.Component<PropsFromRedux, StateDecks>{\r\n\tpublic state: StateDecks = {\r\n\t\tdecksSubscriptions: [],\r\n\t\tdecksOwned: [],\r\n\r\n\t\tisNewDeck: false,\r\n\t\tisEdit: false,\r\n\t\tdeckEdit: null,\r\n\t\tcountOwnedPages: 1,\r\n\t\tcountSubsPages: 1,\r\n\t\tcurrentOwnedPage: 1,\r\n\t\tcurrentSubsPage: 1,\r\n\t}\r\n\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t\tshowLoader()\r\n\t}\r\n\r\n\taddDeck(){\r\n\t\tthis.setState({\r\n\t\t\tisNewDeck: true\r\n\t\t})\r\n\t}\r\n\r\n\tsaveDeck(_e: React.FormEvent<HTMLElement>, id: number, changes: ActionChange[]){\r\n\t\tAPI.applyChanges(id, changes)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t\tthis.setState({ isEdit: false })\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\teditDeck(_e: React.FormEvent<HTMLElement>, index: number){\r\n\t\tconsole.log(\"edit\", index);\r\n\t\tthis.setState({\r\n\t\t\tisEdit: true,\r\n\t\t\tdeckEdit: this.state.decksOwned[index]\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteDeck(_e: React.FormEvent<HTMLElement>, id: number){\r\n\t\tModal.confirm(\r\n\t\t\t\"Вы действительно хотите удалить дек?\", \r\n\t\t\t\"Если вы удалите дек, все карточки тоже удалятся, вы уверены, что хотите это сделать?\",\r\n\t\t\t() => console.log(),\r\n\t\t\t(accept) => {\r\n\t\t\t\tif(accept){\r\n\t\t\t\t\tAPI.deleteDeck(id)\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\tif(!response.data.error){\r\n\t\t\t\t\t\t\t\tthis.setState({ decksOwned: this.state.decksOwned.filter(deck => deck.id !== id) })\r\n\t\t\t\t\t\t\t\tNotification.success(\"OK\", \"Дек успешно удален\", 3000)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tNotification.error(\"Ошбика\", \"Дек не успешно удален\", 3000)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t// Notification.success(\"Hello!\", \"Content\", 3000)\r\n\t}\r\n\r\n\tlike(_e: unknown, id: number){\r\n\t\tAPI.setLike(id)\r\n\t\t\t.then(res => console.log(res))\r\n\t\t\t.catch(err => console.log(err))\r\n\t\tconsole.log(\"like\", id);\r\n\t}\r\n\r\n\tchangePrivate(_e: unknown, id: number, valuePrivate: boolean){\r\n\t\tAPI.applyChanges(id, [\r\n\t\t\t{\r\n\t\t\t\ttype: \"CHANGE_DECK\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"isPrivate\",\r\n\t\t\t\t\tvalue: Number(valuePrivate)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t])\r\n\t\t\t.then(resp => console.log(resp))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\tcreateNewDeck(_e: unknown, data: any){\r\n\t\tAPI.addDeck(data)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t\tthis.setState({ isNewDeck: false, decksOwned: [...this.state.decksOwned, {...data}] })\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\thandleUnsibscribe(_e: React.FormEvent<HTMLElement>, id: number){\r\n\t\tthis.setState({ decksSubscriptions: this.state.decksSubscriptions.filter(deck => deck.id !== id) })\r\n\t}\r\n\r\n\thandleCloseActiveAddingDeck(){\r\n\t\tthis.setState({ isNewDeck: false })\r\n\t}\r\n\r\n\thandleCloseActiveEditingDeck(){\r\n\t\tthis.setState({ isEdit: false })\r\n\t}\r\n\r\n\thandleChangeCurrentOwnedPage(choosen: { selected: number }){\r\n\t\tthis.setState({ currentOwnedPage: choosen.selected + 1 })\r\n\t\tthis.updateDecks( choosen.selected + 1, this.state.currentSubsPage )\r\n\t}\r\n\r\n\thandleChangeCurrentSubsPage(choosen: { selected: number }){\r\n\t\tthis.setState({ currentSubsPage: choosen.selected + 1 })\r\n\t\tthis.updateDecks( this.state.currentOwnedPage, choosen.selected + 1 )\r\n\t}\r\n\r\n\tupdateDecks(ownedPage: number, subsPage: number){\r\n\t\t// if(this.state.decksOwned.length === 0){\r\n\t\t\tAPI.getDecks(ownedPage, subsPage)\r\n\t\t\t\t// .then(data => console.log(data))\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t!data.error && \r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdecksSubscriptions: data.data.subscriptions,\r\n\t\t\t\t\t\tdecksOwned: data.data.owned,\r\n\t\t\t\t\t\tcountOwnedPages: data.data.owned_pages,\r\n\t\t\t\t\t\tcountSubsPages: data.data.subscription_pages,\r\n\t\t\t\t\t})\r\n\t\t\t\t\thideLoader()\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => Notification.error(\"Error\", \"Failed to load data\", 3000))\r\n\t\t// }\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconsole.log(this.state.decksOwned);\r\n\t\tthis.updateDecks(this.state.currentOwnedPage, this.state.currentSubsPage)\r\n\t}\r\n\r\n\trender(){\r\n\r\n\t\treturn(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<section className=\"lesson_section\">\r\n\t\t\t\t\t<h2 className=\"cards_main_name\">{this.props.t`Pages.Decks.MyDecks`}</h2>\r\n\t\t\t\t\t<div className=\"cards\">\r\n\t\t\t\t\t\t{/* deck for EDIT */}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.isEdit && <DeckActive\r\n\r\n\t\t\t\t\t\t\t\tindex={-1}\r\n\t\t\t\t\t\t\t\tid={this.state.deckEdit?.id || -1}\r\n\t\t\t\t\t\t\t\tname={this.state.deckEdit?.name || \"NONAME\"} \r\n\t\t\t\t\t\t\t\tcountWords={this.state.deckEdit?.countWords || 0} \r\n\t\t\t\t\t\t\t\tcountRepetitions={this.state.deckEdit?.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\tisPrivate={this.state.deckEdit?.isPrivate} \r\n\t\t\t\t\t\t\t\tmainLang={this.state.deckEdit?.mainLang || \"NL\"} \r\n\t\t\t\t\t\t\t\tsecondLang={this.state.deckEdit?.secondLang || \"NL\"} \r\n\t\t\t\t\t\t\t\tcards={this.state.deckEdit?.cards || []}\r\n\t\t\t\t\t\t\t\tauthor={this.state.deckEdit?.author}\r\n\t\t\t\t\t\t\t\towner={this.state.deckEdit?.owner}\r\n\t\t\t\t\t\t\t\tdescription={this.state.deckEdit?.description || \"no description\"}\r\n\t\t\t\t\t\t\t\tcountLikes={this.state.deckEdit?.countLikes || 0}\r\n\t\t\t\t\t\t\t\tactiveLike={this.state.deckEdit?.activeLike || false}\r\n\r\n\t\t\t\t\t\t\t\tenableMethods={{\r\n\t\t\t\t\t\t\t\t\tenableSave: true,\r\n\t\t\t\t\t\t\t\t\tenableDelete: true\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclose={this.handleCloseActiveEditingDeck.bind(this)}\r\n\t\t\t\t\t\t\t\tsave={this.saveDeck.bind(this)}\r\n\t\t\t\t\t\t\t\tdelete={this.deleteDeck.bind(this)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{/* New Deck */}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.isNewDeck && <DeckActive\r\n\t\t\t\t\t\t\t\tindex={-1}\r\n\t\t\t\t\t\t\t\tid={-1}\r\n\t\t\t\t\t\t\t\tname={\"New Deck\"} \r\n\t\t\t\t\t\t\t\tcountWords={0} \r\n\t\t\t\t\t\t\t\tcountRepetitions={0} \r\n\t\t\t\t\t\t\t\tisPrivate={false} \r\n\t\t\t\t\t\t\t\tmainLang={\"RU\"} \r\n\t\t\t\t\t\t\t\tsecondLang={\"ENG\"} \r\n\t\t\t\t\t\t\t\tcards={[]}\r\n\t\t\t\t\t\t\t\tauthor={this.props.user.login}\r\n\t\t\t\t\t\t\t\towner={this.props.user.login}\r\n\t\t\t\t\t\t\t\tdescription={\"\"}\r\n\t\t\t\t\t\t\t\tcountLikes={0}\r\n\t\t\t\t\t\t\t\tactiveLike={false}\r\n\r\n\t\t\t\t\t\t\t\tenableMethods={{\r\n\t\t\t\t\t\t\t\t\tenableCreate: true\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclose={this.handleCloseActiveAddingDeck.bind(this)}\r\n\t\t\t\t\t\t\t\tcreate={this.createNewDeck.bind(this)}\r\n\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{/* Adding deck */}\r\n\t\t\t\t\t\t<DeckAdd add={this.addDeck.bind(this)} />\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.decksOwned.length !== 0 && this.state.decksOwned.map((deck: IDeckDefault, index: number) => {\r\n\t\t\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\r\n\t\t\t\t\t\t\t\t\t// enables\r\n\t\t\t\t\t\t\t\t\tenableMethods={{ \r\n\t\t\t\t\t\t\t\t\t\tenableChangePrivate: true, \r\n\t\t\t\t\t\t\t\t\t\tenableDelete: true, \r\n\t\t\t\t\t\t\t\t\t\tenableEdit:true,\r\n\t\t\t\t\t\t\t\t\t\tenableLike: true\r\n\t\t\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\t\t\t// active methods\r\n\t\t\t\t\t\t\t\t\tedit={this.editDeck.bind(this)}\r\n\t\t\t\t\t\t\t\t\tdelete={this.deleteDeck.bind(this)}\r\n\t\t\t\t\t\t\t\t\tlike={this.like}\r\n\t\t\t\t\t\t\t\t\tchangePrivate={this.changePrivate.bind(this)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\tcountPages={this.state.countOwnedPages}\r\n\t\t\t\t\t\tchangeCountPages={() => console.log()}\r\n\t\t\t\t\t\tchangeCurrentPage={choosen => this.handleChangeCurrentOwnedPage(choosen)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className={`lesson_section ${this.state.decksSubscriptions.length === 0? \"noactive\": \"active\"}`}>\r\n\t\t\t\t\t<h2 className=\"cards_main_name\">{this.props.t`Pages.Decks.MySubsDecks`}</h2>\r\n\t\t\t\t\t<div className=\"cards\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.decksSubscriptions.length !== 0 && \r\n\t\t\t\t\t\t\t\tthis.state.decksSubscriptions.map((deck: IDeckDefault, index: number) => {\r\n\t\t\t\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\t\t\t\t\t\t\t\t\t\tsubscribed={deck.subscribed}\r\n\t\t\t\t\t\t\t\t\t\tsubscribe={this.handleUnsibscribe.bind(this)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// enables\r\n\t\t\t\t\t\t\t\t\t\tenableMethods={{ \r\n\t\t\t\t\t\t\t\t\t\t\tenableLike: true,\r\n\t\t\t\t\t\t\t\t\t\t\tenableSubscribe: true\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// active methods\r\n\t\t\t\t\t\t\t\t\t\tlike={this.like}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\tcountPages={this.state.countSubsPages}\r\n\t\t\t\t\t\tchangeCountPages={() => console.log()}\r\n\t\t\t\t\t\tchangeCurrentPage={choosen => this.handleChangeCurrentSubsPage(choosen)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withTranslation()(connector(Decks))\r\n","import React from 'react';\r\n\r\n// Components\r\n\r\n// App styles\r\nimport \"../styles/reset.scss\"\r\nimport '../styles/main.scss';\r\n\r\ninterface HomeProps{\r\n\tsayHello?: string \r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst Home: React.FC<HomeProps> = (props: HomeProps) => {\r\n\treturn (\r\n\t\t<div className=\"home\">\r\n\t\t\t{/* <Currsection info={{Hello: 20, \"dflmdf fdf\": \"310/31\"}} />\r\n\t\t\t<Card currentWord={3} countWords={10} word=\"Spring\" hint=\"Весна\" /> */}\r\n\t\t\t<p style={{color: \"white\"}}>Home, sweet home</p> \r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Home;\r\n","import React, { createRef, MouseEvent, SyntheticEvent } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { RouteComponentProps } from 'react-router-dom'\r\n\r\nimport Action from \"../redux/actions\"\r\nimport API from \"../api\"\r\nimport { Notification } from '../components/Notification';\r\n\r\n// Styles\r\nimport \"../styles/forms.scss\"\r\nimport { Dispatch } from 'redux';\r\nimport { RootState } from '../redux/store';\r\nimport { User } from '../domains/entities/user.entity';\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: User) => f(Action.app.login(user))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector> & RouteComponentProps \r\n\r\n\r\ninterface StateLogin{\r\n\tloginValidate: boolean | null,\r\n\tpasswordValidate: boolean | null\r\n}\r\n\r\ninterface FocusEvent<T = Element> extends SyntheticEvent<T> {\r\n\trelatedTarget: EventTarget | null;\r\n\ttarget: EventTarget & T;\r\n}\r\n\r\nclass Login extends React.Component<PropsFromRedux, StateLogin>{\r\n\tpublic state = {\r\n\t\t// validate\r\n\t\tloginValidate: null,\r\n\t\tpasswordValidate: null\r\n\t}\r\n\tprivate login = createRef<HTMLInputElement>()\r\n\tprivate password = createRef<HTMLInputElement>()\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t}\r\n\r\n\tclickLogin(e: MouseEvent){\r\n\t\te.preventDefault()\r\n\t\tthis.state.loginValidate !== false && this.state.passwordValidate !== false ? API.login({\r\n\t\t\tlogin: this.login.current?.value,\r\n\t\t\tpassword: this.password.current?.value\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif(!res.data.error){\r\n\t\t\t\t\tthis.props.login(res.data)\r\n\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\tNotification.success(\"OK\", \"Вы авторизованы!\", 3000)\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tNotification.error(\"Ошибка\", \"Неверный логин или пароль\", 4000)\r\n\t\t\t\t})\r\n\t\t\t.catch(() => Notification.error(\"Error\", \"Error on server\")):\r\n\r\n\t\t\tNotification.error(\"Error\", \"Login or password too long\")\r\n\t}\r\n\r\n\tvalidateForm(e: FocusEvent<HTMLInputElement>){\r\n\t\tconsole.log(e)\r\n\t\tswitch(e.target.name){\r\n\t\t\tcase \"login\":\r\n\t\t\t\te.target.value.length > 3 && \r\n\t\t\t\t\tthis.setState({ loginValidate: e.target.value.length < 30 })\r\n\t\t\t\tbreak\r\n\t\t\tcase \"password\":\r\n\t\t\t\te.target.value.length > 7 && \r\n\t\t\t\t\tthis.setState({ passwordValidate: e.target.value.length < 40 })\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"login\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<h2>Login</h2>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tname=\"login\" \r\n\t\t\t\t\t\t\tonBlur={ e => this.validateForm(e) } \r\n\t\t\t\t\t\t\tref={this.login} \r\n\t\t\t\t\t\t\tclassName={`input-login form-control \r\n\t\t\t\t\t\t\t\t${this.state.loginValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.loginValidate? \"is-valid\": \"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}`} \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your login\" \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Login</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tonBlur={ e => this.validateForm(e) } \r\n\t\t\t\t\t\t\tref={this.password} \r\n\t\t\t\t\t\t\tclassName={`input-password form-control \r\n\t\t\t\t\t\t\t\t${this.state.passwordValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.passwordValidate? \"is-valid\": \"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}`} \r\n\t\t\t\t\t\t\tid=\"floatingInput\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"your password\" \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Password</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={e => this.clickLogin(e)}>login</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connector(Login)","import React from 'react';\r\n// import { RouteComponentProps } from 'react-router-dom'\r\n\r\n\r\n\r\n// // eslint-disable-next-line @typescript-eslint/no-empty-interface\r\n// interface StatisticsProps extends RouteComponentProps {\r\n// }\r\n\r\n// // eslint-disable-next-line @typescript-eslint/no-empty-interface\r\n// interface StatisticsState{\r\n// }\r\n\r\nclass Statistics extends React.Component{\r\n\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"page_statistics\">\r\n\t\t\t\tStatistics\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default Statistics;\r\n","import React, { createRef, MouseEvent, SyntheticEvent } from \"react\"\r\nimport { connect, ConnectedProps } from \"react-redux\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { Dispatch } from \"redux\"\r\n\r\nimport API from \"../api\"\r\nimport { Notification } from \"../components/Notification\"\r\nimport { User } from \"../domains/entities/user.entity\"\r\nimport Action from \"../redux/actions\"\r\nimport { RootState } from \"../redux/store\"\r\n\r\nimport \"../styles/forms.scss\"\r\n\r\ninterface FocusEvent<T = Element> extends SyntheticEvent<T> {\r\n\trelatedTarget: EventTarget | null;\r\n\ttarget: EventTarget & T;\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: User) => f(Action.app.login(user))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector> & RouteComponentProps \r\n\r\ninterface RegistrationState{\r\n\tnameValidate: boolean | null\r\n\tloginValidate: boolean | null\r\n\tpasswordValidate: boolean | null\r\n}\r\n\r\nclass Registration extends React.Component<PropsFromRedux, RegistrationState>{\r\n\tpublic state = {\r\n\t\tnameValidate: null,\r\n\t\tloginValidate: null,\r\n\t\tpasswordValidate: null\r\n\t}\r\n\tprivate name = createRef<HTMLInputElement>()\r\n\tprivate login = createRef<HTMLInputElement>()\r\n\tprivate password = createRef<HTMLInputElement>()\r\n\tprivate rpassword = createRef<HTMLInputElement>()\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t}\r\n\r\n\tclickRegistration(e: MouseEvent){\r\n\t\te.preventDefault()\r\n\t\tif(this.state.loginValidate && this.state.nameValidate && this.state.passwordValidate){\r\n\t\t\tif(this.password.current?.value === this.rpassword.current?.value){\r\n\t\t\t\tAPI.registration({\r\n\t\t\t\t\tname: this.name.current?.value,\r\n\t\t\t\t\tlogin: this.login.current?.value,\r\n\t\t\t\t\tpassword: this.password.current?.value,\r\n\t\t\t\t\trefer: null\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(!res.data.error){\r\n\t\t\t\t\t\t\tthis.props.login(res.data)\r\n\t\t\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tNotification.error(\"Ошибка\", \"Возможно, такой логин уже занят\", 4000)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.log(err))\r\n\t\t\t}\r\n\t\t\t// Exception: passwords is not equal\r\n\t\t\telse \r\n\t\t\t\tNotification.warning(\"Ошибка\", \"Пароли не совпадают\", 4000)\r\n\t\t}\r\n\t\telse Notification.warning(\"Ошибка\", \"Введите корректные данные\", 4000)\r\n\t\t\r\n\t}\r\n\r\n\tonValidate(e: FocusEvent<HTMLInputElement>){\r\n\t\tconsole.log(e);\r\n\t\tswitch(e.currentTarget.name){\r\n\t\t\tcase \"name\":\r\n\t\t\t\tthis.setState({ nameValidate: e.currentTarget.value.length > 4 }); break\r\n\t\t\tcase \"login\":\r\n\t\t\t\tthis.setState({ loginValidate: e.currentTarget.value.length > 3 }); break\r\n\t\t\tcase \"password\":\r\n\t\t\t\tthis.setState({ passwordValidate: e.currentTarget.value.length > 7 }); break\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"registration\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<h2>Registration</h2>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tclassName={`form-control \r\n\t\t\t\t\t\t\t\t${this.state.nameValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.nameValidate? \"is-valid\": \r\n\t\t\t\t\t\t\t\t\t\"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\"\"}\r\n\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\tonBlur={e => this.onValidate(e)}\r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tref={this.name} \r\n\t\t\t\t\t\t\tid=\"floatingInput\"\r\n\t\t\t\t\t\t\tplaceholder=\"your name\" />\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Name</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tname=\"login\"\r\n\t\t\t\t\t\t\tclassName={`form-control \r\n\t\t\t\t\t\t\t\t${this.state.loginValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.loginValidate? \r\n\t\t\t\t\t\t\t\t\t\t\"is-valid\": \r\n\t\t\t\t\t\t\t\t\t\t\"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}\r\n\t\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\tonBlur={e => this.onValidate(e)}\r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tref={this.login} \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your login\" />\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Login</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tclassName={`form-control \r\n\t\t\t\t\t\t\t\t${this.state.passwordValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.passwordValidate? \r\n\t\t\t\t\t\t\t\t\t\t\"is-valid\": \r\n\t\t\t\t\t\t\t\t\t\t\"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}\r\n\t\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\tonBlur={e => this.onValidate(e)}\r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tref={this.password} \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your password\" />\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Password</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tref={this.rpassword} \r\n\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your password\" \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Repeat password</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={e => this.clickRegistration(e)}>registration</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connector(Registration)","import React from 'react';\r\nimport { Dispatch } from \"redux\"\r\nimport { RouteComponentProps } from 'react-router'\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { FaArrowRight, FaTimesCircle } from \"react-icons/fa\"\r\n\r\nimport API from '../api';\r\nimport { ICard } from '../domains/entities/card.entity';\r\nimport { IDeck } from '../domains/entities/deсk.entity';\r\n\r\nimport Currsection from '../components/Currsection';\r\nimport { Notification } from '../components/Notification';\r\nimport Action from \"../redux/actions\"\r\n\r\nimport \"../styles/pages/Play.scss\"\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\taddScores: (scores: number) => f(Action.app.addScores(scores))\r\n})\r\n\r\nconst connector = connect(null, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\n\r\ninterface IPlayProps extends RouteComponentProps, PropsFromRedux, WithTranslation{\r\n}\r\n\r\ninterface ResultEndPlayToServer{\r\n\tidCard: number\r\n\ttime: number\r\n\tanswer: boolean\r\n}\r\n\r\ninterface Results{\r\n\tmain_word: string\r\n\tanswer: string\r\n\tsuccessed: boolean\r\n\ttime: number\r\n}\r\n\r\ninterface StatePlay{\r\n\tdeck: IDeck | null\r\n\tcards: ICard[]\r\n\tcurrentCard: number\r\n\tcurrentLang: string\r\n\tsuccessed: ResultEndPlayToServer[]\r\n\tvalueInputAnswer: string\r\n\tended: boolean\r\n\tshowResults: boolean\r\n\tscores: number\r\n\tvisibleHint: boolean\r\n}\r\n\r\nclass Play extends React.Component<IPlayProps, StatePlay>{\r\n\tprivate TIME_CARD = 0\r\n\tconstructor(props: IPlayProps){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdeck: null,\r\n\t\t\tcards: [],\r\n\t\t\tcurrentLang: \"ENG\",\r\n\t\t\tcurrentCard: 0,\r\n\t\t\tsuccessed: [],\r\n\t\t\tvalueInputAnswer: \"\",\r\n\t\t\tended: false,\r\n\t\t\tshowResults: false,\r\n\t\t\tscores: 0,\r\n\t\t\tvisibleHint: false\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tshuffleCards(array: ICard[]) {\r\n\t\tfor (let i = array.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[array[i], array[j]] = [array[j], array[i]];\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\t}\r\n\r\n\tnextCard(successed: boolean){\r\n\t\tif(this.state.currentCard + 1 < this.state.cards.length){\t\t\r\n\t\t\tthis.setState({ \r\n\t\t\t\tcurrentCard: this.state.currentCard + 1,\r\n\t\t\t\tsuccessed: [\r\n\t\t\t\t\t...this.state.successed, \r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\tidCard: this.state.cards[this.state.currentCard].id, \r\n\t\t\t\t\t\ttime: this.getTimeDeck(\"end\"),\r\n\t\t\t\t\t\tanswer: successed\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}, () => this.getTimeDeck(\"start\"))\r\n\t\t}\r\n\t\telse{\r\n\t\t\t\r\n\t\t\tthis.setState({ ended: true, successed: [\r\n\t\t\t\t...this.state.successed, \r\n\t\t\t\t{ \r\n\t\t\t\t\tidCard: this.state.cards[this.state.currentCard].id, \r\n\t\t\t\t\ttime: this.getTimeDeck(\"end\"),\r\n\t\t\t\t\tanswer: successed\r\n\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.getTimeDeck(\"start\")\r\n\t\t\t\tAPI.getScoresAfterEndPlay({\r\n\t\t\t\t\tresults: this.state.successed\r\n\t\t\t\t}, this.state.deck?.id || -1)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\tthis.setState({ scores: res.data.score || 0 })\r\n\t\t\t\t\t\tthis.props.addScores(res.data.score || 0)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.log(err))\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgetTimeDeck(state: \"start\" | \"end\"): number{\r\n\t\tif(state === \"start\"){\r\n\t\t\tthis.TIME_CARD = new Date().getTime()\r\n\t\t}\r\n\t\telse if(state === \"end\"){\r\n\t\t\tconst time_card = this.TIME_CARD\r\n\t\t\tthis.TIME_CARD = 0\r\n\t\t\treturn Math.ceil((new Date().getTime() - time_card) / 1000)\r\n\t\t}\r\n\t\treturn 0\r\n\t}\r\n\r\n\tcheckCard(card: ICard, value: string): boolean{\r\n\t\tconst answers = card.answer\r\n\t\t\t.split(\"|\")\r\n\t\t\t.map(ans => ans.trim().toLowerCase())\r\n\t\t\t\r\n\t\treturn answers.includes(value.toLowerCase())\r\n\t}\r\n\r\n\thandleNextCard(){\r\n\t\tconst valueAnswer = this.state.valueInputAnswer\r\n\t\tif(this.checkCard(this.state.cards[this.state.currentCard], valueAnswer))\r\n\t\t\tthis.nextCard(true)\r\n\t\telse{\r\n\t\t\tthis.nextCard(false)\r\n\t\t\tthis.setState({ valueInputAnswer: \"\" })\r\n\t\t\t// else input outline: red\r\n\t\t}\r\n\t}\r\n\t\r\n\thandleSkipCard(){\r\n\t\tthis.nextCard(false)\r\n\t}\r\n\r\n\thandleChangeInputAnswer(e: React.FormEvent<HTMLInputElement>){\r\n\t\tif(this.checkCard(this.state.cards[this.state.currentCard], e.currentTarget.value)){\r\n\t\t\tthis.setState({ valueInputAnswer: \"\"})\r\n\t\t\tthis.nextCard(true)\r\n\t\t}else{\r\n\t\t\tif(e.currentTarget.value === \"-\"){\r\n\t\t\t\tthis.nextCard(false)\r\n\t\t\t\tthis.setState({ valueInputAnswer: \"\" })\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.setState({ valueInputAnswer: e.currentTarget.value })\r\n\t\t}\r\n\t}\r\n\r\n\thandleHint(){\r\n\t\tthis.setState({ visibleHint: !this.state.visibleHint })\r\n\t}\r\n\r\n\tgetResults(): Results[]{\r\n\t\treturn this.state.successed.map(suc => {\r\n\t\t\tconst __card = this.state.cards.filter(card => card.id === suc.idCard)[0]\r\n\t\t\treturn {\r\n\t\t\t\tmain_word: __card.main_word,\r\n\t\t\t\tanswer: __card.answer,\r\n\t\t\t\tsuccessed: suc.answer,\r\n\t\t\t\ttime: suc.time\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconst params: {id: number} = this.props.match.params as {id: number}\r\n\t\tconst id = Number(params.id)\r\n\t\tif(id){\r\n\t\t\tAPI.getDeck(id)\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.getTimeDeck(\"start\")\r\n\t\t\t\t\tthis.setState({ deck: resp.deck, cards: this.shuffleCards(resp.deck.cards) })\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => console.log(err))\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.props.history.push(\"/decks\")\r\n\t\t\tNotification.warning(\"You have not choise Deck\", \"Please, choose playing Deck\", 4000)\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"Play page\" style={{color: \"white\"}}>\r\n\t\t\t\t<div className={`Play__card ${this.state.ended? \"ended\": \"\"}`}>\r\n\t\t\t\t\t<Currsection \r\n\t\t\t\t\t\tinfo = {{ \r\n\t\t\t\t\t\t\t[this.props.t(\"Pages.Play.name\")]: this.state.deck?.name as string,\r\n\t\t\t\t\t\t\t[this.props.t(\"Pages.Play.description\")]: this.state.deck?.description || \"no description\",\r\n\t\t\t\t\t\t\t[this.props.t(\"Pages.Play.currentCard\")]: `${this.state.currentCard + 1} / ${this.state.deck?.cards.length}`\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t<section className=\"lesson_section Play__card_section\">\r\n\t\t\t\t\t\t<div className=\"lesson_card\">\r\n\t\t\t\t\t\t\t<span className=\"lesson_card_lang\">{this.state.deck?.mainLang.toUpperCase()}</span>\r\n\t\t\t\t\t\t\t<button className=\"lesson_card_hint\" onClick={this.handleHint.bind(this)}>?</button>\r\n\t\t\t\t\t\t\t<div className={`hint ${this.state.visibleHint? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t\t\t\t{this.state.cards[this.state.currentCard]?.description}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span className=\"lesson_card_word\">{this.state.cards[this.state.currentCard]?.main_word}</span> \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t<section className=\"lesson_section answer\">\r\n\t\t\t\t\t\t<div onClick={this.handleSkipCard.bind(this)} className=\"answer_button_skip_word\"><FaTimesCircle /></div>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tvalue={this.state.valueInputAnswer} \r\n\t\t\t\t\t\t\tonChange={this.handleChangeInputAnswer.bind(this)} \r\n\t\t\t\t\t\t\ttype=\"text\" className=\"answer_input\" \r\n\t\t\t\t\t\t\tplaceholder={`${this.props.t(\"Pages.Play.translateOn\")} ${this.state.deck?.secondLang.toUpperCase()}...`} \r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => this.handleNextCard()} className=\"answer_button_next_word\"><FaArrowRight /></div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\t\r\n\t\t\t\t\r\n\t\t\t\t{/* The end */}\r\n\t\t\t\t<div className={`section_congratulations ${this.state.ended && !this.state.showResults? \"ended\": \"\"}`}>\r\n\t\t\t\t\t<div className=\"congratulations\">\r\n\t\t\t\t\t\t<div className=\"welc\">\r\n\t\t\t\t\t\t\t<h2>{this.props.t(\"Pages.Play.congr\")}</h2>\r\n\t\t\t\t\t\t\t<h3>{this.props.t(\"Pages.Play.congrDesc1\")} &quot;{this.state.deck?.name}&quot; {this.props.t(\"Pages.Play.congrDesc2\")}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h1>{this.props.t(\"Pages.Play.scores\")}: {this.state.scores}</h1>\r\n\t\t\t\t\t\t<div className=\"control_buttons\">\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\" \r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ \r\n\t\t\t\t\t\t\t\t\tended: false, \r\n\t\t\t\t\t\t\t\t\tcurrentCard: 0, \r\n\t\t\t\t\t\t\t\t\tcards: this.shuffleCards(this.state.cards),\r\n\t\t\t\t\t\t\t\t\tsuccessed: []\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>{this.props.t(\"Pages.Play.onceAgain\")}</button>\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success\" \r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ showResults: true })}\r\n\t\t\t\t\t\t\t>{this.props.t(\"Pages.Play.results\")}</button>\r\n\t\t\t\t\t\t\t<Link to=\"/decks\" className=\"btn btn-danger\">{this.props.t(\"Pages.Play.toDecks\")}</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={`section_results ${this.state.showResults? \"showed\": \"hided\"}`}>\r\n\t\t\t\t\t<ul className=\"section_results_items\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.getResults().map((result, index) => {\r\n\t\t\t\t\t\t\t\treturn <li key={index} className=\"section_results_item\">\r\n\t\t\t\t\t\t\t\t\t<span>{result.main_word}</span> - <span>{result.answer}</span><span>{result.successed? \"Yes!\": \"no!\"}</span><span>{result.time}</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => this.setState({ showResults: false })}>back</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(connector(Play))\r\n","import React from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\n\r\nimport API from '../api';\r\nimport { showLoader, hideLoader } from \"../components\"\r\nimport { Deck, IDeckDefault } from '../components/Deck';\r\nimport Pagination from \"../components/Pagination\"\r\n\r\nimport \"../styles/pages/Decks.scss\"\r\nimport { RootState } from '../redux/store';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\n\r\ninterface StateStore{\r\n\tdecks: IDeckDefault[]\r\n\tcurrentPage: number\r\n\tcountPages: number\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth,\r\n\tnotify: state.notification,\r\n\tuser: state.app.user\r\n})\r\nconst connector = connect(mapStateToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector> & WithTranslation\r\n\r\n\r\nclass Store extends React.Component<PropsFromRedux, StateStore>{\r\n\tpublic state: StateStore = {\r\n\t\tdecks: [],\r\n\t\tcurrentPage: 1,\r\n\t\tcountPages: 1\r\n\t}\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t\tshowLoader()\r\n\t}\r\n\r\n\t// Methods\r\n\thandleLike(e: unknown, id: number){\r\n\t\tconsole.log(\"like\", id);\r\n\t\tAPI.setLike(id)\r\n\t\t\t.then(response => console.log(response))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\thandleClone(e: unknown, id: number){\r\n\t\tAPI.cloneDeck(id)\r\n\t\t\t.then(res => console.log(res))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\tupdateDecks(page: number){\r\n\t\tshowLoader()\r\n\t\tthis.setState({ decks: [], countPages: 0 })\r\n\t\tAPI.getAllDecks(page)\r\n\t\t.then(res => {\r\n\t\t\tconsole.log(res)\r\n\t\t\tthis.setState({ decks: res.data.decks, countPages: res.data.pages })\r\n\t\t\thideLoader()\r\n\t\t})\r\n\t\t.catch(err => console.log(err))\r\n\t}\r\n\thandleChangeCurrentPage(choosen: { selected: number }){\r\n\t\tthis.setState({ currentPage: choosen.selected + 1 })\r\n\t\tthis.updateDecks( choosen.selected + 1 )\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.updateDecks(this.state.currentPage)\r\n\t}\r\n\r\n\trender(){\r\n\t\tconsole.log(this.state.decks);\r\n\t\treturn(\r\n\t\t\t<div className=\"Store\" style={{color: \"white\"}}>\r\n\t\t\t\t<section className=\"lesson_section\">\r\n\t\t\t\t\t<h2 className=\"cards_main_name\">{this.props.t(\"Pages.Store.Store\")}</h2>\r\n\t\t\t\t\t<div className=\"cards\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.decks.length !== 0 && this.state.decks.map((deck: IDeckDefault, index: number) => {\r\n\t\t\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\t\t\t\t\t\t\t\t\tsubscribed={deck.subscribed}\r\n\t\t\t\t\t\t\t\t\tclone={this.handleClone}\r\n\r\n\t\t\t\t\t\t\t\t\tlike={this.handleLike}\r\n\r\n\t\t\t\t\t\t\t\t\tenableMethods={{\r\n\t\t\t\t\t\t\t\t\t\tenableLike: this.props.auth,\r\n\t\t\t\t\t\t\t\t\t\tenableSubscribe: deck.author !== this.props.user.login && this.props.auth,\r\n\t\t\t\t\t\t\t\t\t\tenableClone: this.props.auth\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\tcountPages={this.state.countPages}\r\n\t\t\t\t\t\tchangeCountPages={() => console.log()}\r\n\t\t\t\t\t\tchangeCurrentPage={choosen => this.handleChangeCurrentPage(choosen)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(connector(Store))\r\n","import React from 'react';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\nimport API from '../api';\r\nimport { hideLoader, showLoader } from '../components';\r\nimport { User } from '../domains/entities/user.entity';\r\n\r\nimport \"../styles/pages/Rating.scss\"\r\ninterface RatingItem{\r\n\taverage_rating: number\r\n\tlogin: string\r\n\tname: string\r\n\trating: number\r\n\twalkthroughs: number\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\r\ninterface IRatingProps extends WithTranslation{\r\n}\r\n\r\ninterface RatingState{\r\n\trating: RatingItem[]\r\n}\r\n\r\nclass Rating extends React.Component<IRatingProps, RatingState>{\r\n\tconstructor(props: IRatingProps){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\trating: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconst enableProps = [\"login\", \"rating\"]\r\n\t\tshowLoader()\r\n\t\tAPI.getRating()\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tthis.setState({ \r\n\t\t\t\t\trating: data.data.users.map((item: Record<string, string | number | boolean> & User) => \r\n\t\t\t\t\t\tObject.keys(item).reduce((prev, curr) => \r\n\t\t\t\t\t\t\tenableProps.includes(curr) ? {...prev, [curr]: item[curr]} : {...prev}, {}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}, () => hideLoader())\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(\"err\"))\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"Rating\" style={{color: \"white\"}}>\r\n\t\t\t\t<h1>{this.props.t(\"Pages.Rating.Rating\")}</h1>\r\n\t\t\t\t<ul className=\"header\">\r\n\t\t\t\t\t<li><span className=\"header_login\">{this.props.t(\"Pages.Rating.login\")}</span></li>\r\n\t\t\t\t\t<li><span className=\"header_scores\">{this.props.t(\"Pages.Rating.scores\")}</span></li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul className=\"main_list\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.rating.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <li className=\"main_list_item\" key={index}>\r\n\t\t\t\t\t\t\t\t<span className=\"login\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"index\">{index + 1}. </span>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/user/${item.login}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{ index === 0 && <span>🥇</span> }\r\n\t\t\t\t\t\t\t\t\t\t\t{ index === 1 && <span>🥈</span> }\r\n\t\t\t\t\t\t\t\t\t\t\t{ index === 2 && <span>🥉</span> }\r\n\t\t\t\t\t\t\t\t\t\t\t{item.login}\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"rating\">{item.rating}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(Rating);\r\n","import React, { ReactNode } from 'react';\r\nimport { withTranslation } from 'react-i18next'\r\n\r\nimport { showLoader, hideLoader } from \"../components\"\r\n\r\nimport \"../styles/pages/Main.scss\"\r\n\r\ninterface IMainProps{\r\n\tt: (s: string) => ReactNode\r\n}\r\n\r\nclass Main extends React.Component<IMainProps>{\r\n\tconstructor(props: IMainProps){\r\n\t\tsuper(props)\r\n\t\tshowLoader()\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\thideLoader()\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"Main\" style={{color: \"white\"}}>\r\n\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t<div className=\"image_wrapper\">\r\n\t\t\t\t\t\t<img className=\"image_slider\" src=\"images/slider.png\" alt=\"slider image\" />\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"text_block\">\r\n\t\t\t\t\t\t<h1>{this.props.t(\"Pages.Main.welcome\")}</h1>\r\n\t\t\t\t\t\t<p>{this.props.t(\"Pages.Main.description\")}</p>\r\n\t\t\t\t\t\t{/* <h2>Our advantages:</h2>\r\n\t\t\t\t\t\t<ul className=\"advantages\">\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Simple</li>\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Concise</li>\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Fast</li>\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Creative</li>\r\n\t\t\t\t\t\t</ul> */}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(Main)","import Decks from \"./Decks\"\r\nimport Home from \"./Home\"\r\nimport Login from \"./Login\"\r\nimport Statistics from \"./Statistics\"\r\nimport Registration from \"./Registration\"\r\nimport Play from \"./Play\"\r\nimport Store from \"./Store\"\r\nimport Rating from \"./Rating\"\r\nimport Main from \"./Main\"\r\nimport UserPage from \"./User\"\r\n\r\nconst Pages = {\r\n\tMain,\r\n\tDecks,\r\n\tHome,\r\n\tStatistics,\r\n\tPlay,\r\n\tStore,\r\n\tRating,\r\n\tRegistration,\r\n\tLogin,\r\n\tUser: UserPage\r\n}\r\n\r\nexport default Pages","import React, { useEffect, useState } from \"react\"\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport { FaStar } from \"react-icons/fa\"\r\nimport ScrollContainer from 'react-indiana-drag-scroll'\r\nimport API from \"../api\";\r\nimport { Deck } from \"../components/Deck\";\r\nimport { User } from \"../domains/entities/user.entity\"\r\n\r\nimport \"../styles/pages/User.scss\"\r\nimport { hideLoader, showLoader } from \"../components\";\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\nimport { Notification } from \"../components/Notification\";\r\n\r\ninterface ParamsUserPage{\r\n\tlogin: string\r\n}\r\n\r\n\r\nconst UserPage: React.FC<WithTranslation> = props => {\r\n\tconst { login } = useParams<ParamsUserPage>();\r\n\tconst history = useHistory()\r\n\r\n\tconst [user, setUser] = useState({} as User)\r\n\tconst [loader, setLoader] = useState(false)\r\n\r\n\t!loader && showLoader()\r\n\tuseEffect(() => {\r\n\t\tAPI.getUser(login, 1)\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tsetUser(data)\r\n\t\t\t\tif(!loader){\r\n\t\t\t\t\thideLoader()\r\n\t\t\t\t\tsetLoader(true)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(data => console.log(user))\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(\"[ERROR]: \", err);\r\n\t\t\t\tNotification.error(\"Ошибка\", \"Кажется, данные пользователя не смогли загрузиться...\", 4000)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\thistory.push(\"/\")\r\n\t\t\t\t}, 500)\r\n\t\t\t})\r\n\t}, [login, loader])\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"UserPage\">\r\n\t\t\t<div className=\"top_panel\">\r\n\r\n\r\n\t\t\t\t<div className=\"top_panel_left\">\r\n\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t<img src=\"https://avatars.githubusercontent.com/u/73424545?v=4\" alt=\"avatar\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t<h2 className=\"info_name\">{user.name || \"USERNAME\"}</h2>\r\n\t\t\t\t\t\t<span className=\"info_login\">@{user.login || \"NOLOGIN\"}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"top_panel_right\">\r\n\t\t\t\t\t<div className=\"info_rating\">\r\n\t\t\t\t\t\t<span className=\"info_rating_icon\"><FaStar/></span>\r\n\t\t\t\t\t\t<span className=\"info_rating_count\">{user.rating || 10000}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info_position\">\r\n\t\t\t\t\t\t<span className=\"info_position_cnt\"><Link to=\"/rating\" className=\"position_mark\">#{1}</Link> {props.t(\"Pages.User.inRating\")}!</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<section className=\"owners_deck\">\r\n\t\t\t\t<h2 className=\"head_section_owners_deck\">{props.t(\"Pages.User.LastOwnedDecks\")}</h2>\r\n\t\t\t\t<ScrollContainer hideScrollbars={false} className=\"cards\">\r\n\t\t\t\t{\r\n\t\t\t\t\tuser.decks?.length !== 0 && user.decks?.map((deck, index: number) => {\r\n\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\r\n\t\t\t\t\t\t\t// enables\r\n\t\t\t\t\t\t\tenableMethods={{ \r\n\t\t\t\t\t\t\t\tenableChangePrivate: false, \r\n\t\t\t\t\t\t\t\tenableDelete: false, \r\n\t\t\t\t\t\t\t\tenableEdit: false,\r\n\t\t\t\t\t\t\t\tenableLike: true\r\n\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\tlike={() => API.setLike(deck.id)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ScrollContainer>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default withTranslation()(UserPage)","import Pages from \"./pages\"\r\nimport { \r\n\tFaHome,\r\n\tFaPlay,\r\n\tFaList,\r\n\tFaStore,\r\n\tFaChartBar,\r\n\tFaStar,\r\n} from \"react-icons/fa\"\r\nimport React from \"react\";\r\nimport { ConnectedComponent } from \"react-redux\";\r\n \r\nexport interface IRoute{\r\n\tisNavBar?: boolean,\r\n\tisExact?: boolean,\r\n\tpath: string,\r\n\tname: string,\r\n\tcomponent: any,\r\n\tisPrivate?: boolean,\r\n\tisLogin?: boolean,\r\n\ticon?: typeof FaHome\r\n}\r\n\r\nexport const routes: IRoute[] = [\r\n\t// with auth\r\n\t{\r\n\t\t// dashboard - last cards and statistics\r\n\t\tisNavBar: false,\r\n\t\tisLogin: false,\r\n\t\tisExact: true,\r\n\t\tpath: '/',\r\n\t\tname: 'Main',\r\n\t\tcomponent: Pages.Main\r\n\t},\r\n\t{\r\n\t\t// dashboard - last cards and statistics\r\n\t\tisNavBar: false,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: true,\r\n\t\tpath: '/home',\r\n\t\tname: 'Home',\r\n\t\tcomponent: Pages.Home,\r\n\t\ticon: FaHome\r\n\t},\r\n\t{\r\n\t\tisNavBar: false,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: false,\r\n\t\tpath: '/play/:id',\r\n\t\tname: 'Play',\r\n\t\tcomponent: Pages.Play,\r\n\t\ticon: FaPlay\r\n\t},\r\n\t{\r\n\t\t// public and private Decks - card store\r\n\t\tisNavBar: true,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: true,\r\n\t\tpath: '/decks',\r\n\t\tname: 'Decks',\r\n\t\tcomponent: Pages.Decks,\r\n\t\ticon: FaList\r\n\t},\r\n\t{\r\n\t\t// public and private cards - card store\r\n\t\tisNavBar: true,\r\n\t\tisExact: true,\r\n\t\tpath: '/store',\r\n\t\tname: 'Store',\r\n\t\tcomponent: Pages.Store,\r\n\t\ticon: FaStore\r\n\t},\r\n\t{\r\n\t\tisNavBar: false,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: true,\r\n\t\tpath: '/statistics',\r\n\t\tname: 'Statistics',\r\n\t\tcomponent: Pages.Statistics,\r\n\t\ticon: FaChartBar\r\n\t},\r\n\t{\r\n\t\tisNavBar: true,\r\n\t\tisExact: true,\r\n\t\tpath: '/rating',\r\n\t\tname: 'Rating',\r\n\t\tcomponent: Pages.Rating,\r\n\t\ticon: FaStar\r\n\t},\r\n\t\r\n\t// not auth\r\n\t{\r\n\t\tisNavBar: true,\r\n\t\tisExact: true,\r\n\t\tisLogin: false,\r\n\t\tpath: '/registration',\r\n\t\tname: 'Registration',\r\n\t\tcomponent: Pages.Registration\r\n\t},\r\n\t{\r\n\t\tisNavBar: true,\r\n\t\tisLogin: false,\r\n\t\tisExact: true,\r\n\t\tpath: '/login',\r\n\t\tname: 'Login',\r\n\t\tcomponent: Pages.Login\r\n\t},\r\n\r\n\r\n\r\n\t// not in header\r\n\t{\r\n\t\tisNavBar: false,\r\n\t\tisLogin: false,\r\n\t\tisExact: true,\r\n\t\tpath: '/user/:login',\r\n\t\tname: 'User',\r\n\t\tcomponent: Pages.User\r\n\t},\r\n\r\n\t\r\n];\r\n","import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nconst Athorization = (WrappedComponent: typeof React.Component, auth: boolean) => {\r\n  class WithAuthorization extends React.Component {\r\n    render() {\r\n      if (!auth) {\r\n        return <Redirect to=\"/login\" />\r\n      }\r\n\r\n      return <WrappedComponent {...this.props}/>\r\n    }\r\n  }\r\n  return WithAuthorization\r\n};\r\n\r\nexport default Athorization\r\n","import React from \"react\"\r\n\r\nconst Footer: React.FC = () => {\r\n\treturn(\r\n\t\t<footer>\r\n\t\t\t<div className=\"wrap_content\">\r\n\t\t\t\t<div className=\"front\">Front: <a href=\"https://t.me/daniil00q\">Shenyagin Daniil</a><a href=\"https://github.com/daniil00t\">@danii00t</a></div>\r\n\t\t\t\t<div className=\"center\">RepDict&copy;{new Date().getFullYear()}</div>\r\n\t\t\t\t<div className=\"back\">Back: <a href=\"https://t.me/nafanyechka\">Bausov Vadim</a><a href=\"https://github.com/nafanyushka\">@nafanyechka</a></div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t)\r\n}\r\n\r\nexport default Footer","import React from 'react'\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\n// Controllers data\r\nimport API from \"./api\"\r\nimport { routes } from './routes';\r\nimport Action from \"./redux/actions\"\r\n\r\n// Components\r\nimport Components, { showLoader, hideLoader } from \"./components\"\r\nimport Authorization from './hoc/Authorization'\r\nimport ModalContainer from \"./components/modals\"\r\n\r\n// Translation\r\nimport './i18n';\r\n\r\n\r\n\r\n\r\n\r\n// App styles\r\nimport \"./styles/reset.scss\"\r\nimport './styles/main.scss'\r\nimport './styles/responsive.scss'\r\nimport 'react-notifications/lib/notifications.css'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport { POPUP_TYPES } from './redux/types'\r\nimport Footer from './components/Footer';\r\nimport { Dispatch } from 'redux';\r\n\r\n// -----------------------------------------------------------------------------\r\n// ---------------------- Connect to redux emmiter -----------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n\tauth: state.app.auth,\r\n\tnotify: state.notification,\r\n\tpopupProps: state.popup\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: any) => f(Action.app.login(user)),\r\n\tlogout: () => f(Action.app.logout()),\r\n\tconfirm: (head: string, content: string, close: () => void, success: (s: boolean) => void) => \r\n\t\tf(Action.popup.show(POPUP_TYPES.CONFIRM, head, content, {close, success}))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ninterface StateApp{\r\n\tauth: boolean\r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// ------------------------- Switcher for Router -------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nclass Switcher extends React.PureComponent<StateApp, PropsFromRedux>{\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<Switch>\r\n\t\t\t\t{routes.map(route => {\r\n\t\t\t\t\tconst component = route.isPrivate ? Authorization(route.component, this.props.auth) : route.component;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\tkey={route.path}\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={route.path}\r\n\t\t\t\t\t\tcomponent={component}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</Switch>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------- App class including interfaces -------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nclass App extends React.Component<PropsFromRedux, StateApp>{\r\n\tpublic state: StateApp = {\r\n\t\tauth: true\r\n\t}\r\n\t// Refs for element which need change because outside click\r\n\t\r\n\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t\tconsole.log(`\r\n    ____  __________  ____  ________________   _________            __\r\n   / __ \\\\/ ____/ __ \\\\/ __ \\\\/  _/ ____/_  __/  / ____/ (_)__  ____  / /_\r\n  / /_/ / __/ / /_/ / / / // // /     / /    / /   / / / _ \\\\/ __ \\\\/ __/\r\n / _, _/ /___/ ____/ /_/ // // /___  / /    / /___/ / /  __/ / / / /_\r\n/_/ |_/_____/_/   /_____/___/\\\\____/ /_/     \\\\____/_/_/\\\\___/_/ /_/\\\\__/\r\n\t\t`);\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tif(localStorage.getItem(\"token\")?.length !== undefined && localStorage.getItem(\"token\") !== \"undefined\"){\r\n\t\t\tAPI.auth()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif(!res.data.error){\r\n\t\t\t\t\t\tthis.setState({ auth: true })\r\n\t\t\t\t\t\tthis.props.login(res.data.data)\r\n\t\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\t\thideLoader()\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.props.logout()\r\n\t\t\t\t\t\thideLoader()\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => console.log(err))\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.setState({ auth: false })\r\n\t\t\tlocalStorage.removeItem(\"token\")\r\n\t\t\thideLoader()\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<Router>\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Components.Header routes={routes.filter(route => route.isNavBar)}/>\r\n\t\t\t\t\t<Switcher auth={this.state.auth || this.props.auth}/>\r\n\t\t\t\t\t<Components.Notification {...this.props.notify}/>\r\n\t\t\t\t\t<ModalContainer {...this.props.popupProps}/>\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t</Router>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connector(App)\r\n","/* eslint-disable react/react-in-jsx-scope */\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport RoutedApp from './App'\r\n\r\n\r\nimport store from \"./redux/store\"\r\n\r\nReactDOM.render(\r\n  // eslint-disable-next-line react/react-in-jsx-scope\r\n  <Provider store={store}>\r\n    <RoutedApp />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}