(this.webpackJsonpRepDict=this.webpackJsonpRepDict||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},5:function(e){e.exports=JSON.parse('{"a":"","b":{"MAIN":"/","USERS":"/users","REGISTRATION":"/registration","LOGIN":"/login","AUTH":"/auth","GET_DECKS":"/get_decks","GET_DECK":"/get_deck","GET_ALL_DECKS":"/get_all_decks","SET_LIKE":"/like","ADD_DECK":"/new_deck","CHANGE_DECK":"/change_deck","SUBSCRIBE_DECK":"/subscribe","DELETE_DECK":"/delete_deck","GET_SCORES":"/statistic","GET_STATISTIC":"/statistic","CLONE_DECK":"/copy_deck","GET_RATING":"/rating"}}')},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",(function(){return U})),n.d(a,"logout",(function(){return B})),n.d(a,"addScores",(function(){return V}));var c={};n.r(c),n.d(c,"show",(function(){return H})),n.d(c,"hide",(function(){return W}));var s={};n.r(s),n.d(s,"show",(function(){return q})),n.d(s,"hide",(function(){return J})),n.d(s,"success",(function(){return Y}));var i,r,o,l=n(1),d=n.n(l),u=n(20),h=n.n(u),j=n(12),b=n(2),p=n(7),m=n(8),O=n(10),f=n(9),v=n(11),_=n(15),g=n(31),k=n.n(g),x=n(5),N={REGISTRATION:x.a+x.b.REGISTRATION,LOGIN:x.a+x.b.LOGIN,AUTH:x.a+x.b.AUTH,GET_DECKS:x.a+x.b.GET_DECKS,GET_DECK:x.a+x.b.GET_DECK,GET_ALL_DECKS:x.a+x.b.GET_ALL_DECKS,SET_LIKE:x.a+x.b.SET_LIKE,ADD_DECK:x.a+x.b.ADD_DECK,CHANGE_DECK:x.a+x.b.CHANGE_DECK,SUBSCRIBE_DECK:x.a+x.b.SUBSCRIBE_DECK,DELETE_DECK:x.a+x.b.DELETE_DECK,GET_SCORES:x.a+x.b.GET_SCORES,CLONE_DECK:x.a+x.b.CLONE_DECK,GET_RATING:x.a+x.b.GET_RATING},w=function(e){return e===N.GET_DECK?JSON.parse('\n\t\t\t\t{\n\t\t\t\t\t"deck": {\n\t\t\t\t\t\t"is_private": 0,\n\t\t\t\t\t\t"author_login": "admin",\n\t\t\t\t\t\t"cards": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0440\u0435\u043f",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 1,\n\t\t\t\t\t\t\t\t"main_word": "rap",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0442\u0435\u0445\u043d\u0438\u043a\u0430",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 3,\n\t\t\t\t\t\t\t\t"main_word": "flow",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0431\u043e\u0433\u0430\u0442\u0441\u0442\u0432\u043e",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 22,\n\t\t\t\t\t\t\t\t"main_word": "guap",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"answer": "\u0431\u043e\u0433\u0430\u0442\u0441\u0442\u0432\u043e",\n\t\t\t\t\t\t\t\t"description": null,\n\t\t\t\t\t\t\t\t"id": 32,\n\t\t\t\t\t\t\t\t"main_word": "guap",\n\t\t\t\t\t\t\t\t"type": "default"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\t"is_owner": false,\n\t\t\t\t\t\t"owner_login": "admin",\n\t\t\t\t\t\t"description": "\u0442\u0443\u0442 \u0447\u0438\u0441\u0442\u043e \u043f\u0440\u043e \u0440\u0435\u043f",\n\t\t\t\t\t\t"count_repetitions": 0,\n\t\t\t\t\t\t"liked": true,\n\t\t\t\t\t\t"subscribed": true,\n\t\t\t\t\t\t"main_language": "eng",\n\t\t\t\t\t\t"second_language": "rus",\n\t\t\t\t\t\t"price": 0,\n\t\t\t\t\t\t"count_words": 4,\n\t\t\t\t\t\t"name": "rap",\n\t\t\t\t\t\t"id": 1,\n\t\t\t\t\t\t"likes": 2\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t'):{error:!0}},y=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"POSTFake",value:function(e,t,n){return new Promise((function(e,t){}))}}],[{key:"GET",value:function(e,t,n){return k.a.get(e,{params:(null===n||void 0===n?void 0:n.token)?Object(b.a)(Object(b.a)({},t),{},{token:localStorage.getItem("token")||""}):Object(b.a)({},t),responseType:(null===n||void 0===n?void 0:n.downloadFile)?"blob":"json"})}},{key:"POST",value:function(e,t,n){var a=(null===n||void 0===n?void 0:n.token)?Object(b.a)(Object(b.a)({},t),{},{token:localStorage.getItem("token")||""}):Object(b.a)({},t);return k.a.post(e,a,{responseType:(null===n||void 0===n?void 0:n.downloadFile)?"blob":"json"})}},{key:"GETFake",value:function(e,t,n){return new Promise((function(t,n){setTimeout((function(){t({data:w(e)})}),100)}))}},{key:"registration",value:function(e){return this.POST(N.REGISTRATION,e)}},{key:"login",value:function(e){return this.POST(N.LOGIN,e)}},{key:"auth",value:function(){return this.GET(N.AUTH,{},{token:!0})}},{key:"transormArrayOfDeck",value:function(e){return{id:e.id,name:e.name,isPrivate:e.is_private,countWords:e.count_words,countRepetitions:e.count_repetitions,mainLang:e.main_language,secondLang:e.second_language,author:e.author_login,owner:e.owner_login,description:e.description,countLikes:e.likes,activeLike:e.liked,cards:e.cards,subscribed:e.subscribed}}},{key:"getDecks",value:function(){var e=this;return new Promise((function(t,n){e.GET(N.GET_DECKS,{},{token:!0}).then((function(n){var a={subscriptions:n.data.subscriptions.map((function(t){return e.transormArrayOfDeck(t)})),owned:n.data.owned.map((function(t){return e.transormArrayOfDeck(t)}))};console.log(Object(b.a)(Object(b.a)({},n.data),a)),t({data:Object(b.a)(Object(b.a)({},n.data),a)})}))}))}},{key:"getDeck",value:function(e){var t=this;return new Promise((function(n,a){var c;t.GET(N.GET_DECK,void 0!==(null===(c=localStorage.getItem("token"))||void 0===c?void 0:c.length)?{token:localStorage.getItem("token"),id:e}:{id:e}).then((function(e){console.log(e);var a=t.transormArrayOfDeck(e.data.deck);n({deck:a})}))}))}},{key:"getAllDecks",value:function(){var e=this;return new Promise((function(t,n){var a;e.GET(N.GET_ALL_DECKS,void 0!==(null===(a=localStorage.getItem("token"))||void 0===a?void 0:a.length)?{token:localStorage.getItem("token")}:{}).then((function(n){var a=n.data.decks.map((function(t){return e.transormArrayOfDeck(t)}));t(Object(b.a)(Object(b.a)({},n),{},{data:Object(b.a)(Object(b.a)({},n.data),{},{decks:a})}))}))}))}},{key:"addDeck",value:function(e){return this.POST(N.ADD_DECK,e,{token:!0})}},{key:"deleteDeck",value:function(e){return this.POST(N.DELETE_DECK,{deckId:e},{token:!0})}},{key:"getScoresAfterEndPlay",value:function(e,t){return this.POST(N.GET_SCORES,Object(b.a)(Object(b.a)({},e),{},{deckId:t}),{token:!0})}},{key:"cloneDeck",value:function(e){return this.POST(N.CLONE_DECK,{deckId:e},{token:!0})}},{key:"applyChanges",value:function(e,t){return this.POST(N.CHANGE_DECK,{idDeck:e,changes:t},{token:!0})}},{key:"setLike",value:function(e){return this.POST(N.SET_LIKE,{deckId:e},{token:!0})}},{key:"subscribe",value:function(e){return this.POST(N.SUBSCRIBE_DECK,{deckId:e},{token:!0})}},{key:"getRating",value:function(e){return this.GET(N.GET_RATING,{},{token:!1})}}]),e}(),C=n(13),E=n(3),S=n(4);(r=i||(i={})).RUS="RUS",r.ENG="ENG",r.JPN="JPN",r.CHI="CHI",r.ITA="ITA",r.SPA="SPA",r.FRA="FRA",r.GER="GER",function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.WARNING="WARNING"}(o||(o={}));var D,L="APP/LOGIN",R="APP/LOGOUT",T="APP/ADD_SCORES",I="NOTIFY/SHOW",P="NOTIFY/HIDE";!function(e){e[e.ALERT=0]="ALERT",e[e.CONFIRM=1]="CONFIRM",e[e.PROMPT=2]="PROMPT"}(D||(D={}));var A,G="POPUP/SHOW",M="POPUP/HIDE",K="POPUP/SUCCESS";!function(e){e[e.NOT=0]="NOT",e[e.GOOGLE=1]="GOOGLE",e[e.VK=2]="VK",e[e.FACEBOOK=3]="FACEBOOK"}(A||(A={}));var F,U=function(e){return{type:L,payload:e}},B=function(){return{type:R}},V=function(e){return{type:T,payload:e}},H=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;return{type:I,payload:{type:e,head:t,content:n,timeout:a}}},W=function(){return{type:P}},q=function(e,t,n,a){return{type:G,payload:{type:e,head:t,content:n,actions:a}}},J=function(){return{type:M}},Y=function(e){return{type:K,payload:e}},z={app:a,notification:c,popup:s},Q=function(e,t){var n=function(n){e.current&&!e.current.contains(n.target)&&t()};Object(l.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}))},X=(n(41),n(0)),Z=Object(j.b)((function(e){return{auth:e.app.auth,user:e.app.user}}),(function(e){return{login:function(t){return e(z.app.login(t))},logout:function(){return e(z.app.logout())}}}))((function(e){Object(v.g)();var t=Object(l.useState)(!1),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(l.useState)(!1),i=Object(E.a)(s,2),r=i[0],o=i[1],d=Object(l.useRef)(null),u=Object(v.h)().pathname;Q(d,(function(){a&&c(!1)})),Object(l.useEffect)((function(){document.body.style.overflow=r?"hidden":"unset"}),[r]);return Object(X.jsxs)("header",{className:"main_header",children:[Object(X.jsx)("div",{className:"logo",children:Object(X.jsx)("span",{className:"logo_text",children:Object(X.jsx)(_.b,{to:"/",onClick:function(e){return o(!1)},children:"RepDict"})})}),Object(X.jsxs)("div",{className:"menu",children:[Object(X.jsx)("div",{className:"icon_bars",onClick:function(e){return o(!r)},children:Object(X.jsx)(S.c,{})}),Object(X.jsxs)("ul",{className:"menu_list responsive_".concat(r?"active":"noactive"),children:[e.routes.filter((function(t){return t.isLogin===e.auth||void 0===t.isLogin})).map((function(e){return Object(X.jsx)("li",{className:"menu_list_item ".concat(e.path===u?"active":"noactive"),children:Object(X.jsxs)(_.b,{className:"menu_list_item_link",to:"".concat(e.path),onClick:function(e){return o(!1)},children:[!!e.icon&&Object(X.jsx)(e.icon,{}),e.name]})},e.path)})),e.auth&&Object(X.jsxs)("li",{style:{color:"white"},className:"user_panel",onClick:function(e){return c(!a)},children:[Object(X.jsxs)("div",{className:"user_panel_head",children:[Object(X.jsx)(S.r,{}),e.user.name," ",Object(X.jsx)("span",{className:"user__balance",children:e.user.balance})]}),Object(X.jsxs)("ul",{className:"dropdown ".concat(a?"showedDB__fadeIn":"closed"),ref:d,children:[Object(X.jsx)("li",{className:"dropdown_item",children:Object(X.jsx)(_.b,{to:"/users/".concat(e.user.login),onClick:function(e){return o(!1)},children:"Profile"})}),Object(X.jsx)("li",{className:"dropdown_item",children:Object(X.jsx)(_.b,{to:"/settings",onClick:function(e){return o(!1)},children:"Setting"})}),Object(X.jsx)("li",{className:"dropdown_item",children:Object(X.jsx)(_.b,{to:"/",onClick:function(t){return e.logout(),void o(!1)},children:"Logout"})})]})]})]})]})]})})),$=function(e){var t=Object(l.useState)(e.text),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(l.useState)(!1),i=Object(E.a)(s,2),r=i[0],o=i[1],d=Object(l.useRef)(null),u=Object(l.useRef)(null),h=function(t,n){t?o(!0):(o(!1),e.onChanged(e.text,n))};return Q(d,(function(){r&&(h(!1,u.current.value),o(!1))})),Object(X.jsx)("div",{className:"edit_text",ref:d,children:r?Object(X.jsx)("input",{ref:u,type:e.typeInput,value:a,onChange:function(e){c(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(h(!1,u.current.value),o(!1))},autoFocus:!0}):Object(X.jsx)("span",{className:"edit_text_content",onClick:function(e){return h(!0)},children:a})})},ee=n(22),te=n(47),ne=n(48),ae={auth:!1,user:{name:"",login:"",balance:0}},ce={visible:!1,type:null,head:"",content:"",timeout:2e3},se={visible:!1,type:0,head:"",content:"",close:function(){}},ie=Object(ee.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return localStorage.setItem("token",t.payload.token),Object(b.a)(Object(b.a)({},e),{},{auth:!0,user:{name:t.payload.name,login:t.payload.login,balance:t.payload.balance}});case R:return localStorage.removeItem("token"),Object(b.a)(Object(b.a)({},e),{},{auth:!1,user:{name:"",login:"",balance:0}});case T:return Object(b.a)(Object(b.a)({},e),{},{user:Object(b.a)(Object(b.a)({},e.user),{},{balance:e.user.balance+t.payload})});default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{visible:!0,type:t.payload.type,head:t.payload.head,content:t.payload.content,timeout:t.payload.timeout};case P:return Object(b.a)({},ce);default:return e}},popup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return{type:t.payload.type,visible:!0,head:t.payload.head,content:t.payload.content,close:t.payload.actions.close,success:t.payload.actions.success};case M:return Object(b.a)({},se);default:return e}}}),re=ie,oe=Object(ne.composeWithDevTools)({trace:!0,traceLimit:25}),le=Object(ee.createStore)(re,oe(Object(ee.applyMiddleware)(te.a,(function(e){return function(t){return function(n){var a=!1,c=[];function s(){c.forEach((function(t){return e.dispatch(t)})),c=[]}var i=Object.assign({},n,{asyncDispatch:function(e){c=c.concat([e]),a&&s()}}),r=t(i);return a=!0,s(),r}}}))));!function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.WARNING="WARNING"}(F||(F={}));var de=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;le.dispatch(z.notification.show("success",e,t,n))},ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;le.dispatch(z.notification.show("error",e,t,n))},he=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;le.dispatch(z.notification.show("warning",e,t,n))},je=function(e){var t=Object(v.g)();return e.visible?Object(X.jsx)("div",{className:"watch_container",children:Object(X.jsxs)("div",{className:"watcher",children:[Object(X.jsx)("div",{className:"name_card",children:e.nameCard}),Object(X.jsxs)("div",{className:"author",children:["by ",Object(X.jsx)(_.b,{to:"/user/".concat(e.author),children:e.author})]}),Object(X.jsx)("div",{className:"close",onClick:function(t){return e.close(t)},children:Object(X.jsx)(S.q,{})}),Object(X.jsx)("div",{className:"card_item_panel_item_words",children:Object(X.jsx)("ul",{className:"card_item_panel_item_words_ul",children:e.cards.map((function(e,t){return Object(X.jsxs)("li",{className:"item",children:[Object(X.jsxs)("span",{className:"index",children:["#",t+1,". "]}),Object(X.jsx)("span",{className:"main_word",children:e.main_word}),"-",Object(X.jsx)("span",{className:"second_word",children:e.answer})]})}))})}),Object(X.jsx)("div",{className:"btn_wrapper",children:Object(X.jsx)("button",{className:"__btn btn_play",onClick:function(n){return t.push("/play/".concat(e.id))},children:"play"})})]})}):null},be=function(e){var t,n,a,c,s=Object(v.g)(),i=Object(l.useState)(!1),r=Object(E.a)(i,2),o=r[0],d=r[1],u=Object(l.useState)(e.activeLike||!1),j=Object(E.a)(u,2),b=j[0],p=j[1],m=Object(l.useState)(e.subscribed||!1),O=Object(E.a)(m,2),f=O[0],g=O[1],k=Object(l.useState)(!1),x=Object(E.a)(k,2),N=x[0],w=x[1],C=Object(l.useState)(e.countLikes||0),D=Object(E.a)(C,2),L=D[0],R=D[1],T=Object(l.useState)(e.isPrivate||!1),I=Object(E.a)(T,2),P=I[0],A=I[1],G=Object(l.useRef)(null);Q(G,(function(){o&&d(!1)}));return Object(X.jsxs)("div",{className:"card_item card_item_noactive",children:[h.a.createPortal(Object(X.jsx)(je,{id:e.id,author:e.author,nameCard:e.name,close:function(e){return w(!1)},visible:N,cards:e.cards}),document.getElementById("root-modals")),Object(X.jsxs)("div",{className:"control",children:[Object(X.jsx)("span",{className:"icon",onClick:function(e){return d(!o)},children:Object(X.jsx)(S.f,{})}),Object(X.jsxs)("ul",{className:"dropdown ".concat(o?"active":"noactive"),ref:G,children:[Object(X.jsx)("li",{className:"dropdown_item",onClick:function(e){return w(!0)},children:"Watch"}),Object(X.jsx)("li",{className:"dropdown_item",onClick:function(t){return s.push("/play/".concat(e.id))},children:"Play"}),(null===(t=e.enableMethods)||void 0===t?void 0:t.enableEdit)&&Object(X.jsx)("li",{className:"dropdown_item",onClick:function(t){return function(t,n){d(!1),e.edit(t,e.index)}(t,e.index)},children:"Edit"}),(null===(n=e.enableMethods)||void 0===n?void 0:n.enableDelete)&&Object(X.jsx)("li",{className:"dropdown_item",onClick:function(t){return e.delete(t,e.id)},children:"Delete"}),(null===(a=e.enableMethods)||void 0===a?void 0:a.enableClone)&&Object(X.jsx)("li",{className:"dropdown_item",onClick:function(t){return e.clone(t,e.id)},children:"Clone"})]})]}),Object(X.jsxs)("p",{className:"card_item_head",children:[void 0!==e.enableMethods&&e.enableMethods.enableChangePrivate&&Object(X.jsx)("span",{style:{cursor:e.author===e.owner?"pointer":"default"},className:"private_lock",onClick:function(t){return function(t){e.author===e.owner&&(e.changePrivate(t,e.id,!P),A(!P))}(t)},children:P?Object(X.jsx)(S.j,{}):Object(X.jsx)(S.k,{})}),Object(X.jsx)("span",{className:"card_item_head_name",children:e.name}),Object(X.jsxs)(_.b,{to:"/user/".concat(e.author),className:"author",children:["(by ",e.author,")"]})]}),Object(X.jsxs)("div",{className:"middle_layer",children:[Object(X.jsxs)("div",{className:"card_item_head_langs",children:[Object(X.jsx)("div",{className:"lang main_lang",children:e.mainLang}),"/",Object(X.jsx)("div",{className:"lang sec_lang",children:e.secondLang})]}),Object(X.jsxs)("div",{className:"info",children:[Object(X.jsxs)("p",{className:"info_count_words",children:[e.countWords," words"]}),Object(X.jsxs)("p",{className:"info_count_repetitions",children:[e.countRepetitions," repetitions"]})]})]}),Object(X.jsx)("p",{className:"card_item_description",children:e.description}),Object(X.jsxs)("div",{className:"footer",children:[(null===(c=e.enableMethods)||void 0===c?void 0:c.enableSubscribe)?Object(X.jsx)("button",{className:"btn btn-".concat(f?"danger":"primary"),onClick:function(t){return function(t){void 0!==e.subscribe&&e.subscribe(t,e.id),y.subscribe(e.id).then((function(e){console.log(e),de("Ok","All okey")})).catch((function(e){return console.log(e)})),g(!f)}(t)},children:f?"Unsubscribe":"Subscribe"}):Object(X.jsx)("div",{}),Object(X.jsxs)("span",{className:"likes",onClick:function(t){return function(t){var n;console.log(e.enableMethods),(null===(n=e.enableMethods)||void 0===n?void 0:n.enableLike)?(p(!b),R(b?L-1:L+1),e.like(t,e.id)):he("Warning","Please, sign in",3e3)}(t)},children:[Object(X.jsx)("span",{className:"heart ".concat(b?"active":"noactive"),children:Object(X.jsx)(S.g,{})}),L]})]})]})},pe=function(e){var t=Object(l.useState)([]),n=Object(E.a)(t,2),a=n[0],c=(n[1],Object(l.useState)(e.main_word)),s=Object(E.a)(c,2),i=(s[0],s[1],Object(l.useState)(e.answer)),r=Object(E.a)(i,2),o=(r[0],r[1],Object(l.useState)(e.description)),d=Object(E.a)(o,2),u=(d[0],d[1],Object(l.useRef)(null));return Q(u,(function(){e.visible&&e.close(null)})),console.log("render EditedCard",e.description),h.a.createPortal(Object(X.jsx)("div",{ref:u,className:"editedCardWatch",style:{display:e.visible?"block":"none",top:e.positionElement.y+240,left:e.positionElement.x+20},children:Object(X.jsxs)("div",{className:"wrapper",children:[Object(X.jsx)("div",{className:"beforeTringle",children:Object(X.jsx)(S.d,{})}),Object(X.jsx)("div",{className:"closeEditedCard",onClick:function(t){return e.close(t)},children:Object(X.jsx)(S.q,{})}),Object(X.jsxs)("div",{className:"control-top",children:[Object(X.jsx)("input",{type:"text",className:"__input __input_default",value:e.main_word}),Object(X.jsx)(S.l,{}),Object(X.jsx)("input",{type:"text",className:"__input __input_default",value:e.answer})]}),Object(X.jsx)("textarea",{name:"description",className:"__input __input_default",id:"",cols:10,rows:2,value:e.description}),Object(X.jsx)("button",{className:"__btn",onClick:function(t){return e.save(a,e.id)},children:"save"})]})}),document.getElementById("root"))},me=function(e){var t,n,a,c=Object(l.useState)(e.cards),s=Object(E.a)(c,2),i=s[0],r=s[1],o=Object(l.useState)(e.countWords),d=Object(E.a)(o,2),u=d[0],h=d[1],j=Object(l.useState)([]),b=Object(E.a)(j,2),p=b[0],m=b[1],O=Object(l.useState)(e.name),f=Object(E.a)(O,2),v=f[0],_=f[1],g=Object(l.useState)(""),k=Object(E.a)(g,2),x=k[0],N=k[1],w=Object(l.useState)(""),y=Object(E.a)(w,2),D=y[0],L=y[1],R=Object(l.useState)(1),T=Object(E.a)(R,2),I=T[0],P=T[1],A=Object(l.useState)(i[0]),G=Object(E.a)(A,2),M=G[0],K=G[1],F=Object(l.useState)(!1),U=Object(E.a)(F,2),B=U[0],V=U[1],H=Object(l.useState)({x:0,y:0}),W=Object(E.a)(H,2),q=W[0],J=W[1],Y=Object(l.useState)("RU"),z=Object(E.a)(Y,2),Q=z[0],Z=z[1],ee=Object(l.useState)("ENG"),te=Object(E.a)(ee,2),ne=te[0],ae=te[1],ce=Object(l.useRef)(null),se=Object(l.useRef)(null),ie=Object(l.useRef)(null),re=Object(l.useRef)(null),oe=["RUS","ENG","JPN","CHI","ITA","SPA","FRA","GER"];return Object(X.jsxs)("div",{className:"card_item card_item_active",children:[Object(X.jsx)("div",{className:"close",onClick:e.close,children:Object(X.jsx)(S.q,{})}),Object(X.jsx)("p",{className:"card_item_name",children:Object(X.jsx)($,{text:v,typeInput:"text",onChanged:function(e,t){return function(e){_(e);var t={name:"name",value:e};m((function(e){return[].concat(Object(C.a)(e),[{type:"CHANGE_DECK",payload:t}])}))}(t)}})}),Object(X.jsxs)("div",{className:"top-panel",children:[Object(X.jsxs)("div",{className:"select_languages",children:[Object(X.jsx)("select",{onChange:function(e){Z(e.currentTarget.value)},className:"form-select","aria-label":"Default select example",children:oe.map((function(e){return Object(X.jsx)("option",{selected:e===Q,children:e})}))}),Object(X.jsx)("span",{className:"card_item_panel_toggler",onClick:function(){var e=Q;Z(ne),ae(e)},children:Object(X.jsx)(S.b,{})}),Object(X.jsx)("select",{onChange:function(e){ae(e.currentTarget.value)},className:"form-select","aria-label":"Default select example",children:oe.map((function(e){return Object(X.jsx)("option",{selected:e===ne,children:e})}))})]}),Object(X.jsx)("div",{})]}),Object(X.jsxs)("div",{className:"info",children:[Object(X.jsxs)("span",{className:"card_item_count_words",children:[u," words"]}),Object(X.jsxs)("p",{className:"card_item_count_repetitions",children:[e.countRepetitions," repetitions"]})]}),Object(X.jsx)("div",{className:"description_deck__wrapper",children:Object(X.jsx)("textarea",{defaultValue:e.description||"",ref:ie,placeholder:"Type description deck",name:"",id:"",cols:60,rows:10})}),Object(X.jsx)("div",{className:"card_item_panel_adding__wrapper",children:Object(X.jsxs)("div",{className:"card_item_panel_adding",children:[Object(X.jsxs)("span",{className:"index_card",children:["#",I]}),Object(X.jsxs)("div",{className:"main-answer-words",children:[Object(X.jsxs)("div",{className:"input-wrapper form-floating",children:[Object(X.jsx)("input",{onChange:function(e){N(e.currentTarget.value)},value:x,type:"text",className:"form-control",id:"floatingInput",placeholder:"type word...",ref:ce}),Object(X.jsxs)("label",{htmlFor:"floatingInput",children:["Main word on ",Q]})]}),Object(X.jsx)("span",{className:"card_item_panel_toggler",children:Object(X.jsx)(S.l,{})}),Object(X.jsxs)("div",{className:"input-wrapper form-floating",children:[Object(X.jsx)("input",{onChange:function(e){L(e.currentTarget.value)},value:D,type:"text",className:"form-control",id:"floatingInput",placeholder:"type word...",ref:se}),Object(X.jsxs)("label",{htmlFor:"floatingInput",children:["Second word ",ne]})]})]}),Object(X.jsxs)("div",{className:"control_bottom__wrapper",children:[Object(X.jsx)("textarea",{ref:re,placeholder:"Type description",name:"",id:"",cols:60,rows:10}),Object(X.jsx)("button",{className:"card_item_panel_button_add",onClick:function(e){var t,n={id:-1,main_word:x,answer:D,type:"default",description:null===(t=re.current)||void 0===t?void 0:t.value};r((function(e){return[].concat(Object(C.a)(e),[n])})),h((function(e){return e+1})),m((function(e){return[].concat(Object(C.a)(e),[{type:"NEW_CARD",payload:n}])})),N(""),L(""),P(I+1)},children:"add"})]})]})}),B&&Object(X.jsx)(pe,{visible:B,id:M.id,main_word:M.main_word,answer:M.answer,description:M.description,type:"default",positionElement:q,close:function(e){return V(!1)},save:function(e,t){console.log(e,t)}}),Object(X.jsx)("div",{className:"card_item_panel_item_words",children:Object(X.jsx)("ul",{className:"card_item_panel_item_words_ul",children:i.map((function(e,t){return Object(X.jsxs)("li",{className:"item",onClick:function(e){return function(e,t){J({x:e.currentTarget.offsetLeft,y:e.currentTarget.offsetTop}),K(i[t]),V(!0)}(e,t)},children:[Object(X.jsxs)("span",{className:"index",children:["#",t+1,". "]}),Object(X.jsx)("span",{className:"main_word",children:e.main_word}),"-",Object(X.jsx)("span",{className:"second_word",children:e.answer}),Object(X.jsx)("div",{className:"close_deck",onClick:function(e){return function(e,t){e.stopPropagation(),V(!1),r((function(e){return e.filter((function(e,n){return n!==t}))})),m((function(e){return[].concat(Object(C.a)(e),[{type:"DELETE_CARD",payload:{id:i[t].id}}])}))}(e,t)},children:Object(X.jsx)(S.q,{})})]})}))})}),Object(X.jsxs)("div",{className:"buttons_group",children:[(null===(t=e.enableMethods)||void 0===t?void 0:t.enableCreate)&&Object(X.jsx)("button",{className:"__btn __button-default button-create",onClick:function(t){var n,a={name:v,isPrivate:!1,description:null===(n=ie.current)||void 0===n?void 0:n.value,mainLang:Q,secondLang:ne,price:0,cards:i};0!==i.length?e.create(t,a):he("\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435!","\u0412\u044b \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438!",2500)},children:"create"}),(null===(n=e.enableMethods)||void 0===n?void 0:n.enableSave)&&Object(X.jsx)("button",{className:"__btn __button-default button-save mr-5",onClick:function(t){return e.save(t,e.id,p)},children:"save"}),(null===(a=e.enableMethods)||void 0===a?void 0:a.enableDelete)&&Object(X.jsx)("button",{className:"__btn __button-default button-delete",onClick:function(t){return e.delete(t,e.id)},children:"delete"})]})]})},Oe=function(e){return Object(X.jsx)("div",{className:"card_item card_item_noactive new_card",children:Object(X.jsx)("div",{className:"svg_wrapper",onClick:function(t){return e.add(t)},children:Object(X.jsx)(S.n,{})})})},fe=function(e){var t=e.info;return Object(X.jsx)("section",{className:"lesson_section lesson_info",children:Object.keys(t).map((function(e,n){return Object(X.jsxs)("p",{className:"lesson_info_item",children:[Object(X.jsxs)("span",{className:"lesson_info_item_key",children:[e,":"]}),Object(X.jsx)("span",{className:"lesson_info_item_value",children:Object.values(t)[n]})]})}))})},ve={Header:Z,Deck:be,Currsection:fe,Notification:function(e){var t=Object(l.useState)(e.visible),n=Object(E.a)(t,2),a=(n[0],n[1]);return e.visible&&setTimeout((function(){a(!1),le.dispatch(z.notification.hide())}),e.timeout||2e3),Object(X.jsx)("div",{className:"Notification notify_".concat(e.type||"default"),style:{display:e.visible?"block":"none"},children:Object(X.jsxs)("div",{className:"Notification_wrapper_content",children:[Object(X.jsx)("div",{className:"close",onClick:function(e){return le.dispatch(z.notification.hide())},children:Object(X.jsx)(S.q,{})}),Object(X.jsx)("h2",{className:"head",children:e.head}),Object(X.jsx)("p",{className:"content",children:e.content})]})})}},_e=document.querySelector(".loader__wrapper"),ge=function(){_e.classList.remove("loader__wrapper--hide")},ke=function(){_e.classList.add("loader__wrapper--hide")},xe=ve,Ne=(n(42),function(e){return Object(X.jsxs)("div",{className:"Popup_confirm",children:[Object(X.jsx)("button",{className:"btn btn-danger",onClick:function(t){return e.success(!1)},children:"Cancel"}),Object(X.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.success(!0)},children:"Accept"})]})}),we=Object(j.b)(null,(function(e){return{hide:function(){return e(z.popup.hide())}}})),ye=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={visible:a.props.visible||!1},a}return Object(m.a)(n,[{key:"close",value:function(){this.props.hide(),this.props.close()}},{key:"success",value:function(e){this.props.success(e),this.props.hide(),this.props.close()}},{key:"switchModals",value:function(e){return e===D.CONFIRM?Object(X.jsx)(Ne,{success:this.success.bind(this)}):Object(X.jsx)(X.Fragment,{})}},{key:"render",value:function(){return h.a.createPortal(Object(X.jsx)("div",{className:"Popup__wrapper ".concat(this.props.visible?"active":"noactive"),children:Object(X.jsxs)("div",{className:"Popup",children:[Object(X.jsx)("div",{className:"control_top",children:Object(X.jsx)("span",{className:"close_button",onClick:this.close.bind(this),children:Object(X.jsx)(S.q,{})})}),Object(X.jsx)("div",{className:"head",children:Object(X.jsx)("span",{children:this.props.head})}),Object(X.jsx)("div",{className:"content",children:Object(X.jsx)("span",{children:this.props.content})}),Object(X.jsx)("div",{className:"control_botton",children:this.switchModals(this.props.type)})]})}),document.getElementById("root-modals"))}}]),n}(d.a.PureComponent),Ce=function(e,t,n,a){return le.dispatch(z.popup.show(D.CONFIRM,e,t,{close:n,success:a}))},Ee=we(ye),Se=Object(j.b)((function(e){return{user:e.app.user}}))(function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={decksSubscriptions:[],decksOwned:[],isNewDeck:!1,isEdit:!1,deckEdit:null},ge(),a}return Object(m.a)(n,[{key:"addDeck",value:function(e){this.setState({isNewDeck:!0})}},{key:"saveDeck",value:function(e,t,n){var a=this;y.applyChanges(t,n).then((function(e){console.log(e),a.setState({isEdit:!1})})).catch((function(e){return console.log(e)}))}},{key:"editDeck",value:function(e,t){console.log("edit",t),this.setState({isEdit:!0,deckEdit:this.state.decksOwned[t]})}},{key:"deleteDeck",value:function(e,t){var n=this;Ce("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043a?","\u0415\u0441\u043b\u0438 \u0432\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0434\u0435\u043a, \u0432\u0441\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0442\u043e\u0436\u0435 \u0443\u0434\u0430\u043b\u044f\u0442\u0441\u044f, \u0432\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c?",(function(){}),(function(e){e&&y.deleteDeck(t).then((function(e){console.log(e),e.data.error||(n.setState({decksOwned:n.state.decksOwned.filter((function(e){return e.id!==t}))}),de("OK","\u0414\u0435\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",3e3))})).catch((function(e){ue("\u041e\u0448\u0431\u0438\u043a\u0430","\u0414\u0435\u043a \u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",3e3)}))}))}},{key:"like",value:function(e,t){y.setLike(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),console.log("like",t)}},{key:"changePrivate",value:function(e,t,n){y.applyChanges(t,[{type:"CHANGE_DECK",payload:{name:"isPrivate",value:Number(n)}}]).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"createNewDeck",value:function(e,t){var n=this;y.addDeck(t).then((function(e){console.log(e),n.setState({isNewDeck:!1,decksOwned:[].concat(Object(C.a)(n.state.decksOwned),[Object(b.a)({},t)])})})).catch((function(e){return console.log(e)}))}},{key:"handleUnsibscribe",value:function(e,t){this.setState({decksSubscriptions:this.state.decksSubscriptions.filter((function(e){return e.id!==t}))})}},{key:"handleCloseActiveAddingDeck",value:function(e){this.setState({isNewDeck:!1})}},{key:"handleCloseActiveEditingDeck",value:function(e){this.setState({isEdit:!1})}},{key:"componentDidMount",value:function(){var e=this;console.log(this.state.decksOwned),0===this.state.decksOwned.length&&y.getDecks().then((function(t){console.log(t),!t.error&&e.setState({decksSubscriptions:[].concat(Object(C.a)(e.state.decksSubscriptions),Object(C.a)(t.data.subscriptions)),decksOwned:[].concat(Object(C.a)(e.state.decksOwned),Object(C.a)(t.data.owned))}),ke()})).catch((function(e){return ue("Error","Failed to load data",3e3)}))}},{key:"render",value:function(){var e=this;return Object(X.jsxs)(d.a.Fragment,{children:[Object(X.jsxs)("section",{className:"lesson_section",children:[Object(X.jsx)("h2",{className:"cards_main_name",children:"My Decks"}),Object(X.jsxs)("div",{className:"cards",children:[this.state.isEdit&&Object(X.jsx)(me,{index:-1,id:this.state.deckEdit.id,name:this.state.deckEdit.name,countWords:this.state.deckEdit.countWords,countRepetitions:this.state.deckEdit.countRepetitions,isPrivate:this.state.deckEdit.isPrivate,mainLang:this.state.deckEdit.mainLang,secondLang:this.state.deckEdit.secondLang,cards:this.state.deckEdit.cards,author:this.state.deckEdit.author,owner:this.state.deckEdit.owner,description:this.state.deckEdit.description,countLikes:this.state.deckEdit.countLikes||0,activeLike:this.state.deckEdit.activeLike||!1,enableMethods:{enableSave:!0,enableDelete:!0},close:this.handleCloseActiveEditingDeck.bind(this),save:this.saveDeck.bind(this),delete:this.deleteDeck.bind(this)}),this.state.isNewDeck&&Object(X.jsx)(me,{index:-1,id:-1,name:"New Deck",countWords:0,countRepetitions:0,isPrivate:!1,mainLang:"RU",secondLang:"ENG",cards:[],author:this.props.user.login,owner:this.props.user.login,description:"",countLikes:0,activeLike:!1,enableMethods:{enableCreate:!0},close:this.handleCloseActiveAddingDeck.bind(this),create:this.createNewDeck.bind(this)}),Object(X.jsx)(Oe,{add:this.addDeck.bind(this)}),0!==this.state.decksOwned.length&&this.state.decksOwned.map((function(t,n){return Object(X.jsx)(be,{index:n,id:t.id,name:t.name,countWords:t.countWords||0,author:t.author,owner:t.owner,description:t.description,countRepetitions:t.countRepetitions||0,isPrivate:t.isPrivate,mainLang:t.mainLang.toUpperCase(),secondLang:t.secondLang.toUpperCase(),countLikes:t.countLikes||0,activeLike:t.activeLike||!1,cards:t.cards,enableMethods:{enableChangePrivate:!0,enableDelete:!0,enableEdit:!0,enableLike:!0},edit:e.editDeck.bind(e),delete:e.deleteDeck.bind(e),like:e.like,changePrivate:e.changePrivate.bind(e)},"deck_".concat(n))}))]})]}),Object(X.jsxs)("section",{className:"lesson_section ".concat(0===this.state.decksSubscriptions.length?"noactive":"active"),children:[Object(X.jsx)("h2",{className:"cards_main_name",children:"My Subscribed Decks"}),Object(X.jsx)("div",{className:"cards",children:0!==this.state.decksSubscriptions.length&&this.state.decksSubscriptions.map((function(t,n){return Object(X.jsx)(be,{index:n,id:t.id,name:t.name,countWords:t.countWords||0,author:t.author,owner:t.owner,description:t.description,countRepetitions:t.countRepetitions||0,isPrivate:t.isPrivate,mainLang:t.mainLang.toUpperCase(),secondLang:t.secondLang.toUpperCase(),countLikes:t.countLikes||0,activeLike:t.activeLike||!1,cards:t.cards,subscribed:t.subscribed,subscribe:e.handleUnsibscribe.bind(e),enableMethods:{enableLike:!0,enableSubscribe:!0},like:e.like},"deck_".concat(n))}))})]})]})}}]),n}(d.a.Component)),De=(n(43),n(44),function(e){return Object(X.jsx)("div",{className:"home",children:Object(X.jsx)("p",{style:{color:"white"},children:"Home, sweet home"})})}),Le=(n(45),Object(j.b)((function(e){return{auth:e.app.auth}}),(function(e){return{login:function(t){return e(z.app.login(t))}}}))(function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={loginValidate:null,passwordValidate:null},a.login=Object(l.createRef)(),a.password=Object(l.createRef)(),a}return Object(m.a)(n,[{key:"clickLogin",value:function(e){var t,n,a=this;e.preventDefault(),y.login({login:null===(t=this.login.current)||void 0===t?void 0:t.value,password:null===(n=this.password.current)||void 0===n?void 0:n.value}).then((function(e){e.data.error?ue("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",4e3):(a.props.login(e.data),a.props.history.push("/"),de("OK","\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!",3e3))})).catch((function(e){return ue("Error","Error on server")}))}},{key:"validateForm",value:function(e){switch(console.log(e),e.target.name){case"login":e.target.value.length>3&&e.target.value.length<30?this.setState({loginValidate:!0}):this.setState({loginValidate:!1});break;case"password":e.target.value.length>7&&e.target.value.length<40?this.setState({passwordValidate:!0}):this.setState({passwordValidate:!1})}}},{key:"render",value:function(){var e=this;return Object(X.jsx)("div",{className:"login",children:Object(X.jsxs)("form",{children:[Object(X.jsx)("h2",{children:"Login"}),Object(X.jsxs)("div",{className:"form-floating mb-3",children:[Object(X.jsx)("input",{type:"text",name:"login",onBlur:function(t){return e.validateForm(t)},ref:this.login,className:"input-login form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.loginValidate?this.state.loginValidate?"is-valid":"is-invalid":""),id:"floatingInput",placeholder:"your login"}),Object(X.jsx)("label",{htmlFor:"floatingInput",children:"Login"})]}),Object(X.jsxs)("div",{className:"form-floating mb-3",children:[Object(X.jsx)("input",{type:"password",onBlur:function(t){return e.validateForm(t)},ref:this.password,className:"input-password form-control \n\t\t\t\t\t\t\t\t".concat(null!==this.state.passwordValidate?this.state.passwordValidate?"is-valid":"is-invalid":""),id:"floatingInput",name:"password",placeholder:"your password"}),Object(X.jsx)("label",{htmlFor:"floatingInput",children:"Password"})]}),Object(X.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.clickLogin(t)},children:"login"})]})})}}]),n}(d.a.Component))),Re=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(X.jsx)("div",{className:"page_statistics",children:"Statistics"})}}]),n}(d.a.Component),Te=Object(j.b)((function(e){return{auth:e.app.auth}}),(function(e){return{login:function(t){return e(z.app.login(t))}}}))(function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={nameValidate:null,loginValidate:null,passwordValidate:null},a.name=Object(l.createRef)(),a.login=Object(l.createRef)(),a.password=Object(l.createRef)(),a.rpassword=Object(l.createRef)(),a}return Object(m.a)(n,[{key:"clickRegistration",value:function(e){var t,n,a,c,s,i=this;(e.preventDefault(),this.state.loginValidate&&this.state.nameValidate&&this.state.passwordValidate)?(null===(t=this.password.current)||void 0===t?void 0:t.value)===(null===(n=this.rpassword.current)||void 0===n?void 0:n.value)?y.registration({name:null===(a=this.name.current)||void 0===a?void 0:a.value,login:null===(c=this.login.current)||void 0===c?void 0:c.value,password:null===(s=this.password.current)||void 0===s?void 0:s.value,refer:null}).then((function(e){console.log(e),e.data.error?ue("\u041e\u0448\u0438\u0431\u043a\u0430","\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0442\u0430\u043a\u043e\u0439 \u043b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442",4e3):(i.props.login(e.data),i.props.history.push("/"))})).catch((function(e){return console.log(e)})):he("\u041e\u0448\u0438\u0431\u043a\u0430","\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442",4e3):he("\u041e\u0448\u0438\u0431\u043a\u0430","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",4e3)}},{key:"onValidate",value:function(e){switch(console.log(e),e.currentTarget.name){case"name":this.setState({nameValidate:e.currentTarget.value.length>4});break;case"login":this.setState({loginValidate:e.currentTarget.value.length>3});break;case"password":this.setState({passwordValidate:e.currentTarget.value.length>7})}}},{key:"render",value:function(){var e=this;return Object(X.jsx)("div",{className:"registration",children:Object(X.jsxs)("form",{children:[Object(X.jsx)("h2",{children:"Registration"}),Object(X.jsxs)("div",{className:"form-floating mb-3",children:[Object(X.jsx)("input",{name:"name",className:"form-control ".concat(null!==this.state.nameValidate?this.state.nameValidate?"is-valid":"is-invalid":""),onBlur:function(t){return e.onValidate(t)},type:"text",ref:this.name,id:"floatingInput",placeholder:"your name"}),Object(X.jsx)("label",{htmlFor:"floatingInput",children:"Name"})]}),Object(X.jsxs)("div",{className:"form-floating mb-3",children:[Object(X.jsx)("input",{name:"login",className:"form-control ".concat(null!==this.state.loginValidate?this.state.loginValidate?"is-valid":"is-invalid":""),onBlur:function(t){return e.onValidate(t)},type:"text",ref:this.login,id:"floatingInput",placeholder:"your login"}),Object(X.jsx)("label",{htmlFor:"floatingInput",children:"Login"})]}),Object(X.jsxs)("div",{className:"form-floating mb-3",children:[Object(X.jsx)("input",{name:"password",className:"form-control ".concat(null!==this.state.passwordValidate?this.state.passwordValidate?"is-valid":"is-invalid":""),onBlur:function(t){return e.onValidate(t)},type:"password",ref:this.password,id:"floatingInput",placeholder:"your password"}),Object(X.jsx)("label",{htmlFor:"floatingInput",children:"Password"})]}),Object(X.jsxs)("div",{className:"form-floating mb-3",children:[Object(X.jsx)("input",{type:"password",ref:this.rpassword,className:"form-control",id:"floatingInput",placeholder:"your password"}),Object(X.jsx)("label",{htmlFor:"floatingInput",children:"Repeat password"})]}),Object(X.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.clickRegistration(t)},children:"registration"})]})})}}]),n}(d.a.Component)),Ie=(n(78),Object(j.b)(null,(function(e){return{addScores:function(t){return e(z.app.addScores(t))}}}))(function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).TIME_CARD=0,a.state={deck:null,cards:[],currentLang:"ENG",currentCard:0,successed:[],valueInputAnswer:"",ended:!1,showResults:!1,scores:0,visibleHint:!1},a}return Object(m.a)(n,[{key:"shuffleCards",value:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}},{key:"where",value:function(e,t){}},{key:"nextCard",value:function(e){var t=this;this.state.currentCard+1<this.state.cards.length?this.setState({currentCard:this.state.currentCard+1,successed:[].concat(Object(C.a)(this.state.successed),[{idCard:this.state.cards[this.state.currentCard].id,time:this.getTimeDeck("end"),answer:e}])},(function(){return t.getTimeDeck("start")})):this.setState({ended:!0,successed:[].concat(Object(C.a)(this.state.successed),[{idCard:this.state.cards[this.state.currentCard].id,time:this.getTimeDeck("end"),answer:e}])},(function(){t.getTimeDeck("start"),y.getScoresAfterEndPlay({results:t.state.successed},t.state.deck.id).then((function(e){t.setState({scores:e.data.score||0}),t.props.addScores(e.data.score||0)})).catch((function(e){return console.log(e)}))}))}},{key:"getTimeDeck",value:function(e){if("start"===e)this.TIME_CARD=(new Date).getTime();else if("end"===e){var t=this.TIME_CARD;return this.TIME_CARD=0,Math.ceil(((new Date).getTime()-t)/1e3)}return 0}},{key:"checkCard",value:function(e,t,n){return e.answer.split("|").map((function(e){return e.trim().toLowerCase()})).includes(t.toLowerCase())}},{key:"handleNextCard",value:function(){var e=this.state.valueInputAnswer;this.checkCard(this.state.cards[this.state.currentCard],e)?this.nextCard(!0):(this.nextCard(!1),this.setState({valueInputAnswer:""}))}},{key:"handleSkipCard",value:function(){this.nextCard(!1)}},{key:"handleChangeInputAnswer",value:function(e){this.checkCard(this.state.cards[this.state.currentCard],e.currentTarget.value)?(this.setState({valueInputAnswer:""}),this.nextCard(!0)):"-"===e.currentTarget.value?(this.nextCard(!1),this.setState({valueInputAnswer:""})):this.setState({valueInputAnswer:e.currentTarget.value})}},{key:"handleHint",value:function(){this.setState({visibleHint:!this.state.visibleHint})}},{key:"getResults",value:function(){var e=this;return this.state.successed.map((function(t){var n=e.state.cards.filter((function(e){return e.id===t.idCard}))[0];return{main_word:n.main_word,answer:n.answer,successed:t.answer,time:t.time}}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,n=Number(t.id);Boolean(n)?y.getDeck(n).then((function(t){e.getTimeDeck("start"),e.setState({deck:t.deck,cards:e.shuffleCards(t.deck.cards)})})).catch((function(e){return console.log(e)})):(this.props.history.push("/decks"),he("You have not choise Deck","Please, choose playing Deck",4e3))}},{key:"render",value:function(){var e,t,n,a,c,s,i,r,o=this;return Object(X.jsxs)("div",{className:"Play page",style:{color:"white"},children:[Object(X.jsxs)("div",{className:"Play__card ".concat(this.state.ended?"ended":""),children:[Object(X.jsx)(fe,{info:{name:null===(e=this.state.deck)||void 0===e?void 0:e.name,description:(null===(t=this.state.deck)||void 0===t?void 0:t.description)||"no description","current card":"".concat(this.state.currentCard+1," / ").concat(null===(n=this.state.deck)||void 0===n?void 0:n.cards.length)}}),Object(X.jsx)("section",{className:"lesson_section Play__card_section",children:Object(X.jsxs)("div",{className:"lesson_card",children:[Object(X.jsx)("span",{className:"lesson_card_lang",children:null===(a=this.state.deck)||void 0===a?void 0:a.mainLang.toUpperCase()}),Object(X.jsx)("button",{className:"lesson_card_hint",onClick:this.handleHint.bind(this),children:"?"}),Object(X.jsx)("div",{className:"hint ".concat(this.state.visibleHint?"active":"noactive"),children:null===(c=this.state.cards[this.state.currentCard])||void 0===c?void 0:c.description}),Object(X.jsx)("span",{className:"lesson_card_word",children:null===(s=this.state.cards[this.state.currentCard])||void 0===s?void 0:s.main_word})]})}),Object(X.jsxs)("section",{className:"lesson_section answer",children:[Object(X.jsx)("div",{onClick:this.handleSkipCard.bind(this),className:"answer_button_skip_word",children:"Skip"}),Object(X.jsx)("input",{value:this.state.valueInputAnswer,onChange:this.handleChangeInputAnswer.bind(this),type:"text",className:"answer_input",placeholder:"translate on ".concat(null===(i=this.state.deck)||void 0===i?void 0:i.secondLang.toUpperCase(),"..."),autoFocus:!0}),Object(X.jsx)("div",{onClick:function(e){return o.handleNextCard()},className:"answer_button_next_word",children:Object(X.jsx)(S.a,{})})]})]}),Object(X.jsx)("div",{className:"section_congratulations ".concat(this.state.ended&&!this.state.showResults?"ended":""),children:Object(X.jsxs)("div",{className:"congratulations",children:[Object(X.jsxs)("div",{className:"welc",children:[Object(X.jsx)("h2",{children:"Congratulations!"}),Object(X.jsxs)("h3",{children:['You have passed the "',null===(r=this.state.deck)||void 0===r?void 0:r.name,'" deck once again.']})]}),Object(X.jsxs)("h1",{children:["Your scores: ",this.state.scores]}),Object(X.jsxs)("div",{className:"control_buttons",children:[Object(X.jsx)("button",{className:"btn btn-primary",onClick:function(e){return o.setState({ended:!1,currentCard:0,cards:o.shuffleCards(o.state.cards),successed:[]})},children:"Once again"}),Object(X.jsx)("button",{className:"btn btn-success",onClick:function(e){return o.setState({showResults:!0})},children:"results"}),Object(X.jsx)(_.b,{to:"/decks",className:"btn btn-danger",children:"To Decks"})]})]})}),Object(X.jsxs)("div",{className:"section_results ".concat(this.state.showResults?"showed":"hided"),children:[Object(X.jsx)("ul",{children:this.getResults().map((function(e){return Object(X.jsxs)("li",{children:[e.main_word," - ",e.answer,": ",e.successed?"Yes!":"no!"," on ",e.time]})}))}),Object(X.jsx)("button",{className:"btn btn-primary",onClick:function(e){return o.setState({showResults:!1})},children:"back"})]})]})}}]),n}(d.a.Component))),Pe=Object(j.b)((function(e){return{auth:e.app.auth,notify:e.notification,user:e.app.user}}))(function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={decks:[]},ge(),a}return Object(m.a)(n,[{key:"handleLike",value:function(e,t){console.log("like",t),y.setLike(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"handleClone",value:function(e,t){y.cloneDeck(t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;y.getAllDecks().then((function(t){e.setState({decks:t.data.decks}),ke()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return console.log(this.state.decks),Object(X.jsx)("div",{className:"Store",style:{color:"white"},children:Object(X.jsxs)("section",{className:"lesson_section",children:[Object(X.jsx)("h2",{className:"cards_main_name",children:"Store"}),Object(X.jsx)("div",{className:"cards",children:0!==this.state.decks.length&&this.state.decks.map((function(t,n){return Object(X.jsx)(be,{index:n,id:t.id,name:t.name,countWords:t.countWords||0,author:t.author,owner:t.owner,description:t.description,countRepetitions:t.countRepetitions||0,isPrivate:t.isPrivate,mainLang:t.mainLang.toUpperCase(),secondLang:t.secondLang.toUpperCase(),countLikes:t.countLikes||0,activeLike:t.activeLike||!1,cards:t.cards,subscribed:t.subscribed,clone:e.handleClone,like:e.handleLike,enableMethods:{enableLike:e.props.auth,enableSubscribe:t.author!==e.props.user.login&&e.props.auth,enableClone:e.props.auth}},"deck_".concat(n))}))})]})})}}]),n}(d.a.Component)),Ae=n(26),Ge=(n(79),function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={rating:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=["login","rating"];y.getRating().then((function(n){e.setState({rating:n.data.users.map((function(e){return Object.keys(e).reduce((function(n,a){return t.includes(a)?Object(b.a)(Object(b.a)({},n),{},Object(Ae.a)({},a,e[a])):Object(b.a)({},n)}),{})}))})}))}},{key:"render",value:function(){return Object(X.jsx)("div",{className:"Rating",style:{color:"white"},children:Object(X.jsx)("ul",{className:"main_list",children:this.state.rating.map((function(e,t){return Object(X.jsxs)("li",{className:"main_list_item",children:[Object(X.jsxs)("span",{className:"login",children:[Object(X.jsx)("span",{className:"index",children:t+1})," ",e.login]}),Object(X.jsx)("span",{className:"rating",children:e.rating})]},t)}))})})}}]),n}(d.a.Component)),Me=(n(80),{Main:function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),a=t.call(this,e),ge(),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){ke()}},{key:"render",value:function(){return Object(X.jsx)("div",{className:"Main",style:{color:"white"},children:Object(X.jsxs)("div",{className:"slider",children:[Object(X.jsx)("div",{className:"image_wrapper",children:Object(X.jsx)("img",{className:"image_slider",src:"images/slider.png",alt:"slider image"})}),Object(X.jsxs)("div",{className:"text_block",children:[Object(X.jsx)("h1",{children:"Learn, Repeate and Develop"}),Object(X.jsx)("p",{children:"Welcome to the service for memorizing words in foreign languages using flashcards"})]})]})})}}]),n}(d.a.Component),Decks:Se,Home:De,Statistics:Re,Play:Ie,Store:Pe,Rating:Ge,Registration:Te,Login:Le}),Ke=[{isNavBar:!1,isLogin:!1,isExact:!0,path:"/",name:"Main",component:Me.Main},{isNavBar:!0,isLogin:!0,isExact:!0,isPrivate:!0,path:"/home",name:"Home",component:Me.Home,icon:S.h},{isNavBar:!1,isLogin:!0,isExact:!0,isPrivate:!1,path:"/play/:id",name:"Play",component:Me.Play,icon:S.m},{isNavBar:!0,isLogin:!0,isExact:!0,isPrivate:!0,path:"/decks",name:"Decks",component:Me.Decks,icon:S.i},{isNavBar:!0,isExact:!0,path:"/store",name:"Store",component:Me.Store,icon:S.p},{isNavBar:!0,isLogin:!0,isExact:!0,isPrivate:!0,path:"/statistics",name:"Statistics",component:Me.Statistics,icon:S.e},{isNavBar:!0,isExact:!0,path:"/rating",name:"Rating",component:Me.Rating,icon:S.o},{isNavBar:!0,isExact:!0,isLogin:!1,path:"/registration",name:"Registration",component:Me.Registration},{isNavBar:!0,isLogin:!1,isExact:!0,path:"/login",name:"Login",component:Me.Login},{isNavBar:!1,isLogin:!1,isExact:!0,path:"/user/:login",name:"User",component:Me.Home}],Fe=function(e,t){var n=function(n){Object(O.a)(c,n);var a=Object(f.a)(c);function c(){return Object(p.a)(this,c),a.apply(this,arguments)}return Object(m.a)(c,[{key:"render",value:function(){return t?Object(X.jsx)(e,Object(b.a)({},this.props)):Object(X.jsx)(v.a,{to:"/login"})}}]),c}(d.a.Component);return n},Ue=(n(81),n(82),n(83),function(e){return Object(X.jsx)("footer",{children:Object(X.jsxs)("div",{className:"wrap_content",children:[Object(X.jsxs)("div",{className:"front",children:["Front: ",Object(X.jsx)("a",{href:"https://t.me/daniil00q",target:"_blank",children:"Shenyagin Daniil"}),Object(X.jsx)("a",{target:"_blank",href:"https://github.com/daniil00t",children:"@danii00t"})]}),Object(X.jsxs)("div",{className:"center",children:["RepDict\xa9",(new Date).getFullYear()]}),Object(X.jsxs)("div",{className:"back",children:["Back: ",Object(X.jsx)("a",{href:"https://t.me/nafanyechka",target:"_blank",children:"Bausov Vadim"}),Object(X.jsx)("a",{target:"_blank",href:"https://github.com/nafanyushka",children:"@nafanyechka"})]})]})})}),Be=Object(j.b)((function(e){return{auth:e.app.auth,notify:e.notification,popupProps:e.popup}}),(function(e){return{login:function(t){return e(z.app.login(t))},logout:function(){return e(z.app.logout())},confirm:function(t,n,a,c){return e(z.popup.show(D.CONFIRM,t,n,{close:a,success:c}))}}})),Ve=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(X.jsx)(v.d,{children:Ke.map((function(t){var n=t.isPrivate?Fe(t.component,e.props.auth):t.component;return Object(X.jsx)(v.b,{exact:!0,path:t.path,component:n},t.path)}))})}}]),n}(d.a.PureComponent),He=Be(function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={auth:!0},console.log("\n    ____  __________  ____  ________________   _________            __\n   / __ \\/ ____/ __ \\/ __ \\/  _/ ____/_  __/  / ____/ (_)__  ____  / /_\n  / /_/ / __/ / /_/ / / / // // /     / /    / /   / / / _ \\/ __ \\/ __/\n / _, _/ /___/ ____/ /_/ // // /___  / /    / /___/ / /  __/ / / / /_\n/_/ |_/_____/_/   /_____/___/\\____/ /_/     \\____/_/_/\\___/_/ /_/\\__/\n\t\t"),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;void 0!==(null===(e=localStorage.getItem("token"))||void 0===e?void 0:e.length)&&"undefined"!==localStorage.getItem("token")?y.auth().then((function(e){e.data.error?t.props.logout():(t.setState({auth:!0}),t.props.login(e.data.data))})).catch((function(e){return console.log(e)})):(this.setState({auth:!1}),localStorage.removeItem("token")),ke()}},{key:"render",value:function(){return Object(X.jsx)(_.a,{children:Object(X.jsxs)(d.a.Fragment,{children:[Object(X.jsx)(xe.Header,{routes:Ke.filter((function(e){return e.isNavBar}))}),Object(X.jsx)(Ve,{auth:this.state.auth||this.props.auth}),Object(X.jsx)(xe.Notification,Object(b.a)({},this.props.notify)),Object(X.jsx)(Ee,Object(b.a)({},this.props.popupProps)),Object(X.jsx)(Ue,{})]})})}}]),n}(d.a.Component));h.a.render(Object(X.jsx)(j.a,{store:le,children:Object(X.jsx)(He,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.375dd158.chunk.js.map